<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://jrhlive.com').hostname,
    root: '/',
    scheme: 'Muse',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="Kotlin kotlinçš„å˜é‡æ²¡æœ‰é»˜è®¤å€¼,éœ€è¦æ‰‹åŠ¨åˆå§‹åŒ–ï¼Œå¦åˆ™æŠ¥é”™  kotlin ç©ºå®‰å…¨  Lateinit var view:View å»¶è¿Ÿåˆå§‹åŒ– kotlinå˜é‡é»˜è®¤éç©º å¯ä»¥æ·»åŠ  ï¼Ÿè®¾ç½®ä¸ºå¯ç©º   var name:String?=null kotlin çº¿ç¨‹å®‰å…¨  name?.length   ç±»å‹æ¨æ–­">
<meta name="keywords" content="kotlin">
<meta property="og:type" content="article">
<meta property="og:title" content="kotlin å­¦ä¹ ">
<meta property="og:url" content="http://jrhlive.com/2019/01/20/kotlin-å­¦ä¹ /index.html">
<meta property="og:site_name" content="STAY HUNGRY. STAY FOOLISH.">
<meta property="og:description" content="Kotlin kotlinçš„å˜é‡æ²¡æœ‰é»˜è®¤å€¼,éœ€è¦æ‰‹åŠ¨åˆå§‹åŒ–ï¼Œå¦åˆ™æŠ¥é”™  kotlin ç©ºå®‰å…¨  Lateinit var view:View å»¶è¿Ÿåˆå§‹åŒ– kotlinå˜é‡é»˜è®¤éç©º å¯ä»¥æ·»åŠ  ï¼Ÿè®¾ç½®ä¸ºå¯ç©º   var name:String?=null kotlin çº¿ç¨‹å®‰å…¨  name?.length   ç±»å‹æ¨æ–­">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-12-31T06:31:52.053Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="kotlin å­¦ä¹ ">
<meta name="twitter:description" content="Kotlin kotlinçš„å˜é‡æ²¡æœ‰é»˜è®¤å€¼,éœ€è¦æ‰‹åŠ¨åˆå§‹åŒ–ï¼Œå¦åˆ™æŠ¥é”™  kotlin ç©ºå®‰å…¨  Lateinit var view:View å»¶è¿Ÿåˆå§‹åŒ– kotlinå˜é‡é»˜è®¤éç©º å¯ä»¥æ·»åŠ  ï¼Ÿè®¾ç½®ä¸ºå¯ç©º   var name:String?=null kotlin çº¿ç¨‹å®‰å…¨  name?.length   ç±»å‹æ¨æ–­">

<link rel="canonical" href="http://jrhlive.com/2019/01/20/kotlin-å­¦ä¹ /">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>kotlin å­¦ä¹  | STAY HUNGRY. STAY FOOLISH.</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">STAY HUNGRY. STAY FOOLISH.</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Hi,sweet.A new day.</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://jrhlive.com/2019/01/20/kotlin-å­¦ä¹ /">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jiarh">
      <meta itemprop="description" content="coding change the world .">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="STAY HUNGRY. STAY FOOLISH.">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          kotlin å­¦ä¹ 
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-01-20 22:11:37" itemprop="dateCreated datePublished" datetime="2019-01-20T22:11:37+08:00">2019-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-12-31 14:31:52" itemprop="dateModified" datetime="2019-12-31T14:31:52+08:00">2019-12-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/kotlin/" itemprop="url" rel="index">
                    <span itemprop="name">kotlin</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="Kotlin"><a href="#Kotlin" class="headerlink" title="Kotlin"></a>Kotlin</h2><ol>
<li><p>kotlinçš„å˜é‡æ²¡æœ‰é»˜è®¤å€¼,éœ€è¦æ‰‹åŠ¨åˆå§‹åŒ–ï¼Œå¦åˆ™æŠ¥é”™</p>
</li>
<li><p>kotlin ç©ºå®‰å…¨</p>
<ul>
<li><code>Lateinit var view:View</code> å»¶è¿Ÿåˆå§‹åŒ–</li>
<li>kotlinå˜é‡é»˜è®¤éç©º å¯ä»¥æ·»åŠ  <code>ï¼Ÿ</code>è®¾ç½®ä¸ºå¯ç©º   <code>var name:String?=null</code></li>
<li>kotlin çº¿ç¨‹å®‰å…¨  <code>name?.length</code></li>
</ul>
</li>
<li><p>ç±»å‹æ¨æ–­</p>
<a id="more"></a>
</li>
<li><p>var å¯ä»¥ä¿®æ”¹è®¾ç½®å˜é‡</p>
<p>val åªè¯»å˜é‡</p>
<ul>
<li>ä¸å¯ä»¥è°ƒç”¨setterå‡½æ•°ï¼Œä¸èƒ½é‡å†™setterå‡½æ•°ï¼Œä½†å¯ä»¥é‡å†™getterå‡½æ•°</li>
</ul>
</li>
<li><p>é»˜è®¤å®ç°äº†geter/setter æ–¹æ³•ï¼Œé‡å†™getter,setter</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name: String? = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">get</span>() &#123;</span><br><span class="line">      <span class="comment">//æ³¨æ„æ­¤å¤„çš„filed</span></span><br><span class="line">        <span class="keyword">return</span> field</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span>(value) &#123;</span><br><span class="line">        field = value</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>â€åŸºæœ¬ç±»å‹â€œçš„èˆå¼ƒ</p>
<p>æ•°å­—ï¼Œå­—ç¬¦ï¼Œå¸ƒå°”å€¼ï¼Œæ•°ç»„ï¼Œå­—ç¬¦ä¸²</p>
<ul>
<li>Int</li>
<li>Float</li>
<li>Long</li>
<li>â€¦</li>
</ul>
</li>
<li><p>ç±»çš„å¯è§æ€§</p>
<ul>
<li>Javaä¸­çš„publicåœ¨kotlinä¸­å¯ä»¥çœç•¥ï¼Œkotlinä¸­çš„ç±»é»˜è®¤æ˜¯publicçš„</li>
<li>kotlinä¸­çš„ç±»é»˜è®¤æ˜¯finalçš„ï¼Œå¯ä»¥åŠ <code>open</code> å…³é”®å­—ï¼Œæ¥è§£é™¤é™åˆ¶ï¼Œç»§æ‰¿æ—¶ä½¿ç”¨</li>
</ul>
</li>
<li><p><code>override</code>å…³é”®å­— ï¼Œåœ¨æ³¨è§£ä¸­@Override æ˜¯æ³¨è§£ï¼Œ<code>override</code>å…·æœ‰é—ä¼ æ€§ï¼Œå¯ä»¥æ·»åŠ <code>final</code>å…³é”®å­—ï¼Œå…³é—­<code>override</code> çš„é—ä¼ æ€§</p>
</li>
<li><p><code>abstract</code>å…³é”®å­—ï¼Œä¿®é¥°çš„ç±»æ— æ³•ç›´æ¥å®ä¾‹åŒ–ä½¿ç”¨ã€‚</p>
</li>
<li><p>å®ä¾‹åŒ–ä¸€ä¸ªæ–°ç±»æ—¶ï¼Œçœç•¥äº†Javaä¸­çš„newå…³é”®å­—ã€‚</p>
</li>
<li><p>kotlinä¸­ä½¿ç”¨<code>is</code>å…³é”®å­—è¿›è¡Œç±»å‹åˆ¤æ–­ï¼Œå¹¶ä¸”ç¼–è¯‘å™¨èƒ½å¤Ÿè¿›è¡Œç±»å‹åˆ¤æ–­ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬çœå»å¼ºè½¬çš„å†™æ³•</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewActivity</span> : <span class="type">MainActivity</span></span>() &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">action</span><span class="params">()</span></span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> activity: Activity = NewActivity()</span><br><span class="line">    <span class="comment">// ğŸ‘†activity æ˜¯æ— æ³•è°ƒç”¨ NewActivity çš„ action æ–¹æ³•çš„</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> activity: Activity = NewActivity()</span><br><span class="line">    <span class="keyword">if</span> (activity <span class="keyword">is</span> NewActivity) &#123;</span><br><span class="line">        <span class="comment">// ğŸ‘‡çš„å¼ºè½¬ç”±äºç±»å‹æ¨æ–­è¢«çœç•¥äº†</span></span><br><span class="line">        activity.action()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>javaä¸­éœ€è¦å…ˆä½¿ç”¨ <code>instanceof</code> å…³é”®å­—åˆ¤æ–­ç±»å‹ï¼Œå†é€šè¿‡å¼ºè½¬æ¥è°ƒç”¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Activity activity = <span class="keyword">new</span> NewActivity();</span><br><span class="line">    <span class="keyword">if</span> (activity <span class="keyword">instanceof</span> NewActivity) &#123;</span><br><span class="line">        ((NewActivity) activity).action();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä½¿ç”¨ <code>as</code> å…³é”®å­—ï¼šç›´æ¥è¿›è¡Œå¼ºè½¬è°ƒç”¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="function">fun <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> activity: Activity = NewActivity()</span><br><span class="line">     <span class="comment">//è¿™ç§å†™æ³•å¦‚æœå¼ºè½¬ç±»å‹æ“ä½œæ˜¯æ­£ç¡®çš„å½“ç„¶æ²¡é—®é¢˜ï¼Œä½†å¦‚æœå¼ºè½¬æˆä¸€ä¸ªé”™è¯¯çš„ç±»å‹ï¼Œç¨‹åºå°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚</span></span><br><span class="line">    (activity as NewActivity).action()</span><br><span class="line">      </span><br><span class="line">     <span class="comment">// ğŸ‘‡'(activity as? NewActivity)' ä¹‹åæ˜¯ä¸€ä¸ªå¯ç©ºç±»å‹çš„å¯¹è±¡ï¼Œæ‰€ä»¥ï¼Œéœ€è¦ä½¿ç”¨ '?.' æ¥è°ƒç”¨</span></span><br><span class="line">    (activity as? NewActivity)?.action()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>constructor</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    String name;</span><br><span class="line">      ğŸ‘‡   ğŸ‘‡</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(<span class="keyword">int</span> id, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">val</span> id: <span class="built_in">Int</span></span><br><span class="line">    <span class="keyword">val</span> name: String</span><br><span class="line">         ğŸ‘‡</span><br><span class="line">    <span class="keyword">constructor</span>(id: <span class="built_in">Int</span>, name: String) &#123;</span><br><span class="line"> <span class="comment">//ğŸ‘† æ²¡æœ‰ public</span></span><br><span class="line">        <span class="keyword">this</span>.id = id</span><br><span class="line">        <span class="keyword">this</span>.name = name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Java ä¸­æ„é€ å™¨å’Œç±»åŒåï¼ŒKotlin ä¸­ä½¿ç”¨ <code>constructor</code> è¡¨ç¤ºã€‚</li>
<li>Kotlin ä¸­æ„é€ å™¨æ²¡æœ‰ public ä¿®é¥°ï¼Œå› ä¸ºé»˜è®¤å¯è§æ€§å°±æ˜¯å…¬å¼€çš„ï¼ˆå…³äºå¯è§æ€§ä¿®é¥°ç¬¦è¿™é‡Œå…ˆä¸å±•å¼€ï¼Œåé¢ä¼šè®²åˆ°ï¼‰ã€‚</li>
</ul>
</li>
<li><h4 id="init"><a href="#init" class="headerlink" title="init"></a>init</h4><p>Java é‡Œå¸¸å¸¸é…åˆä¸€èµ·ä½¿ç”¨çš„ init ä»£ç å—ï¼Œåœ¨ Kotlin é‡Œçš„å†™æ³•ä¹Ÿæœ‰äº†ä¸€ç‚¹ç‚¹æ”¹å˜ï¼šä½ éœ€è¦ç»™å®ƒåŠ ä¸€ä¸ª <code>init</code> å‰ç¼€ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">   ğŸ‘‡</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–ä»£ç å—ï¼Œå…ˆäºä¸‹é¢çš„æ„é€ å™¨æ‰§è¡Œ</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    ğŸ‘‡</span><br><span class="line">    <span class="keyword">init</span> &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–ä»£ç å—ï¼Œå…ˆäºä¸‹é¢çš„æ„é€ å™¨æ‰§è¡Œ</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Kotlin çš„ init ä»£ç å—å’Œ Java ä¸€æ ·ï¼Œéƒ½åœ¨å®ä¾‹åŒ–æ—¶æ‰§è¡Œï¼Œå¹¶ä¸”æ‰§è¡Œé¡ºåºéƒ½åœ¨æ„é€ å™¨ä¹‹å‰ã€‚</p>
</li>
</ol>
<ol start="14">
<li><h3 id="final"><a href="#final" class="headerlink" title="final"></a>final</h3><p>Kotlin ä¸­çš„ <code>val</code> å’Œ Java ä¸­çš„ <code>final</code> ç±»ä¼¼ï¼Œè¡¨ç¤ºåªè¯»å˜é‡ï¼Œä¸èƒ½ä¿®æ”¹ã€‚è¿™é‡Œåˆ†åˆ«ä»æˆå‘˜å˜é‡ã€å‚æ•°å’Œå±€éƒ¨å˜é‡æ¥å’Œ Java åšå¯¹æ¯”ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line"> ğŸ‘‡</span><br><span class="line"><span class="keyword">final</span> <span class="keyword">int</span> final1 = <span class="number">1</span>;</span><br><span class="line">             ğŸ‘‡  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">method</span><span class="params">(<span class="keyword">final</span> String final2)</span> </span>&#123;</span><br><span class="line">     ğŸ‘‡</span><br><span class="line">    <span class="keyword">final</span> String final3 = <span class="string">"The parameter is "</span> + final2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">ğŸ‘‡</span><br><span class="line"><span class="keyword">val</span> fina1 = <span class="number">1</span></span><br><span class="line">       <span class="comment">// ğŸ‘‡ å‚æ•°æ˜¯æ²¡æœ‰ val çš„</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">method</span><span class="params">(final2: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">    ğŸ‘‡</span><br><span class="line">    <span class="keyword">val</span> final3 = <span class="string">"The parameter is "</span> + final2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>final å˜æˆäº† valã€‚</li>
<li>Kotlin å‡½æ•°å‚æ•°é»˜è®¤æ˜¯ val ç±»å‹ï¼Œæ‰€ä»¥å‚æ•°å‰ä¸éœ€è¦å†™ val å…³é”®å­—ï¼ŒKotlin é‡Œè¿™æ ·è®¾è®¡çš„åŸå› æ˜¯ä¿è¯äº†å‚æ•°ä¸ä¼šè¢«ä¿®æ”¹ï¼Œè€Œ Java çš„å‚æ•°å¯ä¿®æ”¹ï¼ˆé»˜è®¤æ²¡ final ä¿®é¥°ï¼‰ä¼šå¢åŠ å‡ºé”™çš„æ¦‚ç‡ã€‚</li>
<li><code>var</code> æ˜¯ variable çš„ç¼©å†™ï¼Œ <code>val</code> æ˜¯ value çš„ç¼©å†™ã€‚</li>
</ul>
</li>
<li><h3 id="static"><a href="#static" class="headerlink" title="static"></a>static</h3><p>åœ¨ Java é‡Œé¢å†™å¸¸é‡ï¼Œæˆ‘ä»¬ç”¨çš„æ˜¯ <code>static</code> + <code>final</code>ã€‚è€Œåœ¨ Kotlin é‡Œé¢ï¼Œé™¤äº† <code>final</code> çš„å†™æ³•ä¸ä¸€æ ·ï¼Œ<code>static</code> çš„å†™æ³•ä¹Ÿä¸ä¸€æ ·ï¼Œè€Œä¸”æ˜¯æ›´ä¸ä¸€æ ·ã€‚ç¡®åˆ‡åœ°è¯´ï¼šåœ¨ <code>Kotlin</code> é‡Œï¼Œé™æ€å˜é‡å’Œé™æ€æ–¹æ³•è¿™ä¸¤ä¸ªæ¦‚å¿µè¢«å»é™¤äº†ã€‚</p>
<p>é‚£å¦‚æœæƒ³åœ¨ Kotlin ä¸­åƒ Java ä¸€æ ·é€šè¿‡ç±»ç›´æ¥å¼•ç”¨è¯¥æ€ä¹ˆåŠå‘¢ï¼ŸKotlin çš„ç­”æ¡ˆæ˜¯ <code>companion object</code>ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sample</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">       ğŸ‘‡</span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> anotherString = <span class="string">"Another String"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><h3 id="object"><a href="#object" class="headerlink" title="object"></a>object</h3><p>Kotlin é‡Œçš„ <code>object</code> â€”â€”é¦–å­—æ¯å°å†™çš„ï¼Œä¸æ˜¯å¤§å†™ï¼ŒJava é‡Œçš„ <code>Object</code> åœ¨ Kotlin é‡Œä¸ç”¨äº†ã€‚</p>
<blockquote>
<p>Java ä¸­çš„ <code>Object</code> åœ¨ Kotlin ä¸­å˜æˆäº† <code>Any</code>ï¼Œå’Œ <code>Object</code> ä½œç”¨ä¸€æ ·ï¼šä½œä¸ºæ‰€æœ‰ç±»çš„åŸºç±»ã€‚</p>
</blockquote>
<p>è€Œ <code>object</code> ä¸æ˜¯ç±»ï¼Œåƒ <code>class</code> ä¸€æ ·åœ¨ Kotlin ä¸­å±äºå…³é”®å­—ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">object</span> Sample &#123;</span><br><span class="line">    <span class="keyword">val</span> name = <span class="string">"A name"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®ƒçš„æ„æ€å¾ˆç›´æ¥ï¼šåˆ›å»ºä¸€ä¸ªç±»ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªè¿™ä¸ªç±»çš„å¯¹è±¡ã€‚è¿™ä¸ªå°±æ˜¯ <code>object</code> çš„æ„æ€ï¼šå¯¹è±¡ã€‚</p>
<p>åœ¨ä»£ç ä¸­å¦‚æœè¦ä½¿ç”¨è¿™ä¸ªå¯¹è±¡ï¼Œç›´æ¥é€šè¿‡å®ƒçš„ç±»åå°±å¯ä»¥è®¿é—®ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">Sample.name</span><br><span class="line"><span class="comment">//è¿™ä¸å°±æ˜¯å•ä¾‹ä¹ˆï¼Œæ‰€ä»¥åœ¨ Kotlin ä¸­åˆ›å»ºå•ä¾‹ä¸ç”¨åƒ Java ä¸­é‚£ä¹ˆå¤æ‚ï¼Œåªéœ€è¦æŠŠ class æ¢æˆ object å°±å¯ä»¥äº†ã€‚</span></span><br></pre></td></tr></table></figure>

<p>è¿™ç§é€šè¿‡ <code>object</code> å®ç°çš„å•ä¾‹æ˜¯ä¸€ä¸ªé¥¿æ±‰å¼çš„å•ä¾‹ï¼Œå¹¶ä¸”å®ç°äº†çº¿ç¨‹å®‰å…¨ã€‚</p>
</li>
</ol>
<pre><code>**ç»§æ‰¿ç±»å’Œå®ç°æ¥å£**

Kotlin ä¸­ä¸ä»…ç±»å¯ä»¥ç»§æ‰¿åˆ«çš„ç±»ï¼Œå¯ä»¥å®ç°æ¥å£ï¼Œ`object` ä¹Ÿå¯ä»¥ï¼š

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">open</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">open</span> <span class="function"><span class="keyword">fun</span> <span class="title">method</span><span class="params">()</span></span> &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">interfaceMethod</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line">  ğŸ‘‡      ğŸ‘‡   ğŸ‘‡</span><br><span class="line"><span class="keyword">object</span> C : A(), B &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">method</span><span class="params">()</span></span> &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">interfaceMethod</span><span class="params">()</span></span> &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

**åŒ¿åç±»**

Kotlin è¿˜å¯ä»¥åˆ›å»º Java ä¸­çš„åŒ¿åç±»ï¼Œåªæ˜¯å†™æ³•ä¸Šæœ‰ç‚¹ä¸åŒï¼š

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸                                              ğŸ‘‡ </span><br><span class="line">ViewPager.SimpleOnPageChangeListener listener = <span class="keyword">new</span> ViewPager.SimpleOnPageChangeListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span> <span class="comment">// ğŸ‘ˆ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageSelected</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// override</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸          </span><br><span class="line"><span class="keyword">val</span> listener = <span class="keyword">object</span>: ViewPager.SimpleOnPageChangeListener() &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onPageSelected</span><span class="params">(position: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">        <span class="comment">// override</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

- Java ä¸­ `new` ç”¨æ¥åˆ›å»ºä¸€ä¸ªåŒ¿åç±»çš„å¯¹è±¡
- Kotlin ä¸­ `object:` ä¹Ÿå¯ä»¥ç”¨æ¥åˆ›å»ºåŒ¿åç±»çš„å¯¹è±¡

è¿™é‡Œçš„ `new` å’Œ `object:` ä¿®é¥°çš„éƒ½æ˜¯æ¥å£æˆ–è€…æŠ½è±¡ç±»ã€‚</code></pre><ol start="17">
<li><h4 id="companion-object"><a href="#companion-object" class="headerlink" title="companion object"></a>companion object</h4><p>ç”¨ <code>object</code> ä¿®é¥°çš„å¯¹è±¡ä¸­çš„å˜é‡å’Œå‡½æ•°éƒ½æ˜¯é™æ€çš„ï¼Œä½†æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬åªæƒ³è®©ç±»ä¸­çš„ä¸€éƒ¨åˆ†å‡½æ•°å’Œå˜é‡æ˜¯é™æ€çš„è¯¥æ€ä¹ˆåšå‘¢ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">          ğŸ‘‡</span><br><span class="line">    <span class="keyword">object</span> B &#123;</span><br><span class="line">        <span class="keyword">var</span> c: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šï¼Œå¯ä»¥åœ¨ç±»ä¸­åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ŒæŠŠéœ€è¦é™æ€çš„å˜é‡æˆ–å‡½æ•°æ”¾åœ¨å†…éƒ¨å¯¹è±¡ B ä¸­ï¼Œå¤–éƒ¨å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼è°ƒç”¨è¯¥é™æ€å˜é‡ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">A.B.c</span><br><span class="line">  ğŸ‘†</span><br></pre></td></tr></table></figure>

<p>ç±»ä¸­åµŒå¥—çš„å¯¹è±¡å¯ä»¥ç”¨ <code>companion</code> ä¿®é¥°ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">       ğŸ‘‡</span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> B &#123;</span><br><span class="line">        <span class="keyword">var</span> c: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>companion</code> å¯ä»¥ç†è§£ä¸ºä¼´éšã€ä¼´ç”Ÿï¼Œè¡¨ç¤ºä¿®é¥°çš„å¯¹è±¡å’Œå¤–éƒ¨ç±»ç»‘å®šã€‚</p>
<p>ä½†è¿™é‡Œæœ‰ä¸€ä¸ªå°é™åˆ¶ï¼šä¸€ä¸ªç±»ä¸­æœ€å¤šåªå¯ä»¥æœ‰ä¸€ä¸ªä¼´ç”Ÿå¯¹è±¡ï¼Œä½†å¯ä»¥æœ‰å¤šä¸ªåµŒå¥—å¯¹è±¡ã€‚</p>
<p>è¿™æ ·çš„å¥½å¤„æ˜¯è°ƒç”¨çš„æ—¶å€™å¯ä»¥çœæ‰å¯¹è±¡åï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">A.c <span class="comment">// ğŸ‘ˆ B æ²¡äº†</span></span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥ï¼Œå½“æœ‰ <code>companion</code> ä¿®é¥°æ—¶ï¼Œå¯¹è±¡çš„åå­—ä¹Ÿå¯ä»¥çœç•¥æ‰ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">                <span class="comment">// ğŸ‘‡ B æ²¡äº†</span></span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> c: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>é™æ€åˆå§‹åŒ–</strong></p>
<p>Java ä¸­çš„é™æ€å˜é‡å’Œæ–¹æ³•ï¼Œåœ¨ Kotlin ä¸­éƒ½æ”¾åœ¨äº† <code>companion object</code> ä¸­ã€‚å› æ­¤ Java ä¸­çš„é™æ€åˆå§‹åŒ–åœ¨ Kotlin ä¸­è‡ªç„¶ä¹Ÿæ˜¯æ”¾åœ¨ <code>companion object</code> ä¸­çš„ï¼Œåƒç±»çš„åˆå§‹åŒ–ä»£ç ä¸€æ ·ï¼Œç”± <code>init</code> å’Œä¸€å¯¹å¤§æ‹¬å·è¡¨ç¤ºï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sample</span> </span>&#123;</span><br><span class="line">       ğŸ‘‡</span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">         ğŸ‘‡</span><br><span class="line">        <span class="keyword">init</span> &#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>top-level property / function å£°æ˜</strong></p>
<p>é™¤äº†é™æ€å‡½æ•°è¿™ç§ç®€ä¾¿çš„è°ƒç”¨æ–¹å¼ï¼ŒKotlin è¿˜æœ‰æ›´æ–¹ä¾¿çš„ä¸œè¥¿ï¼šã€Œ<code>top-level declaration</code> é¡¶å±‚å£°æ˜ã€ã€‚å…¶å®å°±æ˜¯æŠŠå±æ€§å’Œå‡½æ•°çš„å£°æ˜ä¸å†™åœ¨ <code>class</code> é‡Œé¢ï¼Œè¿™ä¸ªåœ¨ Kotlin é‡Œæ˜¯å…è®¸çš„ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">package</span> com.hencoder.plus</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ‘‡ å±äº packageï¼Œä¸åœ¨ class/object å†…</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">topLevelFuncion</span><span class="params">()</span></span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å†™çš„å±æ€§å’Œå‡½æ•°ï¼Œä¸å±äºä»»ä½• <code>class</code>ï¼Œè€Œæ˜¯ç›´æ¥å±äº <code>package</code>ï¼Œå®ƒå’Œé™æ€å˜é‡ã€é™æ€å‡½æ•°ä¸€æ ·æ˜¯å…¨å±€çš„ï¼Œä½†ç”¨èµ·æ¥æ›´æ–¹ä¾¿ï¼šä½ åœ¨å…¶å®ƒåœ°æ–¹ç”¨çš„æ—¶å€™ï¼Œå°±è¿ç±»åéƒ½ä¸ç”¨å†™ï¼š</p>
<p><br class="Apple-interchange-newline"><div></div></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">import</span> com.hencoder.plus.topLevelFunction <span class="comment">// ğŸ‘ˆ ç›´æ¥ import å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">topLevelFunction()</span><br></pre></td></tr></table></figure>

<ul>
<li><p>å‘½åç›¸åŒçš„é¡¶çº§å‡½æ•°</p>
<blockquote>
<p>é¡¶çº§å‡½æ•°ä¸å†™åœ¨ç±»ä¸­å¯èƒ½æœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœåœ¨ä¸åŒæ–‡ä»¶ä¸­å£°æ˜å‘½åç›¸åŒçš„å‡½æ•°ï¼Œä½¿ç”¨çš„æ—¶å€™ä¼šä¸ä¼šæ··æ·†ï¼Ÿ</p>
<p>ä¸ä¼šï¼Œå½“å‡ºç°ä¸¤ä¸ªåŒåé¡¶çº§å‡½æ•°æ—¶ï¼ŒIDE ä¼šè‡ªåŠ¨åŠ ä¸ŠåŒ…å‰ç¼€æ¥åŒºåˆ†ï¼Œè¿™ä¹Ÿå°è¯äº†ã€Œé¡¶çº§å‡½æ•°å±äºåŒ…ã€çš„ç‰¹æ€§ã€‚</p>
</blockquote>
</li>
</ul>
<p>åœ¨ <code>object</code>ã€<code>companion object</code> å’Œ top-level ä¸­è¯¥é€‰æ‹©å“ªä¸€ä¸ªå‘¢ï¼Ÿç®€å•æ¥è¯´æŒ‰ç…§ä¸‹é¢è¿™ä¸¤ä¸ªåŸåˆ™åˆ¤æ–­ï¼š</p>
<ul>
<li>å¦‚æœæƒ³å†™å·¥å…·ç±»çš„åŠŸèƒ½ï¼Œç›´æ¥åˆ›å»ºæ–‡ä»¶ï¼Œå†™ top-levelã€Œé¡¶å±‚ã€å‡½æ•°ã€‚</li>
<li>å¦‚æœéœ€è¦ç»§æ‰¿åˆ«çš„ç±»æˆ–è€…å®ç°æ¥å£ï¼Œå°±ç”¨ <code>object</code> æˆ– <code>companion object</code>ã€‚</li>
</ul>
</li>
</ol>
<ol start="18">
<li><h4 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h4><p>Java ä¸­å£°æ˜å¸¸é‡ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sample</span> </span>&#123;</span><br><span class="line">            ğŸ‘‡     ğŸ‘‡</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> CONST_NUMBER = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Kotlin ä¸­å£°æ˜å¸¸é‡ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">         ğŸ‘‡                  <span class="comment">// ğŸ‘‡</span></span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">val</span> CONST_NUMBER = <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">val</span> CONST_SECOND_NUMBER = <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>å‘ç°ä¸åŒç‚¹æœ‰ï¼š</p>
<ul>
<li><p>Kotlin çš„å¸¸é‡å¿…é¡»å£°æ˜åœ¨å¯¹è±¡ï¼ˆåŒ…æ‹¬ä¼´ç”Ÿå¯¹è±¡ï¼‰æˆ–è€…ã€Œtop-level é¡¶å±‚ã€ä¸­ï¼Œå› ä¸ºå¸¸é‡æ˜¯é™æ€çš„ã€‚</p>
</li>
<li><p>Kotlin æ–°å¢äº†ä¿®é¥°å¸¸é‡çš„ <code>const</code> å…³é”®å­—ã€‚</p>
</li>
<li><p>Kotlin ä¸­åªæœ‰åŸºæœ¬ç±»å‹å’Œ String ç±»å‹å¯ä»¥å£°æ˜æˆå¸¸é‡ã€‚</p>
<blockquote>
<p>åŸå› æ˜¯ Kotlin ä¸­çš„å¸¸é‡æŒ‡çš„æ˜¯ ã€Œcompile-time constant ç¼–è¯‘æ—¶å¸¸é‡ã€ï¼Œå®ƒçš„æ„æ€æ˜¯ã€Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™å°±çŸ¥é“è¿™ä¸ªä¸œè¥¿åœ¨æ¯ä¸ªè°ƒç”¨å¤„çš„å®é™…å€¼ã€ï¼Œå› æ­¤å¯ä»¥åœ¨ç¼–è¯‘æ—¶ç›´æ¥æŠŠè¿™ä¸ªå€¼ç¡¬ç¼–ç åˆ°ä»£ç é‡Œä½¿ç”¨çš„åœ°æ–¹ã€‚</p>
<p>è€ŒéåŸºæœ¬å’Œ String ç±»å‹çš„å˜é‡ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•æˆ–å˜é‡æ”¹å˜å¯¹è±¡å†…éƒ¨çš„å€¼ï¼Œè¿™æ ·è¿™ä¸ªå˜é‡å°±ä¸æ˜¯å¸¸é‡äº†ï¼Œ</p>
<p>æ¥çœ‹ä¸€ä¸ª Java çš„ä¾‹å­ï¼Œæ¯”å¦‚ä¸€ä¸ª User ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt; â˜•ï¸</span><br><span class="line">&gt; <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">&gt;  <span class="keyword">int</span> id; <span class="comment">// ğŸ‘ˆ å¯ä¿®æ”¹</span></span><br><span class="line">&gt;  String name; <span class="comment">// ğŸ‘ˆ å¯ä¿®æ”¹</span></span><br><span class="line">&gt;  <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(<span class="keyword">int</span> id, String name)</span> </span>&#123;</span><br><span class="line">&gt;      <span class="keyword">this</span>.id = id;</span><br><span class="line">&gt;      <span class="keyword">this</span>.name = name;</span><br><span class="line">&gt;  &#125;</span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt; </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>åœ¨ä½¿ç”¨çš„åœ°æ–¹å£°æ˜ä¸€ä¸ª <code>static final</code> çš„ User å®ä¾‹ <code>user</code>ï¼Œå®ƒæ˜¯ä¸èƒ½äºŒæ¬¡èµ‹å€¼çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; â˜•ï¸</span><br><span class="line">&gt; <span class="keyword">static</span> <span class="keyword">final</span> User user = <span class="keyword">new</span> User(<span class="number">123</span>, <span class="string">"Zhangsan"</span>);</span><br><span class="line">&gt; ğŸ‘†    ğŸ‘†</span><br><span class="line">&gt; </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>ä½†æ˜¯å¯ä»¥é€šè¿‡è®¿é—®è¿™ä¸ª <code>user</code> å®ä¾‹çš„æˆå‘˜å˜é‡æ”¹å˜å®ƒçš„å€¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; â˜•ï¸</span><br><span class="line">&gt; user.name = <span class="string">"Lisi"</span>;</span><br><span class="line">&gt;    ğŸ‘†</span><br><span class="line">&gt; </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>æ‰€ä»¥ Java ä¸­çš„å¸¸é‡å¯ä»¥è®¤ä¸ºæ˜¯ã€Œä¼ªå¸¸é‡ã€ï¼Œå› ä¸ºå¯ä»¥é€šè¿‡ä¸Šé¢è¿™ç§æ–¹å¼æ”¹å˜å®ƒå†…éƒ¨çš„å€¼ã€‚è€Œ Kotlin çš„å¸¸é‡å› ä¸ºé™åˆ¶ç±»å‹å¿…é¡»æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ‰€ä»¥ä¸å­˜åœ¨è¿™ç§é—®é¢˜ï¼Œæ›´ç¬¦åˆå¸¸é‡çš„å®šä¹‰ã€‚</p>
</blockquote>
</li>
</ul>
</li>
<li><h4 id="æ•°ç»„å’Œé›†åˆ"><a href="#æ•°ç»„å’Œé›†åˆ" class="headerlink" title="æ•°ç»„å’Œé›†åˆ"></a>æ•°ç»„å’Œé›†åˆ</h4><p>å£°æ˜ä¸€ä¸ª String æ•°ç»„ï¼š</p>
<p>java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String[] strs = &#123;<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>&#125;;</span><br></pre></td></tr></table></figure>

<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> strs: Array&lt;String&gt; = arrayOf(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>å–å€¼å’Œä¿®æ”¹</p>
<p>Kotlin ä¸­è·å–æˆ–è€…è®¾ç½®æ•°ç»„å…ƒç´ å’Œ Java ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·åŠ ä¸‹æ ‡çš„æ–¹å¼ç´¢å¼•ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">println(strs[<span class="number">0</span>])</span><br><span class="line">   ğŸ‘‡      ğŸ‘†</span><br><span class="line">strs[<span class="number">1</span>] = <span class="string">"B"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸æ”¯æŒåå˜</p>
<p>Kotlin çš„æ•°ç»„ç¼–è¯‘æˆå­—èŠ‚ç æ—¶ä½¿ç”¨çš„ä»ç„¶æ˜¯ Java çš„æ•°ç»„ï¼Œä½†åœ¨è¯­è¨€å±‚é¢æ˜¯æ³›å‹å®ç°ï¼Œè¿™æ ·ä¼šå¤±å»åå˜ (covariance) ç‰¹æ€§ï¼Œå°±æ˜¯å­ç±»æ•°ç»„å¯¹è±¡ä¸èƒ½èµ‹å€¼ç»™çˆ¶ç±»çš„æ•°ç»„å˜é‡ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> strs: Array&lt;String&gt; = arrayOf(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)</span><br><span class="line">                  ğŸ‘†</span><br><span class="line"><span class="keyword">val</span> anys: Array&lt;Any&gt; = strs <span class="comment">// compile-error: Type mismatch</span></span><br><span class="line">                ğŸ‘†</span><br></pre></td></tr></table></figure>

<p>Java ä¸­å¯ä»¥</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line">String[] strs = &#123;<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>&#125;;</span><br><span class="line">  ğŸ‘†</span><br><span class="line">Object[] objs = strs; <span class="comment">// success</span></span><br><span class="line">  ğŸ‘†</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><h4 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h4><p>Kotlin å’Œ Java ä¸€æ ·æœ‰ä¸‰ç§é›†åˆç±»å‹ï¼šListã€Set å’Œ Mapï¼Œå®ƒä»¬çš„å«ä¹‰åˆ†åˆ«å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>List</code> ä»¥å›ºå®šé¡ºåºå­˜å‚¨ä¸€ç»„å…ƒç´ ï¼Œå…ƒç´ å¯ä»¥é‡å¤ã€‚</li>
<li><code>Set</code> å­˜å‚¨ä¸€ç»„äº’ä¸ç›¸ç­‰çš„å…ƒç´ ï¼Œé€šå¸¸æ²¡æœ‰å›ºå®šé¡ºåºã€‚</li>
<li><code>Map</code> å­˜å‚¨ é”®-å€¼ å¯¹çš„æ•°æ®é›†åˆï¼Œé”®äº’ä¸ç›¸ç­‰ï¼Œä½†ä¸åŒçš„é”®å¯ä»¥å¯¹åº”ç›¸åŒçš„å€¼ã€‚</li>
</ul>
<p>Java ä¸­åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼š </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line">List&lt;String&gt; strList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">strList.add(<span class="string">"a"</span>);</span><br><span class="line">strList.add(<span class="string">"b"</span>);</span><br><span class="line">strList.add(<span class="string">"c"</span>); <span class="comment">// ğŸ‘ˆ æ·»åŠ å…ƒç´ ç¹ç</span></span><br></pre></td></tr></table></figure>

<p>Kotlin ä¸­åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸            </span><br><span class="line"><span class="keyword">val</span> strList = listOf(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)</span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆèƒ½çœ‹åˆ°çš„æ˜¯ Kotlin ä¸­åˆ›å»ºä¸€ä¸ª <code>List</code> ç‰¹åˆ«çš„ç®€å•ï¼Œæœ‰ç‚¹åƒåˆ›å»ºæ•°ç»„çš„ä»£ç ã€‚è€Œä¸” Kotlin ä¸­çš„ <code>List</code> å¤šäº†ä¸€ä¸ªç‰¹æ€§ï¼šæ”¯æŒ covariantï¼ˆåå˜ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥æŠŠå­ç±»çš„ <code>List</code> èµ‹å€¼ç»™çˆ¶ç±»çš„ <code>List</code> å˜é‡ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> strs: List&lt;String&gt; = listOf(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)</span><br><span class="line">                ğŸ‘†</span><br><span class="line"><span class="keyword">val</span> anys: List&lt;Any&gt; = strs <span class="comment">// success</span></span><br><span class="line">               ğŸ‘†</span><br></pre></td></tr></table></figure>

<p><strong>å’Œæ•°ç»„çš„åŒºåˆ«:</strong></p>
<p>Kotlin ä¸­æ•°ç»„å’Œ MutableList çš„ API æ˜¯éå¸¸åƒçš„ï¼Œä¸»è¦çš„åŒºåˆ«æ˜¯æ•°ç»„çš„å…ƒç´ ä¸ªæ•°ä¸èƒ½å˜ã€‚é‚£åœ¨ä»€ä¹ˆæ—¶å€™ç”¨æ•°ç»„å‘¢ï¼Ÿ</p>
<ul>
<li>è¿™ä¸ªé—®é¢˜åœ¨ Java ä¸­å°±å­˜åœ¨äº†ï¼Œæ•°ç»„å’Œ <code>List</code> çš„åŠŸèƒ½ç±»ä¼¼ï¼Œ<code>List</code> çš„åŠŸèƒ½æ›´å¤šä¸€äº›ï¼Œç›´è§‰ä¸Šåº”è¯¥ç”¨ <code>List</code> ã€‚ä½†æ•°ç»„ä¹Ÿä¸æ˜¯æ²¡æœ‰ä¼˜åŠ¿ï¼ŒåŸºæœ¬ç±»å‹ (<code>int[]</code>ã€<code>float[]</code>) çš„æ•°ç»„ä¸ç”¨è‡ªåŠ¨è£…ç®±ï¼Œæ€§èƒ½å¥½ä¸€ç‚¹ã€‚</li>
<li>åœ¨ Kotlin ä¸­ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œåœ¨ä¸€äº›æ€§èƒ½éœ€æ±‚æ¯”è¾ƒè‹›åˆ»çš„åœºæ™¯ï¼Œå¹¶ä¸”å…ƒç´ ç±»å‹æ˜¯åŸºæœ¬ç±»å‹æ—¶ï¼Œç”¨æ•°ç»„å¥½ä¸€ç‚¹ã€‚ä¸è¿‡è¿™é‡Œè¦æ³¨æ„ä¸€ç‚¹ï¼ŒKotlin ä¸­è¦ç”¨ä¸“é—¨çš„åŸºæœ¬ç±»å‹æ•°ç»„ç±» (<code>IntArray</code> <code>FloatArray</code> <code>LongArray</code>) æ‰å¯ä»¥å…äºè£…ç®±ã€‚ä¹Ÿå°±æ˜¯è¯´å…ƒç´ ä¸æ˜¯åŸºæœ¬ç±»å‹æ—¶ï¼Œç›¸æ¯” <code>Array</code>ï¼Œç”¨ <code>List</code> æ›´æ–¹ä¾¿äº›ã€‚</li>
</ul>
<p>Java ä¸­åˆ›å»ºä¸€ä¸ª <code>Set</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line">Set&lt;String&gt; strSet = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">strSet.add(<span class="string">"a"</span>);</span><br><span class="line">strSet.add(<span class="string">"b"</span>);</span><br><span class="line">strSet.add(<span class="string">"c"</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Kotlin ä¸­åˆ›å»ºç›¸åŒçš„ <code>Set</code>    </p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> strSet = setOf(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>Java ä¸­åˆ›å»ºä¸€ä¸ª <code>Map</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line">Map&lt;String, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">map.put(<span class="string">"key1"</span>, <span class="number">1</span>);</span><br><span class="line">map.put(<span class="string">"key2"</span>, <span class="number">2</span>);</span><br><span class="line">map.put(<span class="string">"key3"</span>, <span class="number">3</span>);</span><br><span class="line">map.put(<span class="string">"key4"</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<p>Kotlin ä¸­åˆ›å»ºä¸€ä¸ª <code>Map</code>ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸         </span><br><span class="line"><span class="keyword">val</span> map = mapOf(<span class="string">"key1"</span> to <span class="number">1</span>, <span class="string">"key2"</span> to <span class="number">2</span>, <span class="string">"key3"</span> to <span class="number">3</span>, <span class="string">"key4"</span> to <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>Kotlin ä¸­çš„ Map é™¤äº†å’Œ Java ä¸€æ ·å¯ä»¥ä½¿ç”¨ <code>get()</code> æ ¹æ®é”®è·å–å¯¹åº”çš„å€¼ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·çš„æ–¹å¼è·å–ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">                 ğŸ‘‡</span><br><span class="line"><span class="keyword">val</span> value1 = map.<span class="keyword">get</span>(<span class="string">"key1"</span>)</span><br><span class="line">               ğŸ‘‡</span><br><span class="line"><span class="keyword">val</span> value2 = map[<span class="string">"key2"</span>]</span><br></pre></td></tr></table></figure>

<p>Kotlin ä¸­ä¹Ÿå¯ä»¥ç”¨æ–¹æ‹¬å·çš„æ–¹å¼æ”¹å˜ <code>Map</code> ä¸­é”®å¯¹åº”çš„å€¼ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸       </span><br><span class="line">              ğŸ‘‡</span><br><span class="line"><span class="keyword">val</span> map = mutableMapOf(<span class="string">"key1"</span> to <span class="number">1</span>, <span class="string">"key2"</span> to <span class="number">2</span>)</span><br><span class="line">    ğŸ‘‡</span><br><span class="line">map.put(<span class="string">"key1"</span>, <span class="number">2</span>)</span><br><span class="line">   ğŸ‘‡</span><br><span class="line">map[<span class="string">"key1"</span>] = <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p><strong>å¯å˜é›†åˆ/ä¸å¯å˜é›†åˆ</strong></p>
<p>Kotlin ä¸­é›†åˆåˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šåªè¯»çš„å’Œå¯å˜çš„ã€‚è¿™é‡Œçš„åªè¯»æœ‰ä¸¤å±‚æ„æ€ï¼š</p>
<ul>
<li>é›†åˆçš„ size ä¸å¯å˜</li>
<li>é›†åˆä¸­çš„å…ƒç´ å€¼ä¸å¯å˜</li>
</ul>
<p>ä»¥ä¸‹æ˜¯ä¸‰ç§é›†åˆç±»å‹åˆ›å»ºä¸å¯å˜å’Œå¯å˜å®ä¾‹çš„ä¾‹å­ï¼š</p>
<ul>
<li><code>listOf()</code> åˆ›å»ºä¸å¯å˜çš„ <code>List</code>ï¼Œ<code>mutableListOf()</code> åˆ›å»ºå¯å˜çš„ <code>List</code>ã€‚</li>
<li><code>setOf()</code> åˆ›å»ºä¸å¯å˜çš„ <code>Set</code>ï¼Œ<code>mutableSetOf()</code> åˆ›å»ºå¯å˜çš„ <code>Set</code>ã€‚</li>
<li><code>mapOf()</code> åˆ›å»ºä¸å¯å˜çš„ <code>Map</code>ï¼Œ<code>mutableMapOf()</code> åˆ›å»ºå¯å˜çš„ <code>Map</code>ã€‚</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ <code>mutable</code> å‰ç¼€çš„å‡½æ•°åˆ›å»ºçš„æ˜¯å¯å˜çš„é›†åˆï¼Œæ²¡æœ‰ <code>mutbale</code> å‰ç¼€çš„åˆ›å»ºçš„æ˜¯ä¸å¯å˜çš„é›†åˆï¼Œä¸è¿‡ä¸å¯å˜çš„å¯ä»¥é€šè¿‡ <code>toMutable*()</code> ç³»å‡½æ•°è½¬æ¢æˆå¯å˜çš„é›†åˆï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> strList = listOf(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)</span><br><span class="line">            ğŸ‘‡</span><br><span class="line">strList.toMutableList()</span><br><span class="line"><span class="keyword">val</span> strSet = setOf(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)</span><br><span class="line">            ğŸ‘‡</span><br><span class="line">strSet.toMutableSet()</span><br><span class="line"><span class="keyword">val</span> map = mapOf(<span class="string">"key1"</span> to <span class="number">1</span>, <span class="string">"key2"</span> to <span class="number">2</span>, <span class="string">"key3"</span> to <span class="number">3</span>, <span class="string">"key4"</span> to <span class="number">3</span>)</span><br><span class="line">         ğŸ‘‡</span><br><span class="line">map.toMutableMap()</span><br></pre></td></tr></table></figure>

<p>ç„¶åå°±å¯ä»¥å¯¹é›†åˆè¿›è¡Œä¿®æ”¹äº†ï¼Œè¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ä¸‹ï¼š</p>
<ul>
<li><code>toMutable*()</code> è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°å»ºçš„é›†åˆï¼ŒåŸæœ‰çš„é›†åˆè¿˜æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥åªèƒ½å¯¹å‡½æ•°è¿”å›çš„é›†åˆä¿®æ”¹ã€‚</li>
</ul>
</li>
<li><h4 id="Sequence"><a href="#Sequence" class="headerlink" title="Sequence"></a>Sequence</h4><p>é™¤äº†é›†åˆ Kotlin è¿˜å¼•å…¥äº†ä¸€ä¸ªæ–°çš„å®¹å™¨ç±»å‹ <code>Sequence</code>ï¼Œå®ƒå’Œ <code>Iterable</code> ä¸€æ ·ç”¨æ¥éå†ä¸€ç»„æ•°æ®å¹¶å¯ä»¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œç‰¹å®šçš„å¤„ç†ã€‚</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">sequenceOf(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)</span><br><span class="line"></span><br><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> list = listOf(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)</span><br><span class="line">list.asSequence()</span><br><span class="line"></span><br><span class="line">ğŸï¸                          <span class="comment">// ğŸ‘‡ ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="keyword">val</span> sequence = generateSequence(<span class="number">0</span>) &#123; it + <span class="number">1</span> &#125;</span><br><span class="line">                                  <span class="comment">// ğŸ‘† lambda è¡¨è¾¾å¼ï¼Œè´Ÿè´£ç”Ÿæˆç¬¬äºŒä¸ªåŠä»¥åçš„å…ƒç´ ï¼Œit è¡¨ç¤ºå‰ä¸€ä¸ªå…ƒç´ </span></span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="å¯è§æ€§ä¿®é¥°ç¬¦"><a href="#å¯è§æ€§ä¿®é¥°ç¬¦" class="headerlink" title="å¯è§æ€§ä¿®é¥°ç¬¦"></a>å¯è§æ€§ä¿®é¥°ç¬¦</h4><p>Kotlin ä¸­æœ‰å››ç§å¯è§æ€§ä¿®é¥°ç¬¦ï¼š</p>
<ul>
<li><code>public</code>ï¼šå…¬å¼€ï¼Œå¯è§æ€§æœ€å¤§ï¼Œå“ªé‡Œéƒ½å¯ä»¥å¼•ç”¨ã€‚</li>
<li><code>private</code>ï¼šç§æœ‰ï¼Œå¯è§æ€§æœ€å°ï¼Œæ ¹æ®å£°æ˜ä½ç½®ä¸åŒå¯åˆ†ä¸ºç±»ä¸­å¯è§å’Œæ–‡ä»¶ä¸­å¯è§ã€‚</li>
<li><code>protected</code>ï¼šä¿æŠ¤ï¼Œç›¸å½“äº <code>private</code> + å­ç±»å¯è§ã€‚</li>
<li><code>internal</code>ï¼šå†…éƒ¨ï¼Œä»…å¯¹ module å†…å¯è§ã€‚</li>
</ul>
<h4 id="public"><a href="#public" class="headerlink" title="public"></a><code>public</code></h4><p>Java ä¸­æ²¡å†™å¯è§æ€§ä¿®é¥°ç¬¦æ—¶ï¼Œè¡¨ç¤ºåŒ…å†…å¯è§ï¼Œåªæœ‰åœ¨åŒä¸€ä¸ª <code>package</code> å†…å¯ä»¥å¼•ç”¨ï¼Œ<code>package</code> å¤–å¦‚æœè¦å¼•ç”¨ï¼Œéœ€è¦åœ¨ <code>class</code> å‰åŠ ä¸Šå¯è§æ€§ä¿®é¥°ç¬¦ <code>public</code> è¡¨ç¤ºå…¬å¼€ã€‚</p>
<p>Kotlin ä¸­å¦‚æœä¸å†™å¯è§æ€§ä¿®é¥°ç¬¦ï¼Œå°±è¡¨ç¤ºå…¬å¼€ï¼Œå’Œ Java ä¸­ <code>public</code> ä¿®é¥°ç¬¦å…·æœ‰ç›¸åŒæ•ˆæœã€‚åœ¨ Kotlin ä¸­ <code>public</code> ä¿®é¥°ç¬¦ã€Œå¯ä»¥åŠ ï¼Œä½†æ²¡å¿…è¦ã€ã€‚</p>
<h4 id="hide"><a href="#hide" class="headerlink" title="@hide"></a><code>@hide</code></h4><p>åœ¨ Android çš„å®˜æ–¹ sdk ä¸­ï¼Œæœ‰ä¸€äº›æ–¹æ³•åªæƒ³å¯¹ sdk å†…å¯è§ï¼Œä¸æƒ³å¼€æ”¾ç»™ç”¨æˆ·ä½¿ç”¨ï¼ˆå› ä¸ºè¿™äº›æ–¹æ³•ä¸å¤ªç¨³å®šï¼Œåœ¨åç»­ç‰ˆæœ¬ä¸­å¾ˆæœ‰å¯èƒ½ä¼šä¿®æ”¹æˆ–åˆ æ‰ï¼‰ã€‚ä¸ºäº†å®ç°è¿™ä¸ªç‰¹æ€§ï¼Œä¼šåœ¨æ–¹æ³•çš„æ³¨é‡Šä¸­æ·»åŠ ä¸€ä¸ª Javadoc æ–¹æ³• <code>@hide</code>ï¼Œç”¨æ¥é™åˆ¶å®¢æˆ·ç«¯è®¿é—®ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@hide</span> ğŸ‘ˆ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hideMethod</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†è¿™ç§é™åˆ¶ä¸å¤ªä¸¥æ ¼ï¼Œå¯ä»¥é€šè¿‡åå°„è®¿é—®åˆ°é™åˆ¶çš„æ–¹æ³•ã€‚é’ˆå¯¹è¿™ä¸ªæƒ…å†µï¼ŒKotlin å¼•è¿›äº†ä¸€ä¸ªæ›´ä¸ºä¸¥æ ¼çš„å¯è§æ€§ä¿®é¥°ç¬¦ï¼š<code>internal</code>ã€‚</p>
<h4 id="internal"><a href="#internal" class="headerlink" title="internal"></a><code>internal</code></h4><p><code>internal</code> è¡¨ç¤ºä¿®é¥°çš„ç±»ã€å‡½æ•°ä»…å¯¹ module å†…å¯è§ï¼Œè¿™é‡Œçš„ module å…·ä½“æŒ‡çš„æ˜¯ä¸€ç»„å…±åŒç¼–è¯‘çš„ kotlin æ–‡ä»¶ï¼Œå¸¸è§çš„å½¢å¼æœ‰ï¼š</p>
<ul>
<li>Android Studio é‡Œçš„ module</li>
<li>Maven project</li>
</ul>
<blockquote>
<p>æˆ‘ä»¬å¸¸è§çš„æ˜¯ Android Studio ä¸­çš„ module è¿™ç§æƒ…å†µï¼ŒMaven project ä»…ä½œäº†è§£å°±å¥½ï¼Œä¸ç”¨ç»†ç©¶ã€‚</p>
</blockquote>
<p><code>internal</code> åœ¨å†™ä¸€ä¸ª library module æ—¶éå¸¸æœ‰ç”¨ï¼Œå½“éœ€è¦åˆ›å»ºä¸€ä¸ªå‡½æ•°ä»…å¼€æ”¾ç»™ module å†…éƒ¨ä½¿ç”¨ï¼Œä¸æƒ³å¯¹ library çš„ä½¿ç”¨è€…å¯è§ï¼Œè¿™æ—¶å°±åº”è¯¥ç”¨ <code>internal</code> å¯è§æ€§ä¿®é¥°ç¬¦ã€‚</p>
<h4 id="protected"><a href="#protected" class="headerlink" title="protected"></a><code>protected</code></h4><ul>
<li>Java ä¸­ <code>protected</code> è¡¨ç¤ºåŒ…å†…å¯è§ + å­ç±»å¯è§ã€‚</li>
<li>Kotlin ä¸­ <code>protected</code> è¡¨ç¤º <code>private</code> + å­ç±»å¯è§ã€‚</li>
</ul>
<p>Kotlin ç›¸æ¯” Java <code>protected</code> çš„å¯è§èŒƒå›´æ”¶çª„äº†ï¼ŒåŸå› æ˜¯ Kotlin ä¸­ä¸å†æœ‰ã€ŒåŒ…å†…å¯è§ã€çš„æ¦‚å¿µäº†ï¼Œç›¸æ¯” Java çš„å¯è§æ€§ç€çœ¼äº <code>package</code>ï¼ŒKotlin æ›´å…³å¿ƒçš„æ˜¯ moduleã€‚</p>
<h4 id="private"><a href="#private" class="headerlink" title="private"></a><code>private</code></h4><ul>
<li>Java ä¸­çš„ <code>private</code> è¡¨ç¤ºç±»ä¸­å¯è§ï¼Œä½œä¸ºå†…éƒ¨ç±»æ—¶å¯¹å¤–éƒ¨ç±»ã€Œå¯è§ã€ã€‚</li>
<li>Kotlin ä¸­çš„ <code>private</code> è¡¨ç¤ºç±»ä¸­æˆ–æ‰€åœ¨æ–‡ä»¶å†…å¯è§ï¼Œä½œä¸ºå†…éƒ¨ç±»æ—¶å¯¹å¤–éƒ¨ç±»ã€Œä¸å¯è§ã€ã€‚</li>
</ul>
<p><code>private</code> ä¿®é¥°çš„å˜é‡ã€Œç±»ä¸­å¯è§ã€å’Œ ã€Œæ–‡ä»¶ä¸­å¯è§ã€:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> propertyInClass = <span class="number">1</span> <span class="comment">// ğŸ‘ˆ ä»… Sample ç±»ä¸­å¯è§</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">val</span> propertyInFile = <span class="string">"A string."</span> <span class="comment">// ğŸ‘ˆ èŒƒå›´æ›´å¤§ï¼Œæ•´ä¸ªæ–‡ä»¶å¯è§</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ Java ä¸­ï¼Œå¤–éƒ¨ç±»å¯ä»¥è®¿é—®å†…éƒ¨ç±»çš„ <code>private</code> å˜é‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Outter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Inner inner = <span class="keyword">new</span> Inner();</span><br><span class="line">                            ğŸ‘‡</span><br><span class="line">        <span class="keyword">int</span> result = inner.number * <span class="number">2</span>; <span class="comment">// success</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Inner</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> number = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ Kotlin ä¸­ï¼Œå¤–éƒ¨ç±»ä¸å¯ä»¥è®¿é—®å†…éƒ¨ç±»çš„ <code>private</code> å˜é‡ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">method</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> <span class="keyword">inner</span> = Inner()</span><br><span class="line">                            ğŸ‘‡</span><br><span class="line">        <span class="keyword">val</span> result = <span class="keyword">inner</span>.number * <span class="number">2</span> <span class="comment">// compile-error: Cannot access 'number': it is private in 'Inner'</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Inner</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">val</span> number = <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å¯ä»¥ä¿®é¥°ç±»å’Œæ¥å£</strong></p>
<ul>
<li><p>Java ä¸­ä¸€ä¸ªæ–‡ä»¶åªå…è®¸ä¸€ä¸ªå¤–éƒ¨ç±»ï¼Œæ‰€ä»¥ <code>class</code> å’Œ <code>interface</code> ä¸å…è®¸è®¾ç½®ä¸º <code>private</code>ï¼Œå› ä¸ºå£°æ˜ <code>private</code> åæ— æ³•è¢«å¤–éƒ¨ä½¿ç”¨ï¼Œè¿™æ ·å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚</p>
</li>
<li><p>Kotlin å…è®¸åŒä¸€ä¸ªæ–‡ä»¶å£°æ˜å¤šä¸ª <code>class</code> å’Œ top-level çš„å‡½æ•°å’Œå±æ€§ï¼Œæ‰€ä»¥ Kotlin ä¸­å…è®¸ç±»å’Œæ¥å£å£°æ˜ä¸º <code>private</code>ï¼Œå› ä¸ºåŒä¸ªæ–‡ä»¶ä¸­çš„å…¶å®ƒæˆå‘˜å¯ä»¥è®¿é—®ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸                   </span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Sample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">val</span> number = <span class="number">1</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">method</span><span class="params">()</span></span> &#123;</span><br><span class="line">        println(<span class="string">"Sample method()"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">            <span class="comment">// ğŸ‘‡ åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥å¯ä»¥è®¿é—®</span></span><br><span class="line"><span class="keyword">val</span> sample = Sample()</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><h3 id="æ„é€ å™¨"><a href="#æ„é€ å™¨" class="headerlink" title="æ„é€ å™¨"></a>æ„é€ å™¨</h3><h4 id="ä¸»æ„é€ å™¨"><a href="#ä¸»æ„é€ å™¨" class="headerlink" title="ä¸»æ„é€ å™¨"></a>ä¸»æ„é€ å™¨</h4><p>Kotlin ä¸­ constructor çš„å†™æ³•ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name: String</span><br><span class="line">    <span class="keyword">constructor</span>(name: String) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Kotlin ä¸­è¿˜æœ‰æ›´ç®€å•çš„æ–¹æ³•æ¥å†™æ„é€ å™¨</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">constructor</span></span>(name: String) &#123;</span><br><span class="line">    <span class="comment">//                  ğŸ‘‡ è¿™é‡Œä¸æ„é€ å™¨ä¸­çš„ name æ˜¯åŒä¸€ä¸ª</span></span><br><span class="line">    <span class="keyword">var</span> name: String = name</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>constructor</code> æ„é€ å™¨ç§»åˆ°äº†ç±»åä¹‹å</li>
<li>ç±»çš„å±æ€§ <code>name</code> å¯ä»¥å¼•ç”¨æ„é€ å™¨ä¸­çš„å‚æ•° <code>name</code></li>
</ul>
<p>è¿™ä¸ªå†™æ³•å«ã€Œä¸»æ„é€ å™¨ primary constructorã€ã€‚</p>
<p>åœ¨ Kotlin ä¸­ä¸€ä¸ªç±»æœ€å¤šåªèƒ½æœ‰ 1 ä¸ªä¸»æ„é€ å™¨ï¼ˆä¹Ÿå¯ä»¥æ²¡æœ‰ï¼‰ï¼Œè€Œæ¬¡æ„é€ å™¨æ˜¯æ²¡æœ‰ä¸ªæ•°é™åˆ¶ã€‚</p>
<p>ä¸»æ„é€ å™¨ä¸­çš„å‚æ•°é™¤äº†å¯ä»¥åœ¨ç±»çš„å±æ€§ä¸­ä½¿ç”¨ï¼Œè¿˜å¯ä»¥åœ¨ <code>init</code> ä»£ç å—ä¸­ä½¿ç”¨ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">constructor</span></span>(name: String) &#123;</span><br><span class="line">    <span class="keyword">var</span> name: String</span><br><span class="line">    <span class="keyword">init</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ <code>init</code> ä»£ç å—æ˜¯ç´§è·Ÿåœ¨ä¸»æ„é€ å™¨ä¹‹åæ‰§è¡Œçš„ï¼Œè¿™æ˜¯å› ä¸ºä¸»æ„é€ å™¨æœ¬èº«æ²¡æœ‰ä»£ç ä½“ï¼Œ<code>init</code> ä»£ç å—å°±å……å½“äº†ä¸»æ„é€ å™¨ä»£ç ä½“çš„åŠŸèƒ½ã€‚</p>
<p>å¦å¤–ï¼Œå¦‚æœç±»ä¸­æœ‰ä¸»æ„é€ å™¨ï¼Œé‚£ä¹ˆå…¶ä»–çš„æ¬¡æ„é€ å™¨éƒ½éœ€è¦é€šè¿‡ <code>this</code> å…³é”®å­—è°ƒç”¨ä¸»æ„é€ å™¨ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨æˆ–è€…é€šè¿‡åˆ«çš„æ¬¡æ„é€ å™¨é—´æ¥è°ƒç”¨ã€‚å¦‚æœä¸è°ƒç”¨ IDE å°±ä¼šæŠ¥é”™ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">constructor</span></span>(<span class="keyword">var</span> name: String) &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name: String, id: <span class="built_in">Int</span>) &#123;</span><br><span class="line">    <span class="comment">// ğŸ‘†è¿™æ ·å†™ä¼šæŠ¥é”™ï¼ŒPrimary constructor call expected</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºä»€ä¹ˆå½“ç±»ä¸­æœ‰ä¸»æ„é€ å™¨çš„æ—¶å€™å°±å¼ºåˆ¶è¦æ±‚æ¬¡æ„é€ å™¨è°ƒç”¨ä¸»æ„é€ å™¨å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬ä»ä¸»æ„é€ å™¨çš„ç‰¹æ€§å‡ºå‘ï¼Œä¸€æ—¦åœ¨ç±»ä¸­å£°æ˜äº†ä¸»æ„é€ å™¨ï¼Œå°±åŒ…å«ä¸¤ç‚¹ï¼š</p>
<ul>
<li>å¿…é¡»æ€§ï¼šåˆ›å»ºç±»çš„å¯¹è±¡æ—¶ï¼Œä¸ç®¡ä½¿ç”¨å“ªä¸ªæ„é€ å™¨ï¼Œéƒ½éœ€è¦ä¸»æ„é€ å™¨çš„å‚ä¸</li>
<li>ç¬¬ä¸€æ€§ï¼šåœ¨ç±»çš„åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆæ‰§è¡Œçš„å°±æ˜¯ä¸»æ„é€ å™¨</li>
</ul>
<p>å½“ä¸€ä¸ªç±»ä¸­åŒæ—¶æœ‰ä¸»æ„é€ å™¨ä¸æ¬¡æ„é€ å™¨çš„æ—¶å€™ï¼Œéœ€è¦è¿™æ ·å†™ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">constructor</span></span>(<span class="keyword">var</span> name: String) &#123;</span><br><span class="line">                                   <span class="comment">// ğŸ‘‡  ğŸ‘‡ ç›´æ¥è°ƒç”¨ä¸»æ„é€ å™¨</span></span><br><span class="line">    <span class="keyword">constructor</span>(name: String, id: <span class="built_in">Int</span>) : <span class="keyword">this</span>(name) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">                                                <span class="comment">// ğŸ‘‡ é€šè¿‡ä¸Šä¸€ä¸ªæ¬¡æ„é€ å™¨ï¼Œé—´æ¥è°ƒç”¨ä¸»æ„é€ å™¨</span></span><br><span class="line">    <span class="keyword">constructor</span>(name: String, id: <span class="built_in">Int</span>, age: <span class="built_in">Int</span>) : <span class="keyword">this</span>(name, id) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä½¿ç”¨æ¬¡æ„é€ å™¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œ<code>init</code> ä»£ç å—æ˜¯å…ˆäºæ¬¡æ„é€ å™¨æ‰§è¡Œçš„ã€‚å¦‚æœæŠŠä¸»æ„é€ å™¨çœ‹æˆèº«ä½“çš„å¤´éƒ¨ï¼Œé‚£ä¹ˆ <code>init</code> ä»£ç å—å°±æ˜¯é¢ˆéƒ¨ï¼Œæ¬¡æ„é€ å™¨å°±ç›¸å½“äºèº«ä½“å…¶ä½™éƒ¨åˆ†ã€‚</p>
<p>ç»†å¿ƒçš„ä½ ä¹Ÿè®¸ä¼šå‘ç°è¿™é‡Œåˆå‡ºç°äº† <code>:</code> ç¬¦å·ï¼Œå®ƒè¿˜åœ¨å…¶ä»–åœºåˆå‡ºç°è¿‡ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>å˜é‡çš„å£°æ˜ï¼š<code>var id: Int</code></li>
<li>ç±»çš„ç»§æ‰¿ï¼š<code>class MainActivity : AppCompatActivity() {}</code></li>
<li>æ¥å£çš„å®ç°ï¼š<code>class User : Impl {}</code></li>
<li>åŒ¿åç±»çš„åˆ›å»ºï¼š<code>object: ViewPager.SimpleOnPageChangeListener() {}</code></li>
<li>å‡½æ•°çš„è¿”å›å€¼ï¼š<code>fun sum(a: Int, b: Int): Int</code></li>
</ul>
<p>å¯ä»¥çœ‹å‡º <code>:</code> ç¬¦å·åœ¨ Kotlin ä¸­éå¸¸é«˜é¢‘å‡ºç°ï¼Œå®ƒå…¶å®è¡¨ç¤ºäº†ä¸€ç§ä¾èµ–å…³ç³»ï¼Œåœ¨è¿™é‡Œè¡¨ç¤ºä¾èµ–äºä¸»æ„é€ å™¨ã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸»æ„é€ å™¨ä¸­çš„ <code>constructor</code> å…³é”®å­—å¯ä»¥çœç•¥ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>(name: String) &#123;</span><br><span class="line">    <span class="keyword">var</span> name: String = name</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æœ‰äº›åœºæ™¯ï¼Œ<code>constructor</code> æ˜¯ä¸å¯ä»¥çœç•¥çš„ï¼Œä¾‹å¦‚åœ¨ä¸»æ„é€ å™¨ä¸Šä½¿ç”¨ã€Œå¯è§æ€§ä¿®é¥°ç¬¦ã€æˆ–è€…ã€Œæ³¨è§£ã€ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">private</span> <span class="keyword">constructor</span></span>(name: String) &#123;</span><br><span class="line"><span class="comment">//           ğŸ‘† ä¸»æ„é€ å™¨è¢«ä¿®é¥°ä¸ºç§æœ‰çš„ï¼Œå¤–éƒ¨å°±æ— æ³•è°ƒç”¨è¯¥æ„é€ å™¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä¸»æ„é€ å™¨é‡Œå£°æ˜å±æ€§"><a href="#ä¸»æ„é€ å™¨é‡Œå£°æ˜å±æ€§" class="headerlink" title="ä¸»æ„é€ å™¨é‡Œå£°æ˜å±æ€§"></a>ä¸»æ„é€ å™¨é‡Œå£°æ˜å±æ€§</h4><p>å¯ä»¥åœ¨ä¸»æ„é€ å™¨ä¸­ç›´æ¥å£°æ˜å±æ€§ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">           ğŸ‘‡</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>(<span class="keyword">var</span> name: String) &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç­‰ä»·äºï¼š</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>(name: String) &#123;</span><br><span class="line">  <span class="keyword">var</span> name: String = name</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœåœ¨ä¸»æ„é€ å™¨çš„å‚æ•°å£°æ˜æ—¶åŠ ä¸Š <code>var</code> æˆ–è€… <code>val</code>ï¼Œå°±ç­‰ä»·äºåœ¨ç±»ä¸­åˆ›å»ºäº†è¯¥åç§°çš„å±æ€§ï¼ˆpropertyï¼‰ï¼Œå¹¶ä¸”åˆå§‹å€¼å°±æ˜¯ä¸»æ„é€ å™¨ä¸­è¯¥å‚æ•°çš„å€¼ã€‚</p>
</li>
</ol>
<pre><code>å…³äºä¸»æ„é€ å™¨ç›¸å…³çš„çŸ¥è¯†ï¼Œè®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ç±»çš„åˆå§‹åŒ–å†™æ³•ï¼š

é¦–å…ˆåˆ›å»ºä¸€ä¸ª `User` ç±»ï¼š

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

æ·»åŠ ä¸€ä¸ªå‚æ•°ä¸º `name` ä¸ `id` çš„ä¸»æ„é€ å™¨ï¼š

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>(name: String, id: String) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

å°†ä¸»æ„é€ å™¨ä¸­çš„ `name` ä¸ `id` å£°æ˜ä¸ºç±»çš„å±æ€§ï¼š

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>(<span class="keyword">val</span> name: String, <span class="keyword">val</span> id: String) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

ç„¶ååœ¨ `init` ä»£ç å—ä¸­æ·»åŠ ä¸€äº›åˆå§‹åŒ–é€»è¾‘ï¼š

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>(<span class="keyword">val</span> name: String, <span class="keyword">val</span> id: String) &#123;</span><br><span class="line">    <span class="keyword">init</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

æœ€åå†æ·»åŠ å…¶ä»–æ¬¡æ„é€ å™¨ï¼š

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>(<span class="keyword">val</span> name: String, <span class="keyword">val</span> id: String) &#123;</span><br><span class="line">    <span class="keyword">init</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">constructor</span>(person: Person) : <span class="keyword">this</span>(person.name, person.id) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

- å½“ä¸€ä¸ªç±»æœ‰å¤šä¸ªæ„é€ å™¨æ—¶ï¼Œåªéœ€è¦æŠŠæœ€åŸºæœ¬ã€æœ€é€šç”¨çš„é‚£ä¸ªå†™æˆä¸»æ„é€ å™¨å°±è¡Œäº†ã€‚è¿™é‡Œæˆ‘ä»¬é€‰æ‹©å°†å‚æ•°ä¸º `name` ä¸ `id` çš„æ„é€ å™¨ä½œä¸ºä¸»æ„é€ å™¨ã€‚</code></pre><ol start="24">
<li><h3 id="å‡½æ•°ç®€åŒ–"><a href="#å‡½æ•°ç®€åŒ–" class="headerlink" title="å‡½æ•°ç®€åŒ–"></a>å‡½æ•°ç®€åŒ–</h3><h4 id="ä½¿ç”¨-è¿æ¥è¿”å›å€¼"><a href="#ä½¿ç”¨-è¿æ¥è¿”å›å€¼" class="headerlink" title="ä½¿ç”¨ = è¿æ¥è¿”å›å€¼"></a>ä½¿ç”¨ <code>=</code> è¿æ¥è¿”å›å€¼</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">area</span><span class="params">(width: <span class="type">Int</span>, height: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> width * height</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                                      ğŸ‘‡</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">area</span><span class="params">(width: <span class="type">Int</span>, height: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> = width * height</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//                               ğŸ‘‡çœç•¥äº†è¿”å›ç±»å‹  ç±»å‹æ¨æ–­</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">area</span><span class="params">(width: <span class="type">Int</span>, height: <span class="type">Int</span>)</span></span> = width * height</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¹äºæ²¡æœ‰è¿”å›å€¼çš„æƒ…å†µï¼Œå¯ä»¥ç†è§£ä¸ºè¿”å›å€¼æ˜¯ Unitï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sayHi</span><span class="params">(name: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">    println(<span class="string">"Hi "</span> + name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">                       ğŸ‘‡</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sayHi</span><span class="params">(name: <span class="type">String</span>)</span></span> = println(<span class="string">"Hi "</span> + name)</span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="å‚æ•°é»˜è®¤å€¼"><a href="#å‚æ•°é»˜è®¤å€¼" class="headerlink" title="å‚æ•°é»˜è®¤å€¼"></a>å‚æ•°é»˜è®¤å€¼</h4><p>Java ä¸­ï¼Œå…è®¸åœ¨ä¸€ä¸ªç±»ä¸­å®šä¹‰å¤šä¸ªåç§°ç›¸åŒçš„æ–¹æ³•ï¼Œä½†æ˜¯å‚æ•°çš„ç±»å‹æˆ–ä¸ªæ•°å¿…é¡»ä¸åŒï¼Œè¿™å°±æ˜¯æ–¹æ³•çš„é‡è½½ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHi</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"Hi "</span> + name);</span><br><span class="line">&#125;</span><br><span class="line">â€‹</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHi</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    sayHi(<span class="string">"world"</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ Kotlin ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¿™æ ·çš„æ–¹å¼è¿›è¡Œå‡½æ•°çš„é‡è½½ï¼Œä¸è¿‡è¿˜æœ‰ä¸€ç§æ›´ç®€å•çš„æ–¹å¼ï¼Œé‚£å°±æ˜¯ã€Œå‚æ•°é»˜è®¤å€¼ã€ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">                           ğŸ‘‡</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sayHi</span><span class="params">(name: <span class="type">String</span> = <span class="string">"world"</span>)</span></span> = println(<span class="string">"Hi "</span> + name)</span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="å‘½åå‚æ•°"><a href="#å‘½åå‚æ•°" class="headerlink" title="å‘½åå‚æ•°"></a>å‘½åå‚æ•°</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sayHi</span><span class="params">(name: <span class="type">String</span> = <span class="string">"world"</span>, age: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">      ğŸ‘‡   </span><br><span class="line">sayHi(age = <span class="number">21</span>)</span><br></pre></td></tr></table></figure>

<p>çœ‹ä¸€ä¸ªæœ‰éå¸¸å¤šå‚æ•°çš„å‡½æ•°çš„ä¾‹å­ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸ </span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sayHi</span><span class="params">(name: <span class="type">String</span> = <span class="string">"world"</span>, age: <span class="type">Int</span>, isStudent: <span class="type">Boolean</span> = <span class="literal">true</span>, isFat: <span class="type">Boolean</span> = <span class="literal">true</span>, isTall: <span class="type">Boolean</span> = <span class="literal">true</span>)</span></span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ğŸï¸</span><br><span class="line">sayHi(<span class="string">"world"</span>, <span class="number">21</span>, <span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å½“çœ‹åˆ°åé¢ä¸€é•¿ä¸²çš„å¸ƒå°”å€¼æ—¶ï¼Œæˆ‘ä»¬å¾ˆéš¾åˆ†æ¸…æ¥šæ¯ä¸ªå‚æ•°çš„ç”¨å¤„ï¼Œå¯è¯»æ€§å¾ˆå·®ã€‚é€šè¿‡å‘½åå‚æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿™ä¹ˆå†™ï¼š</span></span><br><span class="line"></span><br><span class="line">sayHi(name = <span class="string">"wo"</span>, age = <span class="number">21</span>, isStudent = <span class="literal">false</span>, isFat = <span class="literal">true</span>, isTall = <span class="literal">false</span>)</span><br></pre></td></tr></table></figure>

<p>ä¸å‘½åå‚æ•°ç›¸å¯¹çš„ä¸€ä¸ªæ¦‚å¿µè¢«ç§°ä¸ºã€Œä½ç½®å‚æ•°ã€ï¼Œä¹Ÿå°±æ˜¯æŒ‰ä½ç½®é¡ºåºè¿›è¡Œå‚æ•°å¡«å†™ã€‚</p>
<p>å½“ä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå¦‚æœæ··ç”¨ä½ç½®å‚æ•°ä¸å‘½åå‚æ•°ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„ä½ç½®å‚æ•°éƒ½åº”è¯¥æ”¾åœ¨ç¬¬ä¸€ä¸ªå‘½åå‚æ•°ä¹‹å‰ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sayHi</span><span class="params">(name: <span class="type">String</span> = <span class="string">"world"</span>, age: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sayHi(name = <span class="string">"wo"</span>, <span class="number">21</span>) <span class="comment">// ğŸ‘ˆ IDE ä¼šæŠ¥é”™ï¼ŒMixing named and positioned arguments is not allowed</span></span><br><span class="line">sayHi(<span class="string">"wo"</span>, age = <span class="number">21</span>) <span class="comment">// ğŸ‘ˆ è¿™æ˜¯æ­£ç¡®çš„å†™æ³•</span></span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="æœ¬åœ°å‡½æ•°ï¼ˆåµŒå¥—å‡½æ•°ï¼‰"><a href="#æœ¬åœ°å‡½æ•°ï¼ˆåµŒå¥—å‡½æ•°ï¼‰" class="headerlink" title="æœ¬åœ°å‡½æ•°ï¼ˆåµŒå¥—å‡½æ•°ï¼‰"></a>æœ¬åœ°å‡½æ•°ï¼ˆåµŒå¥—å‡½æ•°ï¼‰</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">login</span><span class="params">(user: <span class="type">String</span>, password: <span class="type">String</span>, illegalStr: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">    <span class="comment">// éªŒè¯ user æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (user.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">throw</span> IllegalArgumentException(illegalStr)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// éªŒè¯ password æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (password.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">throw</span> IllegalArgumentException(illegalStr)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯¥å‡½æ•°ä¸­ï¼Œæ£€æŸ¥å‚æ•°è¿™ä¸ªéƒ¨åˆ†æœ‰äº›å†—ä½™ï¼Œæˆ‘ä»¬åˆä¸æƒ³å°†è¿™æ®µé€»è¾‘ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„å‡½æ•°å¯¹å¤–æš´éœ²ã€‚è¿™æ—¶å¯ä»¥ä½¿ç”¨åµŒå¥—å‡½æ•°ï¼Œåœ¨ <code>login</code> å‡½æ•°å†…éƒ¨å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">login</span><span class="params">(user: <span class="type">String</span>, password: <span class="type">String</span>, illegalStr: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">           ğŸ‘‡ </span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">validate</span><span class="params">(value: <span class="type">String</span>, illegalStr: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (value.isEmpty()) &#123;</span><br><span class="line">          <span class="keyword">throw</span> IllegalArgumentException(illegalStr)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">   ğŸ‘‡</span><br><span class="line">    validate(user, illegalStr)</span><br><span class="line">    validate(password, illegalStr)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæˆ‘ä»¬å°†å…±åŒçš„éªŒè¯é€»è¾‘æ”¾è¿›äº†åµŒå¥—å‡½æ•° <code>validate</code> ä¸­ï¼Œå¹¶ä¸” <code>login</code> å‡½æ•°ä¹‹å¤–çš„å…¶ä»–åœ°æ–¹æ— æ³•è®¿é—®è¿™ä¸ªåµŒå¥—å‡½æ•°ã€‚</p>
<p>è¿™é‡Œçš„ <code>illegalStr</code> æ˜¯é€šè¿‡å‚æ•°çš„æ–¹å¼ä¼ è¿›åµŒå¥—å‡½æ•°ä¸­çš„ï¼Œå…¶å®å®Œå…¨æ²¡æœ‰è¿™ä¸ªå¿…è¦ï¼Œå› ä¸º<strong>åµŒå¥—å‡½æ•°ä¸­å¯ä»¥è®¿é—®åœ¨å®ƒå¤–éƒ¨çš„æ‰€æœ‰å˜é‡æˆ–å¸¸é‡ï¼Œä¾‹å¦‚ç±»ä¸­çš„å±æ€§ã€å½“å‰å‡½æ•°ä¸­çš„å‚æ•°ä¸å˜é‡ç­‰ã€‚</strong></p>
</li>
</ol>
<pre><code>æˆ‘ä»¬ç¨åŠ æ”¹è¿›ï¼š

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">login</span><span class="params">(user: <span class="type">String</span>, password: <span class="type">String</span>, illegalStr: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">validate</span><span class="params">(value: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (value.isEmpty()) &#123;</span><br><span class="line">                                              ğŸ‘‡</span><br><span class="line">            <span class="keyword">throw</span> IllegalArgumentException(illegalStr)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

è¿™é‡Œçœå»äº†åµŒå¥—å‡½æ•°ä¸­çš„ `illegalStr` å‚æ•°ï¼Œåœ¨è¯¥åµŒå¥—å‡½æ•°å†…ç›´æ¥ä½¿ç”¨å¤–å±‚å‡½æ•° `login` çš„å‚æ•° `illegalStr`ã€‚

ä¸Šé¢ `login` å‡½æ•°ä¸­çš„éªŒè¯é€»è¾‘ï¼Œå…¶å®è¿˜æœ‰å¦ä¸€ç§æ›´ç®€å•çš„æ–¹å¼ï¼š

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">login</span><span class="params">(user: <span class="type">String</span>, password: <span class="type">String</span>, illegalStr: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">    require(user.isNotEmpty()) &#123; illegalStr &#125;</span><br><span class="line">    require(password.isNotEmpty()) &#123; illegalStr &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

å…¶ä¸­ç”¨åˆ°äº† lambda è¡¨è¾¾å¼ä»¥åŠ Kotlin å†…ç½®çš„ `require` å‡½æ•°ã€‚</code></pre><ol start="28">
<li><h3 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h3><h4 id="å­—ç¬¦ä¸²æ¨¡æ¿"><a href="#å­—ç¬¦ä¸²æ¨¡æ¿" class="headerlink" title="å­—ç¬¦ä¸²æ¨¡æ¿"></a>å­—ç¬¦ä¸²æ¨¡æ¿</h4><p>åœ¨ Java ä¸­ï¼Œå­—ç¬¦ä¸²ä¸å˜é‡ä¹‹é—´æ˜¯ä½¿ç”¨ <code>+</code> ç¬¦å·è¿›è¡Œæ‹¼æ¥çš„ï¼ŒKotlin ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> name = <span class="string">"world"</span></span><br><span class="line">println(<span class="string">"Hi "</span> + name)</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å½“å˜é‡æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œå¯è¯»æ€§ä¼šå˜å·®ï¼Œå†™èµ·æ¥ä¹Ÿæ¯”è¾ƒéº»çƒ¦ã€‚</p>
<p>Java ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯ <code>String.format</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line">System.out.print(String.format(<span class="string">"Hi %s"</span>, name));</span><br></pre></td></tr></table></figure>

<p>Kotlin ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æ›´åŠ æ–¹ä¾¿çš„å†™æ³•ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> name = <span class="string">"world"</span></span><br><span class="line"><span class="comment">//         ğŸ‘‡ ç”¨ '$' ç¬¦å·åŠ å‚æ•°çš„æ–¹å¼</span></span><br><span class="line">println(<span class="string">"Hi <span class="variable">$name</span>"</span>)</span><br></pre></td></tr></table></figure>

<p>è¿™ç§æ–¹å¼å°±æ˜¯æŠŠ <code>name</code> ä»åç½®æ”¹ä¸ºå‰ç½®ï¼Œç®€åŒ–ä»£ç çš„åŒæ—¶å¢åŠ äº†å­—ç¬¦ä¸²çš„å¯è¯»æ€§ã€‚</p>
<p>é™¤äº†å˜é‡ï¼Œ<code>$</code> åè¿˜å¯ä»¥è·Ÿè¡¨è¾¾å¼ï¼Œä½†è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç”¨ <code>{}</code> ç»™å®ƒåŒ…èµ·æ¥ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> name = <span class="string">"world"</span></span><br><span class="line">println(<span class="string">"Hi <span class="subst">$&#123;name.length&#125;</span>"</span>)</span><br></pre></td></tr></table></figure>

<p>å…¶å®å°±è·Ÿå››åˆ™è¿ç®—çš„æ‹¬å·ä¸€æ ·ï¼Œæé«˜è¯­æ³•ä¸Šçš„ä¼˜å…ˆçº§ï¼Œè€Œå•ä¸ªå˜é‡çš„åœºæ™¯å¯ä»¥çœç•¥ <code>{}</code>ã€‚</p>
<p>å­—ç¬¦ä¸²æ¨¡æ¿è¿˜æ”¯æŒè½¬ä¹‰å­—ç¬¦ï¼Œæ¯”å¦‚ä½¿ç”¨è½¬ä¹‰å­—ç¬¦ <code>\n</code> è¿›è¡Œæ¢è¡Œæ“ä½œï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> name = <span class="string">"world!\n"</span></span><br><span class="line">println(<span class="string">"Hi <span class="variable">$name</span>"</span>) <span class="comment">// ğŸ‘ˆ ä¼šå¤šæ‰“ä¸€ä¸ªç©ºè¡Œ</span></span><br></pre></td></tr></table></figure>

<h4 id="raw-string-åŸç”Ÿå­—ç¬¦ä¸²"><a href="#raw-string-åŸç”Ÿå­—ç¬¦ä¸²" class="headerlink" title="raw string (åŸç”Ÿå­—ç¬¦ä¸²)"></a>raw string (åŸç”Ÿå­—ç¬¦ä¸²)</h4><p>æœ‰æ—¶å€™æˆ‘ä»¬ä¸å¸Œæœ›å†™è¿‡å¤šçš„è½¬ä¹‰å­—ç¬¦ï¼Œè¿™ç§æƒ…å†µ Kotlin é€šè¿‡ã€ŒåŸç”Ÿå­—ç¬¦ä¸²ã€æ¥å®ç°ã€‚</p>
<p>ç”¨æ³•å°±æ˜¯ä½¿ç”¨ä¸€å¯¹ <code>&quot;&quot;&quot;</code> å°†å­—ç¬¦ä¸²æ‹¬èµ·æ¥ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> name = <span class="string">"world"</span></span><br><span class="line"><span class="keyword">val</span> myName = <span class="string">"kotlin"</span></span><br><span class="line">           ğŸ‘‡</span><br><span class="line"><span class="keyword">val</span> text = <span class="string">"""</span></span><br><span class="line"><span class="string">      Hi <span class="variable">$name</span>!</span></span><br><span class="line"><span class="string">    My name is <span class="variable">$myName</span>.\n</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">println(text)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>\n</code> å¹¶ä¸ä¼šè¢«è½¬ä¹‰</li>
<li>æœ€åè¾“å‡ºçš„å†…å®¹ä¸å†™çš„å†…å®¹å®Œå…¨ä¸€è‡´ï¼ŒåŒ…æ‹¬å®é™…çš„æ¢è¡Œ</li>
<li><code>$</code> ç¬¦å·å¼•ç”¨å˜é‡ä»ç„¶ç”Ÿæ•ˆ</li>
</ul>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hi world!</span><br><span class="line">  My name <span class="keyword">is</span> kotlin.\n</span><br></pre></td></tr></table></figure>

<p>å¯¹é½æ–¹å¼çœ‹èµ·æ¥ä¸å¤ªä¼˜é›…ï¼ŒåŸç”Ÿå­—ç¬¦ä¸²è¿˜å¯ä»¥é€šè¿‡ <code>trimMargin()</code> å‡½æ•°å»é™¤æ¯è¡Œå‰é¢çš„ç©ºæ ¼ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> text = <span class="string">"""</span></span><br><span class="line"><span class="string">     ğŸ‘‡ </span></span><br><span class="line"><span class="string">      |Hi world!</span></span><br><span class="line"><span class="string">    |My name is kotlin.</span></span><br><span class="line"><span class="string">"""</span>.trimMargin()</span><br><span class="line">println(text)</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hi world!</span><br><span class="line">My name <span class="keyword">is</span> kotlin.</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œçš„ <code>trimMargin()</code> å‡½æ•°æœ‰ä»¥ä¸‹å‡ ä¸ªæ³¨æ„ç‚¹ï¼š</p>
<ul>
<li><code>|</code> ç¬¦å·ä¸ºé»˜è®¤çš„è¾¹ç•Œå‰ç¼€ï¼Œå‰é¢åªèƒ½æœ‰ç©ºæ ¼ï¼Œå¦åˆ™ä¸ä¼šç”Ÿæ•ˆ</li>
<li>è¾“å‡ºæ—¶ <code>|</code> ç¬¦å·ä»¥åŠå®ƒå‰é¢çš„ç©ºæ ¼éƒ½ä¼šè¢«åˆ é™¤</li>
<li>è¾¹ç•Œå‰ç¼€è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–å­—ç¬¦ï¼Œæ¯”å¦‚ <code>trimMargin(&quot;/&quot;)</code>ï¼Œåªä¸è¿‡ä¸Šæ–¹çš„ä»£ç ä½¿ç”¨çš„æ˜¯å‚æ•°é»˜è®¤å€¼çš„è°ƒç”¨æ–¹å¼ã€‚</li>
</ul>
</li>
<li><h3 id="æ•°ç»„å’Œé›†åˆ-1"><a href="#æ•°ç»„å’Œé›†åˆ-1" class="headerlink" title="æ•°ç»„å’Œé›†åˆ"></a>æ•°ç»„å’Œé›†åˆ</h3><h4 id="æ•°ç»„ä¸é›†åˆçš„æ“ä½œç¬¦"><a href="#æ•°ç»„ä¸é›†åˆçš„æ“ä½œç¬¦" class="headerlink" title="æ•°ç»„ä¸é›†åˆçš„æ“ä½œç¬¦"></a>æ•°ç»„ä¸é›†åˆçš„æ“ä½œç¬¦</h4><p>å£°æ˜å¦‚ä¸‹ <code>IntArray</code> å’Œ <code>List</code>ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> intArray = intArrayOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="keyword">val</span> strList = listOf(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)</span><br></pre></td></tr></table></figure>

<p><code>forEach</code>ï¼šéå†æ¯ä¸€ä¸ªå…ƒç´ </p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="comment">//              ğŸ‘‡ lambda è¡¨è¾¾å¼ï¼Œi è¡¨ç¤ºæ•°ç»„çš„æ¯ä¸ªå…ƒç´ </span></span><br><span class="line">intArray.forEach &#123; i -&gt;</span><br><span class="line">    print(i + <span class="string">" "</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š1 2 3</span></span><br></pre></td></tr></table></figure>

<p><code>filter</code>ï¼šå¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œè¿‡æ»¤æ“ä½œï¼Œå¦‚æœ lambda è¡¨è¾¾å¼ä¸­çš„æ¡ä»¶æˆç«‹åˆ™ç•™ä¸‹è¯¥å…ƒç´ ï¼Œå¦åˆ™å‰”é™¤ï¼Œæœ€ç»ˆç”Ÿæˆæ–°çš„é›†åˆ</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="comment">// [1, 2, 3]</span></span><br><span class="line">      â¬‡ï¸</span><br><span class="line"><span class="comment">//  &#123;2, 3&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//            ğŸ‘‡ æ³¨æ„ï¼Œè¿™é‡Œå˜æˆäº† List</span></span><br><span class="line"><span class="keyword">val</span> newList: List = intArray.filter &#123; i -&gt;</span><br><span class="line">    i != <span class="number">1</span> <span class="comment">// ğŸ‘ˆ è¿‡æ»¤æ‰æ•°ç»„ä¸­ç­‰äº 1 çš„å…ƒç´ </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>map</code>ï¼šéå†æ¯ä¸ªå…ƒç´ å¹¶æ‰§è¡Œç»™å®šè¡¨è¾¾å¼ï¼Œæœ€ç»ˆå½¢æˆæ–°çš„é›†åˆ</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="comment">//  [1, 2, 3]</span></span><br><span class="line">       â¬‡ï¸</span><br><span class="line"><span class="comment">//  &#123;2, 3, 4&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> newList: List = intArray.map &#123; i -&gt;</span><br><span class="line">    i + <span class="number">1</span> <span class="comment">// ğŸ‘ˆ æ¯ä¸ªå…ƒç´ åŠ  1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>flatMap</code>ï¼šéå†æ¯ä¸ªå…ƒç´ ï¼Œå¹¶ä¸ºæ¯ä¸ªå…ƒç´ åˆ›å»ºæ–°çš„é›†åˆï¼Œæœ€ååˆå¹¶åˆ°ä¸€ä¸ªé›†åˆä¸­</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="comment">//          [1, 2, 3]</span></span><br><span class="line">               â¬‡ï¸</span><br><span class="line"><span class="comment">// &#123;"2", "a" , "3", "a", "4", "a"&#125;</span></span><br><span class="line"></span><br><span class="line">intArray.flatMap &#123; i -&gt;</span><br><span class="line">    listOf(<span class="string">"<span class="subst">$&#123;i + <span class="number">1</span>&#125;</span>"</span>, <span class="string">"a"</span>) <span class="comment">// ğŸ‘ˆ ç”Ÿæˆæ–°é›†åˆ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="Range"><a href="#Range" class="headerlink" title="Range"></a><code>Range</code></h4><p>åœ¨ Java è¯­è¨€ä¸­å¹¶æ²¡æœ‰ <code>Range</code> çš„æ¦‚å¿µï¼ŒKotlin ä¸­çš„ <code>Range</code> è¡¨ç¤ºåŒºé—´çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯èŒƒå›´ã€‚åŒºé—´çš„å¸¸è§å†™æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">              ğŸ‘‡      ğŸ‘‡</span><br><span class="line"><span class="keyword">val</span> range: IntRange = <span class="number">0</span>..<span class="number">1000</span></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œçš„ <code>0..1000</code> å°±è¡¨ç¤ºä» 0 åˆ° 1000 çš„èŒƒå›´ï¼Œ<strong>åŒ…æ‹¬ 1000</strong>ï¼Œæ•°å­¦ä¸Šç§°ä¸ºé—­åŒºé—´ [0, 1000]ã€‚é™¤äº†è¿™é‡Œçš„ <code>IntRange</code> ï¼Œè¿˜æœ‰ <code>CharRange</code> ä»¥åŠ <code>LongRange</code>ã€‚</p>
<p>Kotlin ä¸­æ²¡æœ‰çº¯çš„å¼€åŒºé—´çš„å®šä¹‰ï¼Œä¸è¿‡æœ‰åŠå¼€åŒºé—´çš„å®šä¹‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">                         ğŸ‘‡</span><br><span class="line">val range: IntRange = 0 until 1000</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œçš„ <code>0 until 1000</code> è¡¨ç¤ºä» 0 åˆ° 1000ï¼Œä½†<strong>ä¸åŒ…æ‹¬ 1000</strong>ï¼Œè¿™å°±æ˜¯åŠå¼€åŒºé—´ [0, 1000) ã€‚</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> range = <span class="number">0</span>..<span class="number">1000</span></span><br><span class="line"><span class="comment">//     ğŸ‘‡ é»˜è®¤æ­¥é•¿ä¸º 1ï¼Œè¾“å‡ºï¼š0, 1, 2, 3, 4, 5, 6, 7....1000,</span></span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> range) &#123;</span><br><span class="line">    print(<span class="string">"<span class="variable">$i</span>, "</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é™¤äº†ä½¿ç”¨é»˜è®¤çš„æ­¥é•¿ 1ï¼Œè¿˜å¯ä»¥é€šè¿‡ <code>step</code> è®¾ç½®æ­¥é•¿ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> range = <span class="number">0</span>..<span class="number">1000</span></span><br><span class="line"><span class="comment">//               ğŸ‘‡ æ­¥é•¿ä¸º 2ï¼Œè¾“å‡ºï¼š0, 2, 4, 6, 8, 10,....1000,</span></span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> range step <span class="number">2</span>) &#123;</span><br><span class="line">    print(<span class="string">"<span class="variable">$i</span>, "</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Kotlin è¿˜æä¾›äº†é€’å‡åŒºé—´ <code>downTo</code> ï¼Œä¸è¿‡é€’å‡æ²¡æœ‰åŠå¼€åŒºé—´çš„ç”¨æ³•:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="comment">//            ğŸ‘‡ è¾“å‡ºï¼š4, 3, 2, 1, </span></span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">4</span> downTo <span class="number">1</span>) &#123;</span><br><span class="line">    print(<span class="string">"<span class="variable">$i</span>, "</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ <code>4 downTo 1</code> å°±è¡¨ç¤ºé€’å‡çš„é—­åŒºé—´ [4, 1]ã€‚è¿™é‡Œçš„ <code>downTo</code> ä»¥åŠä¸Šé¢çš„ <code>step</code> éƒ½å«åšã€Œä¸­ç¼€è¡¨è¾¾å¼ã€</p>
</li>
</ol>
<ol start="31">
<li><h4 id="Sequence-1"><a href="#Sequence-1" class="headerlink" title="Sequence"></a><code>Sequence</code></h4><p>äº†è§£ <code>Sequence</code> åºåˆ—çš„ä½¿ç”¨æ–¹å¼ã€‚</p>
<p>åºåˆ— <code>Sequence</code> åˆè¢«ç§°ä¸ºã€Œæƒ°æ€§é›†åˆæ“ä½œã€ï¼Œå…³äºä»€ä¹ˆæ˜¯æƒ°æ€§ï¼Œæˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„ä¾‹å­æ¥ç†è§£ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> sequence = sequenceOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="keyword">val</span> result: List = sequence</span><br><span class="line">    .map &#123; i -&gt;</span><br><span class="line">        println(<span class="string">"Map <span class="variable">$i</span>"</span>)</span><br><span class="line">        i * <span class="number">2</span> </span><br><span class="line">    &#125;</span><br><span class="line">    .filter &#123; i -&gt;</span><br><span class="line">        println(<span class="string">"Filter <span class="variable">$i</span>"</span>)</span><br><span class="line">        i % <span class="number">3</span>  == <span class="number">0</span> </span><br><span class="line">    &#125;</span><br><span class="line">ğŸ‘‡</span><br><span class="line">println(result.first()) <span class="comment">// ğŸ‘ˆ åªå–é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>æƒ°æ€§çš„æ¦‚å¿µé¦–å…ˆå°±æ˜¯è¯´åœ¨ã€ŒğŸ‘‡ã€æ ‡æ³¨ä¹‹å‰çš„ä»£ç è¿è¡Œæ—¶ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œå®ƒåªæ˜¯å®šä¹‰äº†ä¸€ä¸ªæ‰§è¡Œæµç¨‹ï¼Œåªæœ‰ <code>result</code> è¢«ä½¿ç”¨åˆ°çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œ</p>
</li>
<li><p>å½“ã€ŒğŸ‘‡ã€çš„ <code>println</code> æ‰§è¡Œæ—¶æ•°æ®å¤„ç†æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>å–å‡ºå…ƒç´  1 -&gt; map ä¸º 2 -&gt; filter åˆ¤æ–­ 2 æ˜¯å¦èƒ½è¢« 3 æ•´é™¤</li>
<li>å–å‡ºå…ƒç´  2 -&gt; map ä¸º 4 -&gt; filter åˆ¤æ–­ 4 æ˜¯å¦èƒ½è¢« 3 æ•´é™¤</li>
<li>â€¦</li>
</ul>
<p>æƒ°æ€§æŒ‡å½“å‡ºç°æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œ<code>Sequence</code> å°±ä¸ä¼šæ‰§è¡Œåé¢çš„å…ƒç´ éå†äº†ï¼Œå³è·³è¿‡äº† <code>4</code> çš„éå†ã€‚</p>
</li>
</ul>
<p>è€Œ <code>List</code> æ˜¯æ²¡æœ‰æƒ°æ€§çš„ç‰¹æ€§çš„ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> list = listOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="keyword">val</span> result: List = list</span><br><span class="line">    .map &#123; i -&gt;</span><br><span class="line">        println(<span class="string">"Map <span class="variable">$i</span>"</span>)</span><br><span class="line">        i * <span class="number">2</span> </span><br><span class="line">    &#125;</span><br><span class="line">    .filter &#123; i -&gt;</span><br><span class="line">        println(<span class="string">"Filter <span class="variable">$i</span>"</span>)</span><br><span class="line">        i % <span class="number">3</span>  == <span class="number">0</span> </span><br><span class="line">    &#125;</span><br><span class="line">ğŸ‘‡</span><br><span class="line">println(result.first()) <span class="comment">// ğŸ‘ˆ åªå–é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br></pre></td></tr></table></figure>

<p>åŒ…æ‹¬ä¸¤ç‚¹ï¼š</p>
<ul>
<li>å£°æ˜ä¹‹åç«‹å³æ‰§è¡Œ</li>
<li>æ•°æ®å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š<ul>
<li>{1, 2, 3, 4} -&gt; {2, 4, 6, 8}</li>
<li>éå†åˆ¤æ–­æ˜¯å¦èƒ½è¢« 3 æ•´é™¤</li>
</ul>
</li>
</ul>
<p><code>Sequence</code> è¿™ç§ç±»ä¼¼æ‡’åŠ è½½çš„å®ç°æœ‰ä¸‹é¢è¿™äº›ä¼˜ç‚¹ï¼š</p>
<ul>
<li>ä¸€æ—¦æ»¡è¶³éå†é€€å‡ºçš„æ¡ä»¶ï¼Œå°±å¯ä»¥çœç•¥åç»­ä¸å¿…è¦çš„éå†è¿‡ç¨‹ã€‚</li>
<li>åƒ <code>List</code> è¿™ç§å®ç° <code>Iterable</code> æ¥å£çš„é›†åˆç±»ï¼Œæ¯è°ƒç”¨ä¸€æ¬¡å‡½æ•°å°±ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ <code>Iterable</code>ï¼Œä¸‹ä¸€ä¸ªå‡½æ•°å†åŸºäºæ–°çš„ <code>Iterable</code> æ‰§è¡Œï¼Œæ¯æ¬¡å‡½æ•°è°ƒç”¨äº§ç”Ÿçš„ä¸´æ—¶ <code>Iterable</code> ä¼šå¯¼è‡´é¢å¤–çš„å†…å­˜æ¶ˆè€—ï¼Œè€Œ <code>Sequence</code> åœ¨æ•´ä¸ªæµç¨‹ä¸­åªæœ‰ä¸€ä¸ªã€‚</li>
</ul>
<p>å› æ­¤ï¼Œ<code>Sequence</code> è¿™ç§æ•°æ®ç±»å‹å¯ä»¥åœ¨æ•°æ®é‡æ¯”è¾ƒå¤§æˆ–è€…æ•°æ®é‡æœªçŸ¥çš„æ—¶å€™ï¼Œä½œä¸ºæµå¼å¤„ç†çš„è§£å†³æ–¹æ¡ˆã€‚</p>
</li>
<li><h3 id="æ¡ä»¶æ§åˆ¶"><a href="#æ¡ä»¶æ§åˆ¶" class="headerlink" title="æ¡ä»¶æ§åˆ¶"></a>æ¡ä»¶æ§åˆ¶</h3><h4 id="if-else"><a href="#if-else" class="headerlink" title="if/else"></a><code>if/else</code></h4><p>é¦–å…ˆæ¥çœ‹ä¸‹ Java ä¸­çš„ <code>if/else</code> å†™æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line"><span class="keyword">int</span> max;</span><br><span class="line"><span class="keyword">if</span> (a &gt; b) &#123;</span><br><span class="line">    max = a;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    max = b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ Kotlin ä¸­ï¼Œè¿™ä¹ˆå†™å½“ç„¶ä¹Ÿå¯ä»¥ï¼Œä¸è¿‡ï¼ŒKotlin ä¸­ <code>if</code> è¯­å¥è¿˜å¯ä»¥ä½œä¸ºä¸€ä¸ªè¡¨è¾¾å¼èµ‹å€¼ç»™å˜é‡ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">       ğŸ‘‡</span><br><span class="line"><span class="keyword">val</span> max = <span class="keyword">if</span> (a &gt; b) a <span class="keyword">else</span> b</span><br></pre></td></tr></table></figure>

<p>å¦å¤–ï¼ŒKotlin ä¸­å¼ƒç”¨äº†ä¸‰å…ƒè¿ç®—ç¬¦ï¼ˆæ¡ä»¶ ? ç„¶å : å¦åˆ™ï¼‰ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>if/else</code> æ¥ä»£æ›¿å®ƒã€‚</p>
<p>ä¸Šé¢çš„ <code>if/else</code> çš„åˆ†æ”¯ä¸­æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå…¶å®è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªä»£ç å—ï¼Œä»£ç å—çš„æœ€åä¸€è¡Œä¼šä½œä¸ºç»“æœè¿”å›ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> max = <span class="keyword">if</span> (a &gt; b) &#123;</span><br><span class="line">    println(<span class="string">"max:a"</span>)</span><br><span class="line">    a <span class="comment">// ğŸ‘ˆ è¿”å› a</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    println(<span class="string">"max:b"</span>)</span><br><span class="line">    b <span class="comment">// ğŸ‘ˆ è¿”å› b</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="when"><a href="#when" class="headerlink" title="when"></a><code>when</code></h4><p>åœ¨ Java ä¸­ï¼Œç”¨ <code>switch</code> è¯­å¥æ¥åˆ¤æ–­ä¸€ä¸ªå˜é‡ä¸ä¸€ç³»åˆ—å€¼ä¸­æŸä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line"><span class="keyword">switch</span> (x) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>: &#123;</span><br><span class="line">        System.out.println(<span class="string">"1"</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>: &#123;</span><br><span class="line">        System.out.println(<span class="string">"2"</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">default</span>: &#123;</span><br><span class="line">        System.out.println(<span class="string">"default"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>kotlinä¸­</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">ğŸ‘‡</span><br><span class="line"><span class="keyword">when</span> (x) &#123;</span><br><span class="line">   ğŸ‘‡</span><br><span class="line">    <span class="number">1</span> -&gt; &#123; println(<span class="string">"1"</span>) &#125;</span><br><span class="line">    <span class="number">2</span> -&gt; &#123; println(<span class="string">"2"</span>) &#125;</span><br><span class="line">   ğŸ‘‡</span><br><span class="line">    <span class="keyword">else</span> -&gt; &#123; println(<span class="string">"else"</span>) &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œä¸ Java ç›¸æ¯”çš„ä¸åŒç‚¹æœ‰ï¼š</p>
<ul>
<li>çœç•¥äº† <code>case</code> å’Œ <code>break</code>ï¼Œå‰è€…æ¯”è¾ƒå¥½ç†è§£ï¼Œåè€…çš„æ„æ€æ˜¯ Kotlin è‡ªåŠ¨ä¸ºæ¯ä¸ªåˆ†æ”¯åŠ ä¸Šäº† <code>break</code> çš„åŠŸèƒ½ï¼Œé˜²æ­¢æˆ‘ä»¬åƒ Java é‚£æ ·å†™é”™</li>
<li>Java ä¸­çš„é»˜è®¤åˆ†æ”¯ä½¿ç”¨çš„æ˜¯ <code>default</code> å…³é”®å­—ï¼ŒKotlin ä¸­ä½¿ç”¨çš„æ˜¯ <code>else</code></li>
</ul>
<p>ä¸ <code>if/else</code> ä¸€æ ·ï¼Œ<code>when</code> ä¹Ÿå¯ä»¥ä½œä¸ºè¡¨è¾¾å¼è¿›è¡Œä½¿ç”¨ï¼Œåˆ†æ”¯ä¸­æœ€åä¸€è¡Œçš„ç»“æœä½œä¸ºè¿”å›å€¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™æ—¶å°±å¿…é¡»è¦æœ‰ <code>else</code> åˆ†æ”¯ï¼Œä½¿å¾—æ— è®ºæ€æ ·éƒ½ä¼šæœ‰ç»“æœè¿”å›ï¼Œé™¤éå·²ç»åˆ—å‡ºäº†æ‰€æœ‰æƒ…å†µï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> value: <span class="built_in">Int</span> = <span class="keyword">when</span> (x) &#123;</span><br><span class="line">    <span class="number">1</span> -&gt; &#123; x + <span class="number">1</span> &#125;</span><br><span class="line">    <span class="number">2</span> -&gt; &#123; x * <span class="number">2</span> &#125;</span><br><span class="line">    <span class="keyword">else</span> -&gt; &#123; x + <span class="number">5</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ Java ä¸­ï¼Œå½“å¤šç§æƒ…å†µæ‰§è¡ŒåŒä¸€ä»½ä»£ç æ—¶ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line"><span class="keyword">switch</span> (x) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>: &#123;</span><br><span class="line">        System.out.println(<span class="string">"x == 1 or x == 2"</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">default</span>: &#123;</span><br><span class="line">        System.out.println(<span class="string">"default"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€Œ Kotlin ä¸­å¤šç§æƒ…å†µæ‰§è¡ŒåŒä¸€ä»½ä»£ç æ—¶ï¼Œå¯ä»¥å°†å¤šä¸ªåˆ†æ”¯æ¡ä»¶æ”¾åœ¨ä¸€èµ·ï¼Œç”¨ <code>,</code> ç¬¦å·éš”å¼€ï¼Œè¡¨ç¤ºè¿™äº›æƒ…å†µéƒ½ä¼šæ‰§è¡Œåé¢çš„ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">when (x) &#123;</span><br><span class="line">    ğŸ‘‡</span><br><span class="line">    1, 2 -&gt; print(&quot;x == 1 or x == 2&quot;)</span><br><span class="line">    else -&gt; print(&quot;else&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ <code>when</code> è¯­å¥ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼ä½œä¸ºåˆ†æ”¯çš„åˆ¤æ–­æ¡ä»¶ï¼š</p>
<p>ä½¿ç”¨ <code>in</code> æ£€æµ‹æ˜¯å¦åœ¨ä¸€ä¸ªåŒºé—´æˆ–è€…é›†åˆä¸­ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">when</span> (x) &#123;</span><br><span class="line">   ğŸ‘‡</span><br><span class="line">    <span class="keyword">in</span> <span class="number">1</span>..<span class="number">10</span> -&gt; print(<span class="string">"x åœ¨åŒºé—´ 1..10 ä¸­"</span>)</span><br><span class="line">   ğŸ‘‡</span><br><span class="line">    <span class="keyword">in</span> listOf(<span class="number">1</span>,<span class="number">2</span>) -&gt; print(<span class="string">"x åœ¨é›†åˆä¸­"</span>)</span><br><span class="line">   ğŸ‘‡ <span class="comment">// not in</span></span><br><span class="line">    !<span class="keyword">in</span> <span class="number">10</span>..<span class="number">20</span> -&gt; print(<span class="string">"x ä¸åœ¨åŒºé—´ 10..20 ä¸­"</span>)</span><br><span class="line">    <span class="keyword">else</span> -&gt; print(<span class="string">"ä¸åœ¨ä»»ä½•åŒºé—´ä¸Š"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ä½¿ç”¨ <code>is</code> è¿›è¡Œç‰¹å®šç±»å‹çš„æ£€æµ‹ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> isString = <span class="keyword">when</span>(x) &#123;</span><br><span class="line">    ğŸ‘‡</span><br><span class="line">    <span class="keyword">is</span> String -&gt; <span class="literal">true</span></span><br><span class="line">    <span class="keyword">else</span> -&gt; <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥çœç•¥ <code>when</code> åé¢çš„å‚æ•°ï¼Œæ¯ä¸€ä¸ªåˆ†æ”¯æ¡ä»¶éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">when</span> &#123;</span><br><span class="line">   ğŸ‘‡</span><br><span class="line">    str1.contains(<span class="string">"a"</span>) -&gt; print(<span class="string">"å­—ç¬¦ä¸² str1 åŒ…å« a"</span>)</span><br><span class="line">   ğŸ‘‡</span><br><span class="line">    str2.length == <span class="number">3</span> -&gt; print(<span class="string">"å­—ç¬¦ä¸² str2 çš„é•¿åº¦ä¸º 3"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“åˆ†æ”¯çš„åˆ¤æ–­æ¡ä»¶ä¸ºè¡¨è¾¾å¼æ—¶ï¼Œå“ªä¸€ä¸ªæ¡ä»¶å…ˆä¸º <code>true</code> å°±æ‰§è¡Œå“ªä¸ªåˆ†æ”¯çš„ä»£ç å—ã€‚</p>
</li>
<li><h4 id="for"><a href="#for" class="headerlink" title="for"></a><code>for</code></h4><p>æˆ‘ä»¬çŸ¥é“ Java å¯¹ä¸€ä¸ªé›†åˆæˆ–æ•°ç»„å¯ä»¥è¿™æ ·éå†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line"><span class="keyword">int</span>[] array = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> item : array) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>kotlin</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> array = intArrayOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">          ğŸ‘‡</span><br><span class="line"><span class="keyword">for</span> (item <span class="keyword">in</span> array) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œä¸ Java æœ‰å‡ å¤„ä¸åŒï¼š</p>
<ul>
<li>åœ¨ Kotlin ä¸­ï¼Œè¡¨ç¤ºå•ä¸ªå…ƒç´ çš„ <code>item</code> ï¼Œä¸ç”¨æ˜¾å¼çš„å£°æ˜ç±»å‹</li>
<li>Kotlin ä½¿ç”¨çš„æ˜¯ <code>in</code> å…³é”®å­—ï¼Œè¡¨ç¤º <code>item</code> æ˜¯ <code>array</code> é‡Œé¢çš„ä¸€ä¸ªå…ƒç´ </li>
</ul>
<p>å¦å¤–ï¼ŒKotlin çš„ <code>in</code> åé¢çš„å˜é‡å¯ä»¥æ˜¯ä»»ä½•å®ç° <code>Iterable</code> æ¥å£çš„å¯¹è±¡ã€‚</p>
<p>åœ¨ Java ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è¿™ä¹ˆå†™ <code>for</code> å¾ªç¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// éå†ä» 0 åˆ° 10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½† Kotlin ä¸­æ²¡æœ‰è¿™æ ·çš„å†™æ³•ï¼Œé‚£åº”è¯¥æ€æ ·å®ç°ä¸€ä¸ª 0 åˆ° 10 çš„éå†å‘¢ï¼Ÿ</p>
<p>å…¶å®ä½¿ç”¨ä¸Šé¢è®²è¿‡çš„åŒºé—´å°±å¯ä»¥å®ç°å•¦ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">0</span>..<span class="number">10</span>) &#123;</span><br><span class="line">    println(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="try-catch"><a href="#try-catch" class="headerlink" title="try-catch"></a><code>try-catch</code></h4><p>å…³äº <code>try-catch</code> æˆ‘ä»¬éƒ½ä¸é™Œç”Ÿï¼Œåœ¨å¹³æ—¶å¼€å‘ä¸­éš¾å…éƒ½ä¼šé‡åˆ°å¼‚å¸¸éœ€è¦å¤„ç†ï¼Œé‚£ä¹ˆåœ¨ Kotlin ä¸­æ˜¯æ€æ ·å¤„ç†çš„å‘¢ï¼Œå…ˆæ¥çœ‹ä¸‹ Kotlin ä¸­æ•è·å¼‚å¸¸çš„ä»£ç ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (e: Exception) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">finally</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥å‘ç° Kotlin å¼‚å¸¸å¤„ç†ä¸ Java çš„å¼‚å¸¸å¤„ç†åŸºæœ¬ç›¸åŒï¼Œä½†ä¹Ÿæœ‰å‡ ä¸ªä¸åŒç‚¹ï¼š</p>
<ul>
<li><p>æˆ‘ä»¬çŸ¥é“åœ¨ Java ä¸­ï¼Œè°ƒç”¨ä¸€ä¸ªæŠ›å‡ºå¼‚å¸¸çš„æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sayHi</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        sayHi();</span><br><span class="line">        <span class="comment">// ğŸ‘† IDE æŠ¥é”™ï¼ŒUnhandled exception: java.io.IOException</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†åœ¨ Kotlin ä¸­ï¼Œè°ƒç”¨ä¸Šæ–¹ <code>User</code> ç±»çš„ <code>sayHi</code> æ–¹æ³•æ—¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">val user = User()</span><br><span class="line">user.sayHi() // ğŸ‘ˆ æ­£å¸¸è°ƒç”¨ï¼ŒIDE ä¸ä¼šæŠ¥é”™ï¼Œä½†è¿è¡Œæ—¶ä¼šå‡ºé”™</span><br></pre></td></tr></table></figure>

<p>ä¸ºä»€ä¹ˆè¿™é‡Œä¸ä¼šæŠ¥é”™å‘¢ï¼Ÿå› ä¸º Kotlin ä¸­çš„å¼‚å¸¸æ˜¯ä¸ä¼šè¢«æ£€æŸ¥çš„ï¼Œåªæœ‰åœ¨è¿è¡Œæ—¶å¦‚æœ <code>sayHi</code> æŠ›å‡ºå¼‚å¸¸ï¼Œæ‰ä¼šå‡ºé”™ã€‚</p>
</li>
<li><p>Kotlin ä¸­ <code>try-catch</code> è¯­å¥ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå…è®¸ä»£ç å—çš„æœ€åä¸€è¡Œä½œä¸ºè¿”å›å€¼ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">           ğŸ‘‡       </span><br><span class="line"><span class="keyword">val</span> a: <span class="built_in">Int</span>? = <span class="keyword">try</span> &#123; parseInt(input) &#125; <span class="keyword">catch</span> (e: NumberFormatException) &#123; <span class="literal">null</span> &#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ol>
<ol start="35">
<li><h4 id="å’Œ"><a href="#å’Œ" class="headerlink" title="?. å’Œ ?:"></a><code>?.</code> å’Œ <code>?:</code></h4><p>æˆ‘ä»¬çŸ¥é“ç©ºå®‰å…¨è°ƒç”¨ <code>?.</code>ï¼Œåœ¨å¯¹è±¡éç©ºæ—¶ä¼šæ‰§è¡Œåé¢çš„è°ƒç”¨ï¼Œå¯¹è±¡ä¸ºç©ºæ—¶å°±ä¼šè¿”å› <code>null</code>ã€‚å¦‚æœè¿™æ—¶å°†è¯¥è¡¨è¾¾å¼èµ‹å€¼ç»™ä¸€ä¸ªä¸å¯ç©ºçš„å˜é‡ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> str: String? = <span class="string">"Hello"</span></span><br><span class="line"><span class="keyword">var</span> length: <span class="built_in">Int</span> = str?.length</span><br><span class="line"><span class="comment">//                ğŸ‘† ï¼ŒIDE æŠ¥é”™ï¼ŒType mismatch. Required:Int. Found:Int?</span></span><br></pre></td></tr></table></figure>

<p>æŠ¥é”™çš„åŸå› å°±æ˜¯ <code>str</code> ä¸º null æ—¶æˆ‘ä»¬æ²¡æœ‰å€¼å¯ä»¥è¿”å›ç»™ <code>length</code></p>
<p>è¿™æ—¶å°±å¯ä»¥ä½¿ç”¨ Kotlin ä¸­çš„ Elvis æ“ä½œç¬¦ <code>?:</code> æ¥å…œåº•ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> str: String? = <span class="string">"Hello"</span></span><br><span class="line">                             ğŸ‘‡</span><br><span class="line"><span class="keyword">val</span> length: <span class="built_in">Int</span> = str?.length ?: -<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>å®ƒçš„æ„æ€æ˜¯å¦‚æœå·¦ä¾§è¡¨è¾¾å¼ <code>str?.length</code> ç»“æœä¸ºç©ºï¼Œåˆ™è¿”å›å³ä¾§çš„å€¼ <code>-1</code>ã€‚</p>
<p>Elvis æ“ä½œç¬¦è¿˜æœ‰å¦å¤–ä¸€ç§å¸¸è§ç”¨æ³•ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">validate</span><span class="params">(user: <span class="type">User</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> id = user.id ?: <span class="keyword">return</span> <span class="comment">// ğŸ‘ˆ éªŒè¯ user.id æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºæ—¶ return </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">validate</span><span class="params">(user: <span class="type">User</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (user.id == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">val</span> id = user.id</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="å’Œ-1"><a href="#å’Œ-1" class="headerlink" title="== å’Œ ==="></a><code>==</code> å’Œ <code>===</code></h4><p>åœ¨ Java ä¸­ï¼Œ<code>==</code> æ¯”è¾ƒçš„å¦‚æœæ˜¯åŸºæœ¬æ•°æ®ç±»å‹åˆ™åˆ¤æ–­å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœæ¯”è¾ƒçš„æ˜¯ <code>String</code> åˆ™è¡¨ç¤ºå¼•ç”¨åœ°å€æ˜¯å¦ç›¸ç­‰ï¼Œ <code>String</code> å­—ç¬¦ä¸²çš„å†…å®¹æ¯”è¾ƒä½¿ç”¨çš„æ˜¯ <code>equals()</code> ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line">String str1 = <span class="string">"123"</span>, str2 = <span class="string">"123"</span>;</span><br><span class="line">System.out.println(str1.equals(str2));</span><br><span class="line">System.out.println(str1 == str2);</span><br></pre></td></tr></table></figure>

<p>Kotlin ä¸­ä¹Ÿæœ‰ä¸¤ç§ç›¸ç­‰æ¯”è¾ƒæ–¹å¼ï¼š</p>
<ul>
<li><code>==</code> ï¼šå¯ä»¥å¯¹åŸºæœ¬æ•°æ®ç±»å‹ä»¥åŠ <code>String</code> ç­‰ç±»å‹è¿›è¡Œå†…å®¹æ¯”è¾ƒï¼Œç›¸å½“äº Java ä¸­çš„ <code>equals</code></li>
<li><code>===</code> ï¼šå¯¹å¼•ç”¨çš„å†…å­˜åœ°å€è¿›è¡Œæ¯”è¾ƒï¼Œç›¸å½“äº Java ä¸­çš„ <code>==</code></li>
</ul>
<p>å¯ä»¥å‘ç°ï¼ŒJava ä¸­çš„ <code>equals</code> ï¼Œåœ¨ Kotlin ä¸­ä¸ä¹‹ç›¸å¯¹åº”çš„æ˜¯ <code>==</code>ï¼Œè¿™æ ·å¯ä»¥ä½¿æˆ‘ä»¬çš„ä»£ç æ›´åŠ ç®€æ´ã€‚</p>
<p>ä¸‹é¢å†æ¥çœ‹çœ‹ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> str1 = <span class="string">"123"</span></span><br><span class="line"><span class="keyword">val</span> str2 = <span class="string">"123"</span></span><br><span class="line">println(str1 == str2) <span class="comment">// ğŸ‘ˆ å†…å®¹ç›¸ç­‰ï¼Œè¾“å‡ºï¼štrue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> str1= <span class="string">"å­—ç¬¦ä¸²"</span></span><br><span class="line"><span class="keyword">val</span> str2 = str1</span><br><span class="line"><span class="keyword">val</span> str3 = str1</span><br><span class="line">print(str2 === str3) <span class="comment">// ğŸ‘ˆ å¼•ç”¨åœ°å€ç›¸ç­‰ï¼Œè¾“å‡ºï¼štrue</span></span><br></pre></td></tr></table></figure>

<p>å…¶å® Kotlin ä¸­çš„ <code>equals</code> å‡½æ•°æ˜¯ <code>==</code> çš„æ“ä½œç¬¦é‡è½½ã€‚</p>
</li>
<li><h3 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h3><blockquote>
<p><code>in</code>  å’Œ <code>out</code> å…³é”®å­—</p>
</blockquote>
<p>javaä¸­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line">List&lt;TextView&gt; textViews = <span class="keyword">new</span> ArrayList&lt;TextView&gt;();</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ <code>List</code> è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæ³›å‹ç±»å‹ä¸º <code>TextView</code> çš„ <code>List</code>ã€‚</p>
<blockquote>
<p>ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿ</p>
<p>ç°åœ¨çš„ç¨‹åºå¼€å‘å¤§éƒ½æ˜¯é¢å‘å¯¹è±¡çš„ï¼Œå¹³æ—¶ä¼šç”¨åˆ°å„ç§ç±»å‹çš„å¯¹è±¡ï¼Œä¸€ç»„å¯¹è±¡é€šå¸¸éœ€è¦ç”¨é›†åˆæ¥å­˜å‚¨å®ƒä»¬ï¼Œå› è€Œå°±æœ‰äº†ä¸€äº›é›†åˆç±»ï¼Œæ¯”å¦‚ <code>List</code>ã€<code>Map</code> ç­‰ã€‚</p>
<p>è¿™äº›é›†åˆç±»é‡Œé¢éƒ½æ˜¯è£…çš„å…·ä½“ç±»å‹çš„å¯¹è±¡ï¼Œå¦‚æœæ¯ä¸ªç±»å‹éƒ½å»å®ç°è¯¸å¦‚ <code>TextViewList</code>ã€<code>ActivityList</code> è¿™æ ·çš„å…·ä½“çš„ç±»å‹ï¼Œæ˜¾ç„¶æ˜¯ä¸å¯èƒ½çš„ã€‚</p>
<p>å› æ­¤å°±è¯ç”Ÿäº†ã€Œæ³›å‹ã€ï¼Œå®ƒçš„æ„æ€æ˜¯æŠŠå…·ä½“çš„ç±»å‹æ³›åŒ–ï¼Œç¼–ç çš„æ—¶å€™ç”¨ç¬¦å·æ¥æŒ‡ä»£ç±»å‹ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå†ç¡®å®šå®ƒçš„ç±»å‹ã€‚</p>
<p>å‰é¢é‚£ä¸ªä¾‹å­ï¼Œ<code>List</code> å°±æ˜¯æ³›å‹ç±»å‹å£°æ˜ã€‚</p>
</blockquote>
<p>æ—¢ç„¶æ³›å‹æ˜¯è·Ÿç±»å‹ç›¸å…³çš„ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯ä¹Ÿèƒ½é€‚ç”¨ç±»å‹çš„å¤šæ€å‘¢ï¼Ÿ</p>
<p>çœ‹çœ‹ä¸€ä¸ªä½¿ç”¨åœºæ™¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line">TextView textView = <span class="keyword">new</span> Button(context);</span><br><span class="line"><span class="comment">// ğŸ‘† è¿™æ˜¯å¤šæ€</span></span><br><span class="line"></span><br><span class="line">List&lt;Button&gt; buttons = <span class="keyword">new</span> ArrayList&lt;Button&gt;();</span><br><span class="line">List&lt;TextView&gt; textViews = buttons;</span><br><span class="line"><span class="comment">// ğŸ‘† å¤šæ€ç”¨åœ¨è¿™é‡Œä¼šæŠ¥é”™ incompatible types: List&lt;Button&gt; cannot be converted to List&lt;TextView&gt;</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬çŸ¥é“ <code>Button</code> æ˜¯ç»§æ‰¿è‡ª <code>TextView</code> çš„ï¼Œæ ¹æ® Java å¤šæ€çš„ç‰¹æ€§ï¼Œç¬¬ä¸€å¤„èµ‹å€¼æ˜¯æ­£ç¡®çš„ã€‚</p>
<p>ä½†æ˜¯åˆ°äº† <code>List</code> çš„æ—¶å€™ IDE å°±æŠ¥é”™äº†ï¼Œè¿™æ˜¯å› ä¸º Java çš„æ³›å‹æœ¬èº«å…·æœ‰ã€Œä¸å¯å˜æ€§ Invarianceã€ï¼ŒJava é‡Œé¢è®¤ä¸º <code>List</code> å’Œ <code>List</code> ç±»å‹å¹¶ä¸ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå­ç±»çš„æ³›å‹ï¼ˆ<code>List</code>ï¼‰ä¸å±äºæ³›å‹ï¼ˆ<code>List</code>ï¼‰çš„å­ç±»ã€‚</p>
<blockquote>
<p>Java çš„æ³›å‹ç±»å‹ä¼šåœ¨ç¼–è¯‘æ—¶å‘ç”Ÿ<strong>ç±»å‹æ“¦é™¤</strong>ï¼Œä¸ºäº†ä¿è¯ç±»å‹å®‰å…¨ï¼Œä¸å…è®¸è¿™æ ·èµ‹å€¼</p>
<p>åœ¨ Java é‡Œç”¨æ•°ç»„åšç±»ä¼¼çš„äº‹æƒ…ï¼Œæ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼Œè¿™æ˜¯å› ä¸ºæ•°ç»„å¹¶æ²¡æœ‰åœ¨ç¼–è¯‘æ—¶æ“¦é™¤ç±»å‹.</p>
</blockquote>
<h4 id="ç±»å‹æ“¦é™¤"><a href="#ç±»å‹æ“¦é™¤" class="headerlink" title="ç±»å‹æ“¦é™¤"></a>ç±»å‹æ“¦é™¤</h4><p><a href="https://www.cnblogs.com/wuqinglong/p/9456193.html" target="_blank" rel="noopener">æ¥æº</a></p>
<blockquote>
<p>Javaçš„æ³›å‹æ˜¯ä¼ªæ³›å‹ï¼Œè¿™æ˜¯å› ä¸ºJavaåœ¨ç¼–è¯‘æœŸé—´ï¼Œæ‰€æœ‰çš„æ³›å‹ä¿¡æ¯éƒ½ä¼šè¢«æ“¦æ‰ã€‚</p>
<p>Javaçš„æ³›å‹åŸºæœ¬ä¸Šéƒ½æ˜¯åœ¨ç¼–è¯‘å™¨è¿™ä¸ªå±‚æ¬¡ä¸Šå®ç°çš„ï¼Œåœ¨ç”Ÿæˆçš„å­—èŠ‚ç ä¸­æ˜¯ä¸åŒ…å«æ³›å‹ä¸­çš„ç±»å‹ä¿¡æ¯çš„ï¼Œä½¿ç”¨æ³›å‹çš„æ—¶å€™åŠ ä¸Šç±»å‹å‚æ•°ï¼Œåœ¨ç¼–è¯‘å™¨ç¼–è¯‘çš„æ—¶å€™ä¼šå»æ‰ï¼Œè¿™ä¸ªè¿‡ç¨‹æˆä¸ºç±»å‹æ“¦é™¤ã€‚</p>
<p>å¦‚åœ¨ä»£ç ä¸­å®šä¹‰<code>List</code>å’Œ<code>List</code>ç­‰ç±»å‹ï¼Œåœ¨ç¼–è¯‘åéƒ½ä¼šå˜æˆ<code>List</code>ï¼ŒJVMçœ‹åˆ°çš„åªæ˜¯Listï¼Œè€Œç”±æ³›å‹é™„åŠ çš„ç±»å‹ä¿¡æ¯å¯¹JVMæ˜¯çœ‹ä¸åˆ°çš„ã€‚Javaç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘æ—¶å°½å¯èƒ½çš„å‘ç°å¯èƒ½å‡ºé”™çš„åœ°æ–¹ï¼Œä½†æ˜¯ä»ç„¶æ— æ³•åœ¨è¿è¡Œæ—¶åˆ»å‡ºç°çš„ç±»å‹è½¬æ¢å¼‚å¸¸çš„æƒ…å†µï¼Œç±»å‹æ“¦é™¤ä¹Ÿæ˜¯Javaçš„æ³›å‹ä¸C++æ¨¡æ¿æœºåˆ¶å®ç°æ–¹å¼ä¹‹é—´çš„é‡è¦åŒºåˆ«ã€‚</p>
</blockquote>
<ul>
<li>ä¾‹1 åŸå§‹ç±»å‹ç›¸ç­‰</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    ArrayList&lt;String&gt; list1 = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">    list1.add(<span class="string">"abc"</span>);</span><br><span class="line"></span><br><span class="line">    ArrayList&lt;Integer&gt; list2 = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">    list2.add(<span class="number">123</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(list1.getClass() == list2.getClass());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ª<code>ArrayList</code>æ•°ç»„ï¼Œä¸è¿‡ä¸€ä¸ªæ˜¯<code>ArrayList</code>æ³›å‹ç±»å‹çš„ï¼Œåªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ï¼›ä¸€ä¸ªæ˜¯<code>ArrayList</code>æ³›å‹ç±»å‹çš„ï¼Œåªèƒ½å­˜å‚¨æ•´æ•°ï¼Œæœ€åï¼Œæˆ‘ä»¬é€šè¿‡<code>list1</code>å¯¹è±¡å’Œ<code>list2</code>å¯¹è±¡çš„<code>getClass()</code>æ–¹æ³•è·å–ä»–ä»¬çš„ç±»çš„ä¿¡æ¯ï¼Œæœ€åå‘ç°ç»“æœä¸º<code>true</code>ã€‚è¯´æ˜æ³›å‹ç±»å‹<code>String</code>å’Œ<code>Integer</code>éƒ½è¢«æ“¦é™¤æ‰äº†ï¼Œåªå‰©ä¸‹åŸå§‹ç±»å‹ã€‚</p>
<ul>
<li>ä¾‹2 é€šè¿‡åå°„æ·»åŠ å…¶å®ƒç±»å‹å…ƒç´ </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line"></span><br><span class="line">list.add(<span class="number">1</span>);  <span class="comment">//è¿™æ ·è°ƒç”¨ add æ–¹æ³•åªèƒ½å­˜å‚¨æ•´å½¢ï¼Œå› ä¸ºæ³›å‹ç±»å‹çš„å®ä¾‹ä¸º Integer</span></span><br><span class="line"></span><br><span class="line">list.getClass().getMethod(<span class="string">"add"</span>, Object.class).invoke(list, <span class="string">"asd"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">    System.out.println(list.get(i));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ç¨‹åºä¸­å®šä¹‰äº†ä¸€ä¸ª<code>ArrayList</code>æ³›å‹ç±»å‹å®ä¾‹åŒ–ä¸º<code>Integer</code>å¯¹è±¡ï¼Œå¦‚æœç›´æ¥è°ƒç”¨<code>add()</code>æ–¹æ³•ï¼Œé‚£ä¹ˆåªèƒ½å­˜å‚¨æ•´æ•°æ•°æ®ï¼Œä¸è¿‡å½“æˆ‘ä»¬åˆ©ç”¨åå°„è°ƒç”¨<code>add()</code>æ–¹æ³•çš„æ—¶å€™ï¼Œå´å¯ä»¥å­˜å‚¨å­—ç¬¦ä¸²ï¼Œè¿™è¯´æ˜äº†<code>Integer</code>æ³›å‹å®ä¾‹åœ¨ç¼–è¯‘ä¹‹åè¢«æ“¦é™¤æ‰äº†ï¼Œåªä¿ç•™äº†åŸå§‹ç±»å‹ã€‚</p>
<h5 id="ç±»å‹æ“¦é™¤åä¿ç•™çš„åŸå§‹ç±»å‹"><a href="#ç±»å‹æ“¦é™¤åä¿ç•™çš„åŸå§‹ç±»å‹" class="headerlink" title="ç±»å‹æ“¦é™¤åä¿ç•™çš„åŸå§‹ç±»å‹"></a>ç±»å‹æ“¦é™¤åä¿ç•™çš„åŸå§‹ç±»å‹</h5><hr>
<blockquote>
<p><strong>åŸå§‹ç±»å‹</strong> å°±æ˜¯æ“¦é™¤å»äº†æ³›å‹ä¿¡æ¯ï¼Œæœ€ååœ¨å­—èŠ‚ç ä¸­çš„ç±»å‹å˜é‡çš„çœŸæ­£ç±»å‹ï¼Œæ— è®ºä½•æ—¶å®šä¹‰ä¸€ä¸ªæ³›å‹ï¼Œç›¸åº”çš„åŸå§‹ç±»å‹éƒ½ä¼šè¢«è‡ªåŠ¨æä¾›ï¼Œç±»å‹å˜é‡æ“¦é™¤ï¼Œå¹¶ä½¿ç”¨å…¶é™å®šç±»å‹ï¼ˆæ— é™å®šçš„å˜é‡ç”¨Objectï¼‰æ›¿æ¢ã€‚</p>
</blockquote>
<ul>
<li>ä¾‹3åŸå§‹ç±»å‹Object</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> T value;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T  value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Pairçš„åŸå§‹ç±»å‹ä¸º:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Object value;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(Object  value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºåœ¨<code>Pair</code>ä¸­ï¼ŒT æ˜¯ä¸€ä¸ªæ— é™å®šçš„ç±»å‹å˜é‡ï¼Œæ‰€ä»¥ç”¨<code>Object</code>æ›¿æ¢ï¼Œå…¶ç»“æœå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ç±»ï¼Œå¦‚åŒæ³›å‹åŠ å…¥Javaè¯­è¨€ä¹‹å‰çš„å·²ç»å®ç°çš„æ ·å­ã€‚åœ¨ç¨‹åºä¸­å¯ä»¥åŒ…å«ä¸åŒç±»å‹çš„<code>Pair</code>ï¼Œå¦‚<code>Pair</code>æˆ–<code>Pair</code>ï¼Œä½†æ˜¯æ“¦é™¤ç±»å‹åä»–ä»¬çš„å°±æˆä¸ºåŸå§‹çš„<code>Pair</code>ç±»å‹äº†ï¼ŒåŸå§‹ç±»å‹éƒ½æ˜¯<code>Object</code>ã€‚</p>
<p>ä»ä¸Šé¢çš„ä¾‹2ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ˜ç™½<code>ArrayList</code>è¢«æ“¦é™¤ç±»å‹åï¼ŒåŸå§‹ç±»å‹ä¹Ÿå˜ä¸º<code>Object</code>ï¼Œæ‰€ä»¥é€šè¿‡åå°„æˆ‘ä»¬å°±å¯ä»¥å­˜å‚¨å­—ç¬¦ä¸²äº†ã€‚</p>
<p>å¦‚æœç±»å‹å˜é‡æœ‰é™å®šï¼Œé‚£ä¹ˆåŸå§‹ç±»å‹å°±ç”¨ç¬¬ä¸€ä¸ªè¾¹ç•Œçš„ç±»å‹å˜é‡ç±»æ›¿æ¢ã€‚</p>
<p>æ¯”å¦‚: Pairè¿™æ ·å£°æ˜çš„è¯</p>
<p><code>public class Pair&lt;T extends Comparable&gt; {}</code> é‚£ä¹ˆåŸå§‹ç±»å‹å°±æ˜¯<code>Comparable</code>ã€‚</p>
<p>åœ¨è°ƒç”¨æ³›å‹æ–¹æ³•æ—¶ï¼Œå¯ä»¥æŒ‡å®šæ³›å‹ï¼Œä¹Ÿå¯ä»¥ä¸æŒ‡å®šæ³›å‹ã€‚</p>
<ul>
<li>åœ¨ä¸æŒ‡å®šæ³›å‹çš„æƒ…å†µä¸‹ï¼Œæ³›å‹å˜é‡çš„ç±»å‹ä¸ºè¯¥æ–¹æ³•ä¸­çš„å‡ ç§ç±»å‹çš„åŒä¸€çˆ¶ç±»çš„æœ€å°çº§ï¼Œç›´åˆ°Object</li>
<li>åœ¨æŒ‡å®šæ³›å‹çš„æƒ…å†µä¸‹ï¼Œè¯¥æ–¹æ³•çš„å‡ ç§ç±»å‹å¿…é¡»æ˜¯è¯¥æ³›å‹çš„å®ä¾‹çš„ç±»å‹æˆ–è€…å…¶å­ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/**ä¸æŒ‡å®šæ³›å‹çš„æ—¶å€™*/</span></span><br><span class="line">        <span class="keyword">int</span> i = Test.add(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">//è¿™ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯Integerï¼Œæ‰€ä»¥Tä¸ºIntegerç±»å‹</span></span><br><span class="line">        Number f = Test.add(<span class="number">1</span>, <span class="number">1.2</span>); <span class="comment">//è¿™ä¸¤ä¸ªå‚æ•°ä¸€ä¸ªæ˜¯Integerï¼Œä¸€ä¸ªæ˜¯Doubleï¼Œæ‰€ä»¥å–åŒä¸€çˆ¶ç±»çš„æœ€å°çº§ï¼Œä¸ºNumber</span></span><br><span class="line">        Object o = Test.add(<span class="number">1</span>, <span class="string">"asd"</span>); <span class="comment">//è¿™ä¸¤ä¸ªå‚æ•°ä¸€ä¸ªæ˜¯Integerï¼Œä¸€ä¸ªæ˜¯Stringï¼Œæ‰€ä»¥å–åŒä¸€çˆ¶ç±»çš„æœ€å°çº§ï¼Œä¸ºString</span></span><br><span class="line"></span><br><span class="line">        System.out.println(Test.add(<span class="number">1</span>, <span class="number">2</span>).getClass());</span><br><span class="line">        System.out.println(Test.add(<span class="number">1</span>, <span class="number">1.2</span>).getClass());</span><br><span class="line">        System.out.println(Test.add(<span class="number">1</span>, <span class="string">"asd"</span>).getClass());</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**æŒ‡å®šæ³›å‹çš„æ—¶å€™*/</span></span><br><span class="line">        <span class="keyword">int</span> a = Test.&lt;Integer&gt;add(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">//æŒ‡å®šäº†Integerï¼Œæ‰€ä»¥åªèƒ½ä¸ºIntegerç±»å‹æˆ–è€…å…¶å­ç±»</span></span><br><span class="line">        <span class="keyword">int</span> b = Test.&lt;Integer&gt;add(<span class="number">1</span>, <span class="number">2.2</span>); <span class="comment">//ç¼–è¯‘é”™è¯¯ï¼ŒæŒ‡å®šäº†Integerï¼Œä¸èƒ½ä¸ºDouble</span></span><br><span class="line">        Number c = Test.&lt;Number&gt;add(<span class="number">1</span>, <span class="number">2.2</span>); <span class="comment">//æŒ‡å®šä¸ºNumberï¼Œæ‰€ä»¥å¯ä»¥ä¸ºIntegerå’ŒDouble</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ³›å‹æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">add</span><span class="params">(T x,T y)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡º</p>
<p>class java.lang.Integer<br>class java.lang.Double<br>class java.lang.String</p>
<p>å…¶å®åœ¨æ³›å‹ç±»ä¸­ï¼Œä¸æŒ‡å®šæ³›å‹çš„æ—¶å€™ï¼Œä¹Ÿå·®ä¸å¤šï¼Œåªä¸è¿‡è¿™ä¸ªæ—¶å€™çš„æ³›å‹ä¸º<code>Object</code>ï¼Œå°±æ¯”å¦‚<code>ArrayList</code>ä¸­ï¼Œå¦‚æœä¸æŒ‡å®šæ³›å‹ï¼Œé‚£ä¹ˆè¿™ä¸ª<code>ArrayList</code>å¯ä»¥å­˜å‚¨ä»»æ„çš„å¯¹è±¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    ArrayList list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">    list.add(<span class="number">1</span>);</span><br><span class="line">    list.add(<span class="string">"121"</span>);</span><br><span class="line">    list.add(<span class="keyword">new</span> Date());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="ç±»å‹æ“¦é™¤å¼•èµ·çš„é—®é¢˜åŠè§£å†³æ–¹æ³•"><a href="#ç±»å‹æ“¦é™¤å¼•èµ·çš„é—®é¢˜åŠè§£å†³æ–¹æ³•" class="headerlink" title="ç±»å‹æ“¦é™¤å¼•èµ·çš„é—®é¢˜åŠè§£å†³æ–¹æ³•"></a>ç±»å‹æ“¦é™¤å¼•èµ·çš„é—®é¢˜åŠè§£å†³æ–¹æ³•</h5><hr>
<ol>
<li><p>Q: æ—¢ç„¶è¯´ç±»å‹å˜é‡ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™æ“¦é™¤æ‰ï¼Œé‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬å¾€ ArrayList åˆ›å»ºçš„å¯¹è±¡ä¸­æ·»åŠ æ•´æ•°ä¼šæŠ¥é”™å‘¢ï¼Ÿä¸æ˜¯è¯´æ³›å‹å˜é‡Stringä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™å˜ä¸ºObjectç±»å‹å—ï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½å­˜åˆ«çš„ç±»å‹å‘¢ï¼Ÿæ—¢ç„¶ç±»å‹æ“¦é™¤äº†ï¼Œå¦‚ä½•ä¿è¯æˆ‘ä»¬åªèƒ½ä½¿ç”¨æ³›å‹å˜é‡é™å®šçš„ç±»å‹å‘¢ï¼Ÿ</p>
<ul>
<li>Javaç¼–è¯‘å™¨æ˜¯é€šè¿‡å…ˆæ£€æŸ¥ä»£ç ä¸­æ³›å‹çš„ç±»å‹ï¼Œç„¶ååœ¨è¿›è¡Œç±»å‹æ“¦é™¤ï¼Œå†è¿›è¡Œç¼–è¯‘ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">list.add(<span class="string">"123"</span>);</span><br><span class="line">list.add(<span class="number">123</span>);<span class="comment">//ç¼–è¯‘é”™è¯¯</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œä½¿ç”¨<code>add</code>æ–¹æ³•æ·»åŠ ä¸€ä¸ªæ•´å‹ï¼Œåœ¨IDEä¸­ï¼Œç›´æ¥ä¼šæŠ¥é”™ï¼Œè¯´æ˜è¿™å°±æ˜¯åœ¨ç¼–è¯‘ä¹‹å‰çš„æ£€æŸ¥ï¼Œå› ä¸ºå¦‚æœæ˜¯åœ¨ç¼–è¯‘ä¹‹åæ£€æŸ¥ï¼Œç±»å‹æ“¦é™¤åï¼ŒåŸå§‹ç±»å‹ä¸º<code>Object</code>ï¼Œæ˜¯åº”è¯¥å…è®¸ä»»æ„å¼•ç”¨ç±»å‹æ·»åŠ çš„ã€‚å¯å®é™…ä¸Šå´ä¸æ˜¯è¿™æ ·çš„ï¼Œè¿™æ°æ°è¯´æ˜äº†å…³äºæ³›å‹å˜é‡çš„ä½¿ç”¨ï¼Œæ˜¯ä¼šåœ¨ç¼–è¯‘ä¹‹å‰æ£€æŸ¥çš„ã€‚</p>
</li>
<li><p>æ³›å‹ä¸­å‚æ•°è¯ç±»å‹ä¸ºä»€ä¹ˆä¸è€ƒè™‘ç»§æ‰¿å…³ç³»ï¼Ÿ</p>
<p>åœ¨Javaä¸­ï¼Œåƒä¸‹é¢å½¢å¼çš„å¼•ç”¨ä¼ é€’æ˜¯ä¸å…è®¸çš„:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;String&gt; list1 = <span class="keyword">new</span> ArrayList&lt;Object&gt;(); <span class="comment">//ç¼–è¯‘é”™è¯¯  </span></span><br><span class="line">ArrayList&lt;Object&gt; list2 = <span class="keyword">new</span> ArrayList&lt;String&gt;(); <span class="comment">//ç¼–è¯‘é”™è¯¯</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å…ˆçœ‹ç¬¬ä¸€ç§æƒ…å†µï¼Œå°†ç¬¬ä¸€ç§æƒ…å†µæ‹“å±•æˆä¸‹é¢çš„å½¢å¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;Object&gt; list1 = <span class="keyword">new</span> ArrayList&lt;Object&gt;();</span><br><span class="line">list1.add(<span class="keyword">new</span> Object());</span><br><span class="line">list1.add(<span class="keyword">new</span> Object());</span><br><span class="line">ArrayList&lt;String&gt; list2 = list1; <span class="comment">//ç¼–è¯‘é”™è¯¯</span></span><br></pre></td></tr></table></figure>

<p>å®é™…ä¸Šï¼Œåœ¨ç¬¬4è¡Œä»£ç çš„æ—¶å€™ï¼Œå°±ä¼šæœ‰ç¼–è¯‘é”™è¯¯ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å…ˆå‡è®¾å®ƒç¼–è¯‘æ²¡é”™ã€‚é‚£ä¹ˆå½“æˆ‘ä»¬ä½¿ç”¨<code>list2</code>å¼•ç”¨ç”¨<code>get()</code>æ–¹æ³•å–å€¼çš„æ—¶å€™ï¼Œè¿”å›çš„éƒ½æ˜¯<code>String</code>ç±»å‹çš„å¯¹è±¡ï¼ˆä¸Šé¢æåˆ°äº†ï¼Œç±»å‹æ£€æµ‹æ˜¯æ ¹æ®å¼•ç”¨æ¥å†³å®šçš„ï¼‰ï¼Œå¯æ˜¯å®ƒé‡Œé¢å®é™…ä¸Šå·²ç»è¢«æˆ‘ä»¬å­˜æ”¾äº†<code>Object</code>ç±»å‹çš„å¯¹è±¡ï¼Œè¿™æ ·å°±ä¼šæœ‰<code>ClassCastException</code>äº†ã€‚æ‰€ä»¥ä¸ºäº†é¿å…è¿™ç§ææ˜“å‡ºç°çš„é”™è¯¯ï¼ŒJavaä¸å…è®¸è¿›è¡Œè¿™æ ·çš„å¼•ç”¨ä¼ é€’ã€‚ï¼ˆè¿™ä¹Ÿæ˜¯æ³›å‹å‡ºç°çš„åŸå› ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³ç±»å‹è½¬æ¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¸èƒ½è¿èƒŒå®ƒçš„åˆè¡·ï¼‰ã€‚</p>
<p>å†çœ‹ç¬¬äºŒç§æƒ…å†µï¼Œå°†ç¬¬äºŒç§æƒ…å†µæ‹“å±•æˆä¸‹é¢çš„å½¢å¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;String&gt; list1 = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">list1.add(<span class="keyword">new</span> String());</span><br><span class="line">list1.add(<span class="keyword">new</span> String());</span><br><span class="line"></span><br><span class="line">ArrayList&lt;Object&gt; list2 = list1; <span class="comment">//ç¼–è¯‘é”™è¯¯</span></span><br></pre></td></tr></table></figure>

<p>æ²¡é”™ï¼Œè¿™æ ·çš„æƒ…å†µæ¯”ç¬¬ä¸€ç§æƒ…å†µå¥½çš„å¤šï¼Œæœ€èµ·ç ï¼Œåœ¨æˆ‘ä»¬ç”¨<code>list2</code>å–å€¼çš„æ—¶å€™ä¸ä¼šå‡ºç°<code>ClassCastException</code>ï¼Œå› ä¸ºæ˜¯ä»<code>String</code>è½¬æ¢ä¸º<code>Object</code>ã€‚å¯æ˜¯ï¼Œè¿™æ ·åšæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Œæ³›å‹å‡ºç°çš„åŸå› ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³ç±»å‹è½¬æ¢çš„é—®é¢˜ã€‚æˆ‘ä»¬ä½¿ç”¨äº†æ³›å‹ï¼Œåˆ°å¤´æ¥ï¼Œè¿˜æ˜¯è¦è‡ªå·±å¼ºè½¬ï¼Œè¿èƒŒäº†æ³›å‹è®¾è®¡çš„åˆè¡·ã€‚æ‰€ä»¥javaä¸å…è®¸è¿™ä¹ˆå¹²ã€‚å†è¯´ï¼Œä½ å¦‚æœåˆç”¨<code>list2</code>å¾€é‡Œé¢<code>add()</code>æ–°çš„å¯¹è±¡ï¼Œé‚£ä¹ˆåˆ°æ—¶å€™å–å¾—æ—¶å€™ï¼Œæˆ‘æ€ä¹ˆçŸ¥é“æˆ‘å–å‡ºæ¥çš„åˆ°åº•æ˜¯<code>String</code>ç±»å‹çš„ï¼Œè¿˜æ˜¯<code>Object</code>ç±»å‹çš„å‘¢ï¼Ÿ</p>
<p><strong>æ‰€ä»¥ï¼Œè¦æ ¼å¤–æ³¨æ„ï¼Œæ³›å‹ä¸­çš„å¼•ç”¨ä¼ é€’çš„é—®é¢˜ã€‚</strong></p>
</li>
<li><h5 id="è‡ªåŠ¨ç±»å‹è½¬æ¢"><a href="#è‡ªåŠ¨ç±»å‹è½¬æ¢" class="headerlink" title="è‡ªåŠ¨ç±»å‹è½¬æ¢"></a>è‡ªåŠ¨ç±»å‹è½¬æ¢</h5><p>å› ä¸ºç±»å‹æ“¦é™¤çš„é—®é¢˜ï¼Œæ‰€ä»¥æ‰€æœ‰çš„æ³›å‹ç±»å‹å˜é‡æœ€åéƒ½ä¼šè¢«æ›¿æ¢ä¸ºåŸå§‹ç±»å‹ã€‚</p>
<p>æ—¢ç„¶éƒ½è¢«æ›¿æ¢ä¸ºåŸå§‹ç±»å‹ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨è·å–çš„æ—¶å€™ï¼Œä¸éœ€è¦è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢å‘¢ï¼Ÿ</p>
<p>çœ‹ä¸‹<code>ArrayList.get()</code>æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    RangeCheck(index);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (E) elementData[index];</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨<code>return</code>ä¹‹å‰ï¼Œä¼šæ ¹æ®æ³›å‹å˜é‡è¿›è¡Œå¼ºè½¬ã€‚å‡è®¾æ³›å‹ç±»å‹å˜é‡ä¸º<code>Date</code>ï¼Œè™½ç„¶æ³›å‹ä¿¡æ¯ä¼šè¢«æ“¦é™¤æ‰ï¼Œä½†æ˜¯ä¼šå°†<code>(E) elementData[index]</code>ï¼Œç¼–è¯‘ä¸º<code>(Date)elementData[index]</code>ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸ç”¨è‡ªå·±è¿›è¡Œå¼ºè½¬ã€‚å½“å­˜å–ä¸€ä¸ªæ³›å‹åŸŸæ—¶ä¹Ÿä¼šè‡ªåŠ¨æ’å…¥å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚å‡è®¾<code>Pair</code>ç±»çš„<code>value</code>åŸŸæ˜¯<code>public</code>çš„ï¼Œé‚£ä¹ˆè¡¨è¾¾å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Date date = pair.value;</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿä¼šè‡ªåŠ¨åœ°åœ¨ç»“æœå­—èŠ‚ç ä¸­æ’å…¥å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</p>
</li>
<li><h5 id="ç±»å‹æ“¦é™¤ä¸å¤šæ€çš„å†²çªå’Œè§£å†³æ–¹æ³•"><a href="#ç±»å‹æ“¦é™¤ä¸å¤šæ€çš„å†²çªå’Œè§£å†³æ–¹æ³•" class="headerlink" title="ç±»å‹æ“¦é™¤ä¸å¤šæ€çš„å†²çªå’Œè§£å†³æ–¹æ³•"></a>ç±»å‹æ“¦é™¤ä¸å¤šæ€çš„å†²çªå’Œè§£å†³æ–¹æ³•</h5><p>ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªæ³›å‹ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> T value;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ä»¬æƒ³è¦ä¸€ä¸ªå­ç±»ç»§æ‰¿å®ƒã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DateInter</span> <span class="keyword">extends</span> <span class="title">Pair</span>&lt;<span class="title">Date</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(Date value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.setValue(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getValue();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªå­ç±»ä¸­ï¼Œæˆ‘ä»¬è®¾å®šçˆ¶ç±»çš„æ³›å‹ç±»å‹ä¸º<code>Pair</code>ï¼Œåœ¨å­ç±»ä¸­ï¼Œæˆ‘ä»¬è¦†ç›–äº†çˆ¶ç±»çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬çš„åŸæ„æ˜¯è¿™æ ·çš„ï¼šå°†çˆ¶ç±»çš„æ³›å‹ç±»å‹é™å®šä¸º<code>Date</code>ï¼Œé‚£ä¹ˆçˆ¶ç±»é‡Œé¢çš„ä¸¤ä¸ªæ–¹æ³•çš„å‚æ•°éƒ½ä¸º<code>Date</code>ç±»å‹ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨å­ç±»ä¸­é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•ä¸€ç‚¹é—®é¢˜ä¹Ÿæ²¡æœ‰ï¼Œå®é™…ä¸Šï¼Œä»ä»–ä»¬çš„<code>@Override</code>æ ‡ç­¾ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œä¸€ç‚¹é—®é¢˜ä¹Ÿæ²¡æœ‰ï¼Œå®é™…ä¸Šæ˜¯è¿™æ ·çš„å—ï¼Ÿ</p>
<p>åˆ†æï¼šå®é™…ä¸Šï¼Œç±»å‹æ“¦é™¤åï¼Œçˆ¶ç±»çš„çš„æ³›å‹ç±»å‹å…¨éƒ¨å˜ä¸ºäº†åŸå§‹ç±»å‹<code>Object</code>ï¼Œæ‰€ä»¥çˆ¶ç±»ç¼–è¯‘ä¹‹åä¼šå˜æˆä¸‹é¢çš„æ ·å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Object value;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(Object  value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…ˆæ¥åˆ†æ<code>setValue</code>æ–¹æ³•ï¼Œçˆ¶ç±»çš„ç±»å‹æ˜¯<code>Object</code>ï¼Œè€Œå­ç±»çš„ç±»å‹æ˜¯<code>Date</code>ï¼Œå‚æ•°ç±»å‹ä¸ä¸€æ ·ï¼Œè¿™å¦‚æœå®åœ¨æ™®é€šçš„ç»§æ‰¿å…³ç³»ä¸­ï¼Œæ ¹æœ¬å°±ä¸ä¼šæ˜¯é‡å†™ï¼Œè€Œæ˜¯é‡è½½ã€‚</p>
<p>æˆ‘ä»¬åœ¨ä¸€ä¸ªmainæ–¹æ³•æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DateInter dateInter = <span class="keyword">new</span> DateInter();</span><br><span class="line">dateInter.setValue(<span class="keyword">new</span> Date());</span><br><span class="line">dateInter.setValue(<span class="keyword">new</span> Object()); <span class="comment">//ç¼–è¯‘é”™è¯¯</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ˜¯é‡è½½ï¼Œé‚£ä¹ˆå­ç±»ä¸­ä¸¤ä¸ª<code>setValue</code>æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯å‚æ•°<code>Object</code>ç±»å‹ï¼Œä¸€ä¸ªæ˜¯<code>Date</code>ç±»å‹ï¼Œå¯æ˜¯æˆ‘ä»¬å‘ç°ï¼Œæ ¹æœ¬å°±æ²¡æœ‰è¿™æ ·çš„ä¸€ä¸ªå­ç±»ç»§æ‰¿è‡ªçˆ¶ç±»çš„Objectç±»å‹å‚æ•°çš„æ–¹æ³•ã€‚æ‰€ä»¥è¯´ï¼Œå´æ˜¯æ˜¯é‡å†™äº†ï¼Œè€Œä¸æ˜¯é‡è½½äº†ã€‚</p>
<p>???????????????</p>
<p>åŸå› æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬ä¼ å…¥çˆ¶ç±»çš„æ³›å‹ç±»å‹æ˜¯<code>Dateï¼ŒPair</code>ï¼Œæˆ‘ä»¬çš„æœ¬æ„æ˜¯å°†æ³›å‹ç±»å˜ä¸ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Date value;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(Date value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå†å­ç±»ä¸­é‡å†™å‚æ•°ç±»å‹ä¸ºDateçš„é‚£ä¸¤ä¸ªæ–¹æ³•ï¼Œå®ç°ç»§æ‰¿ä¸­çš„å¤šæ€ã€‚</p>
<p>å¯æ˜¯ç”±äºç§ç§åŸå› ï¼Œè™šæ‹Ÿæœºå¹¶ä¸èƒ½å°†æ³›å‹ç±»å‹å˜ä¸º<code>Date</code>ï¼Œåªèƒ½å°†ç±»å‹æ“¦é™¤æ‰ï¼Œå˜ä¸ºåŸå§‹ç±»å‹<code>Object</code>ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬çš„æœ¬æ„æ˜¯è¿›è¡Œé‡å†™ï¼Œå®ç°å¤šæ€ã€‚å¯æ˜¯ç±»å‹æ“¦é™¤åï¼Œåªèƒ½å˜ä¸ºäº†é‡è½½ã€‚è¿™æ ·ï¼Œç±»å‹æ“¦é™¤å°±å’Œå¤šæ€æœ‰äº†å†²çªã€‚JVMçŸ¥é“ä½ çš„æœ¬æ„å—ï¼ŸçŸ¥é“ï¼ï¼ï¼å¯æ˜¯å®ƒèƒ½ç›´æ¥å®ç°å—ï¼Œä¸èƒ½ï¼ï¼ï¼å¦‚æœçœŸçš„ä¸èƒ½çš„è¯ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆå»é‡å†™æˆ‘ä»¬æƒ³è¦çš„<code>Date</code>ç±»å‹å‚æ•°çš„æ–¹æ³•å•Šã€‚</p>
<p>äºæ˜¯JVMé‡‡ç”¨äº†ä¸€ä¸ªç‰¹æ®Šçš„æ–¹æ³•ï¼Œæ¥å®Œæˆè¿™é¡¹åŠŸèƒ½ï¼Œé‚£å°±æ˜¯æ¡¥æ–¹æ³•ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬ç”¨<code>javap -c className</code>çš„æ–¹å¼åç¼–è¯‘ä¸‹<code>DateInter</code>å­ç±»çš„å­—èŠ‚ç ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">tao</span>.<span class="title">test</span>.<span class="title">DateInter</span> <span class="keyword">extends</span> <span class="title">com</span>.<span class="title">tao</span>.<span class="title">test</span>.<span class="title">Pair</span>&lt;<span class="title">java</span>.<span class="title">util</span>.<span class="title">Date</span>&gt; </span>&#123;</span><br><span class="line">        com.tao.test.DateInter();</span><br><span class="line">        Code:</span><br><span class="line">        <span class="number">0</span>: aload_0</span><br><span class="line">        1: invokespecial #8                  // Method com/tao/test/Pair."&lt;init&gt;":()V  </span><br><span class="line">        <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(java.util.Date)</span></span>;  <span class="comment">//æˆ‘ä»¬é‡å†™çš„setValueæ–¹æ³•  </span></span><br><span class="line">        Code:</span><br><span class="line">        <span class="number">0</span>: aload_0</span><br><span class="line">        <span class="number">1</span>: aload_1</span><br><span class="line">        2: invokespecial #16                 // Method com/tao/test/Pair.setValue:(Ljava/lang/Object;)V  </span><br><span class="line">        <span class="number">5</span>: <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> java.util.<span class="function">Date <span class="title">getValue</span><span class="params">()</span></span>;    <span class="comment">//æˆ‘ä»¬é‡å†™çš„getValueæ–¹æ³•  </span></span><br><span class="line">        Code:</span><br><span class="line">        <span class="number">0</span>: aload_0</span><br><span class="line">        1: invokespecial #23                 // Method com/tao/test/Pair.getValue:()Ljava/lang/Object;  </span><br><span class="line">        4: checkcast     #26                 // class java/util/Date  </span><br><span class="line">        <span class="number">7</span>: areturn</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> java.lang.<span class="function">Object <span class="title">getValue</span><span class="params">()</span></span>;     <span class="comment">//ç¼–è¯‘æ—¶ç”±ç¼–è¯‘å™¨ç”Ÿæˆçš„å·§æ–¹æ³•  </span></span><br><span class="line">        Code:</span><br><span class="line">        <span class="number">0</span>: aload_0</span><br><span class="line">        1: invokevirtual #28                 // Method getValue:()Ljava/util/Date å»è°ƒç”¨æˆ‘ä»¬é‡å†™çš„getValueæ–¹æ³•;  </span><br><span class="line">        <span class="number">4</span>: areturn</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(java.lang.Object)</span></span>;   <span class="comment">//ç¼–è¯‘æ—¶ç”±ç¼–è¯‘å™¨ç”Ÿæˆçš„å·§æ–¹æ³•  </span></span><br><span class="line">        Code:</span><br><span class="line">        <span class="number">0</span>: aload_0</span><br><span class="line">        <span class="number">1</span>: aload_1</span><br><span class="line">        2: checkcast     #26                 // class java/util/Date  </span><br><span class="line">        5: invokevirtual #30                 // Method setValue:(Ljava/util/Date; å»è°ƒç”¨æˆ‘ä»¬é‡å†™çš„setValueæ–¹æ³•)V  </span><br><span class="line">        <span class="number">8</span>: <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»ç¼–è¯‘çš„ç»“æœæ¥çœ‹ï¼Œæˆ‘ä»¬æœ¬æ„é‡å†™<code>setValue</code>å’Œ<code>getValue</code>æ–¹æ³•çš„å­ç±»ï¼Œç«Ÿç„¶æœ‰4ä¸ªæ–¹æ³•ï¼Œå…¶å®ä¸ç”¨æƒŠå¥‡ï¼Œæœ€åçš„ä¸¤ä¸ªæ–¹æ³•ï¼Œå°±æ˜¯ç¼–è¯‘å™¨è‡ªå·±ç”Ÿæˆçš„æ¡¥æ–¹æ³•ã€‚å¯ä»¥çœ‹åˆ°æ¡¥æ–¹æ³•çš„å‚æ•°ç±»å‹éƒ½æ˜¯Objectï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå­ç±»ä¸­çœŸæ­£è¦†ç›–çˆ¶ç±»ä¸¤ä¸ªæ–¹æ³•çš„å°±æ˜¯è¿™ä¸¤ä¸ªæˆ‘ä»¬çœ‹ä¸åˆ°çš„æ¡¥æ–¹æ³•ã€‚è€Œæ‰“åœ¨æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„<code>setvalue</code>å’Œ<code>getValue</code>æ–¹æ³•ä¸Šé¢çš„<code>@Oveerride</code>åªä¸è¿‡æ˜¯å‡è±¡ã€‚è€Œæ¡¥æ–¹æ³•çš„å†…éƒ¨å®ç°ï¼Œå°±åªæ˜¯å»è°ƒç”¨æˆ‘ä»¬è‡ªå·±é‡å†™çš„é‚£ä¸¤ä¸ªæ–¹æ³•ã€‚</p>
<p>æ‰€ä»¥ï¼Œè™šæ‹Ÿæœºå·§å¦™çš„ä½¿ç”¨äº†æ¡¥æ–¹æ³•ï¼Œæ¥è§£å†³äº†ç±»å‹æ“¦é™¤å’Œå¤šæ€çš„å†²çªã€‚</p>
<p>ä¸è¿‡ï¼Œè¦æåˆ°ä¸€ç‚¹ï¼Œè¿™é‡Œé¢çš„<code>setValue</code>å’Œ<code>getValue</code>è¿™ä¸¤ä¸ªæ¡¥æ–¹æ³•çš„æ„ä¹‰åˆæœ‰ä¸åŒã€‚</p>
<p><code>setValue</code>æ–¹æ³•æ˜¯ä¸ºäº†è§£å†³ç±»å‹æ“¦é™¤ä¸å¤šæ€ä¹‹é—´çš„å†²çªã€‚</p>
<p>è€Œ<code>getValue</code>å´æœ‰æ™®éçš„æ„ä¹‰ï¼Œæ€ä¹ˆè¯´å‘¢ï¼Œå¦‚æœè¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„ç»§æ‰¿å…³ç³»ï¼š</p>
<p>é‚£ä¹ˆçˆ¶ç±»çš„<code>getValue</code>æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">getValue</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">super</span>.getValue();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€Œå­ç±»é‡å†™çš„æ–¹æ³•æ˜¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Date <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.getValue();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶å®è¿™åœ¨æ™®é€šçš„ç±»ç»§æ‰¿ä¸­ä¹Ÿæ˜¯æ™®éå­˜åœ¨çš„é‡å†™ï¼Œè¿™å°±æ˜¯åå˜ã€‚</p>
</li>
<li><h5 id="æ³›å‹ç±»å‹å˜é‡ä¸èƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹"><a href="#æ³›å‹ç±»å‹å˜é‡ä¸èƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="æ³›å‹ç±»å‹å˜é‡ä¸èƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹"></a>æ³›å‹ç±»å‹å˜é‡ä¸èƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹</h5><p>ä¸èƒ½ç”¨ç±»å‹å‚æ•°æ›¿æ¢åŸºæœ¬ç±»å‹ã€‚å°±æ¯”å¦‚ï¼Œæ²¡æœ‰<code>ArrayList</code>ï¼Œåªæœ‰<code>ArrayList</code>ã€‚å› ä¸ºå½“ç±»å‹æ“¦é™¤åï¼Œ<code>ArrayList</code>çš„åŸå§‹ç±»å‹å˜ä¸º<code>Object</code>ï¼Œä½†æ˜¯<code>Object</code>ç±»å‹ä¸èƒ½å­˜å‚¨<code>double</code>å€¼ï¼Œåªèƒ½å¼•ç”¨<code>Double</code>çš„å€¼ã€‚</p>
<h5 id="è¿è¡Œæ—¶ç±»å‹æŸ¥è¯¢"><a href="#è¿è¡Œæ—¶ç±»å‹æŸ¥è¯¢" class="headerlink" title="è¿è¡Œæ—¶ç±»å‹æŸ¥è¯¢"></a>è¿è¡Œæ—¶ç±»å‹æŸ¥è¯¢</h5><p><code>ArrayList&lt;String&gt; arrayList = new ArrayList&lt;String&gt;();</code></p>
<p>å› ä¸ºç±»å‹æ“¦é™¤ä¹‹åï¼Œ<code>ArrayList</code>åªå‰©ä¸‹åŸå§‹ç±»å‹ï¼Œæ³›å‹ä¿¡æ¯<code>String</code>ä¸å­˜åœ¨äº†ã€‚</p>
<p>é‚£ä¹ˆï¼Œè¿è¡Œæ—¶è¿›è¡Œç±»å‹æŸ¥è¯¢çš„æ—¶å€™ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•æ˜¯é”™è¯¯çš„</p>
<p><code>if( arrayList instanceof ArrayList&lt;String&gt;)</code></p>
</li>
<li><h5 id="æ³›å‹åœ¨é™æ€æ–¹æ³•å’Œé™æ€ç±»ä¸­çš„é—®é¢˜"><a href="#æ³›å‹åœ¨é™æ€æ–¹æ³•å’Œé™æ€ç±»ä¸­çš„é—®é¢˜" class="headerlink" title="æ³›å‹åœ¨é™æ€æ–¹æ³•å’Œé™æ€ç±»ä¸­çš„é—®é¢˜"></a>æ³›å‹åœ¨é™æ€æ–¹æ³•å’Œé™æ€ç±»ä¸­çš„é—®é¢˜</h5><p>æ³›å‹ç±»ä¸­çš„é™æ€æ–¹æ³•å’Œé™æ€å˜é‡ä¸å¯ä»¥ä½¿ç”¨æ³›å‹ç±»æ‰€å£°æ˜çš„æ³›å‹ç±»å‹å‚æ•°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test2</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> T one;   <span class="comment">//ç¼–è¯‘é”™è¯¯    </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span>  T <span class="title">show</span><span class="params">(T one)</span></span>&#123; <span class="comment">//ç¼–è¯‘é”™è¯¯    </span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºæ³›å‹ç±»ä¸­çš„æ³›å‹å‚æ•°çš„å®ä¾‹åŒ–æ˜¯åœ¨å®šä¹‰å¯¹è±¡çš„æ—¶å€™æŒ‡å®šçš„ï¼Œè€Œé™æ€å˜é‡å’Œé™æ€æ–¹æ³•ä¸éœ€è¦ä½¿ç”¨å¯¹è±¡æ¥è°ƒç”¨ã€‚å¯¹è±¡éƒ½æ²¡æœ‰åˆ›å»ºï¼Œå¦‚ä½•ç¡®å®šè¿™ä¸ªæ³›å‹å‚æ•°æ˜¯ä½•ç§ç±»å‹ï¼Œæ‰€ä»¥å½“ç„¶æ˜¯é”™è¯¯çš„ã€‚</p>
<p>ä½†æ˜¯è¦æ³¨æ„åŒºåˆ†ä¸‹é¢çš„ä¸€ç§æƒ…å†µï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test2</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T &gt;<span class="function">T <span class="title">show</span><span class="params">(T one)</span></span>&#123; <span class="comment">//è¿™æ˜¯æ­£ç¡®çš„    </span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºè¿™æ˜¯ä¸€ä¸ªæ³›å‹æ–¹æ³•ï¼Œåœ¨æ³›å‹æ–¹æ³•ä¸­ä½¿ç”¨çš„Tæ˜¯è‡ªå·±åœ¨æ–¹æ³•ä¸­å®šä¹‰çš„ Tï¼Œè€Œä¸æ˜¯æ³›å‹ç±»ä¸­çš„Tã€‚</p>
</li>
</ol>
<h3 id="Java-ä¸­çš„-extends"><a href="#Java-ä¸­çš„-extends" class="headerlink" title="Java ä¸­çš„ ? extends"></a>Java ä¸­çš„ <code>? extends</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line">List&lt;Button&gt; buttons = <span class="keyword">new</span> ArrayList&lt;Button&gt;();</span><br><span class="line">      ğŸ‘‡</span><br><span class="line">List&lt;? extends TextView&gt; textViews = buttons;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ª <code>? extends</code> å«åšã€Œä¸Šç•Œé€šé…ç¬¦ã€ï¼Œå¯ä»¥ä½¿ Java æ³›å‹å…·æœ‰ã€Œåå˜æ€§ Covarianceã€ï¼Œåå˜å°±æ˜¯å…è®¸ä¸Šé¢çš„èµ‹å€¼æ˜¯åˆæ³•çš„ã€‚</p>
<blockquote>
<p>åœ¨ç»§æ‰¿å…³ç³»æ ‘ä¸­ï¼Œå­ç±»ç»§æ‰¿è‡ªçˆ¶ç±»ï¼Œå¯ä»¥è®¤ä¸ºçˆ¶ç±»åœ¨ä¸Šï¼Œå­ç±»åœ¨ä¸‹ã€‚<code>extends</code> é™åˆ¶äº†æ³›å‹ç±»å‹çš„çˆ¶ç±»å‹ï¼Œæ‰€ä»¥å«ä¸Šç•Œã€‚</p>
</blockquote>
<p>å®ƒæœ‰ä¸¤å±‚æ„æ€ï¼š</p>
<ul>
<li>å…¶ä¸­ <code>?</code> æ˜¯ä¸ªé€šé…ç¬¦ï¼Œè¡¨ç¤ºè¿™ä¸ª <code>List</code> çš„æ³›å‹ç±»å‹æ˜¯ä¸€ä¸ª<strong>æœªçŸ¥ç±»å‹</strong>ã€‚</li>
<li><code>extends</code> é™åˆ¶äº†è¿™ä¸ªæœªçŸ¥ç±»å‹çš„ä¸Šç•Œï¼Œä¹Ÿå°±æ˜¯æ³›å‹ç±»å‹å¿…é¡»æ»¡è¶³è¿™ä¸ª <code>extends</code> çš„é™åˆ¶æ¡ä»¶ï¼Œè¿™é‡Œå’Œå®šä¹‰ <code>class</code> çš„ <code>extends</code> å…³é”®å­—æœ‰ç‚¹ä¸ä¸€æ ·ï¼š<ul>
<li>å®ƒçš„èŒƒå›´ä¸ä»…æ˜¯æ‰€æœ‰ç›´æ¥å’Œé—´æ¥å­ç±»ï¼Œè¿˜åŒ…æ‹¬ä¸Šç•Œå®šä¹‰çš„çˆ¶ç±»æœ¬èº«ï¼Œä¹Ÿå°±æ˜¯ <code>TextView</code>ã€‚</li>
<li>å®ƒè¿˜æœ‰ <code>implements</code> çš„æ„æ€ï¼Œå³è¿™é‡Œçš„ä¸Šç•Œä¹Ÿå¯ä»¥æ˜¯ <code>interface</code>ã€‚</li>
</ul>
</li>
</ul>
<p>è¿™é‡Œ <code>Button</code> æ˜¯ <code>TextView</code> çš„å­ç±»ï¼Œæ»¡è¶³äº†æ³›å‹ç±»å‹çš„é™åˆ¶æ¡ä»¶ï¼Œå› è€Œèƒ½å¤ŸæˆåŠŸèµ‹å€¼ã€‚</p>
<p>ä¸‹é¢å‡ ç§æƒ…å†µéƒ½æ˜¯å¯ä»¥çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line">List&lt;? extends TextView&gt; textViews = <span class="keyword">new</span> ArrayList&lt;TextView&gt;(); <span class="comment">// ğŸ‘ˆ æœ¬èº«</span></span><br><span class="line">List&lt;? extends TextView&gt; textViews = <span class="keyword">new</span> ArrayList&lt;Button&gt;(); <span class="comment">// ğŸ‘ˆ ç›´æ¥å­ç±»</span></span><br><span class="line">List&lt;? extends TextView&gt; textViews = <span class="keyword">new</span> ArrayList&lt;RadioButton&gt;(); <span class="comment">// ğŸ‘ˆ é—´æ¥å­ç±»</span></span><br></pre></td></tr></table></figure>

<p>ä¸€èˆ¬é›†åˆç±»éƒ½åŒ…å«äº† <code>get</code> å’Œ <code>add</code> ä¸¤ç§æ“ä½œï¼Œæ¯”å¦‚ Java ä¸­çš„ <code>List</code>ï¼Œå®ƒçš„å…·ä½“å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">List</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">Collection</span>&lt;<span class="title">E</span>&gt;</span>&#123;</span><br><span class="line">    <span class="function">E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span></span>;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>E</code> å°±æ˜¯è¡¨ç¤ºæ³›å‹ç±»å‹çš„ç¬¦å·ï¼ˆç”¨å…¶ä»–å­—æ¯ç”šè‡³å•è¯éƒ½å¯ä»¥ï¼‰ã€‚</p>
<p>æˆ‘ä»¬çœ‹çœ‹åœ¨ä½¿ç”¨äº†ä¸Šç•Œé€šé…ç¬¦ä¹‹åï¼Œ<code>List</code> çš„ä½¿ç”¨ä¸Šæœ‰æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line">List&lt;? extends TextView&gt; textViews = <span class="keyword">new</span> ArrayList&lt;Button&gt;();</span><br><span class="line">TextView textView = textViews.get(<span class="number">0</span>); <span class="comment">// ğŸ‘ˆ get å¯ä»¥</span></span><br><span class="line">textViews.add(textView);</span><br><span class="line"><span class="comment">//             ğŸ‘† add ä¼šæŠ¥é”™ï¼Œno suitable method found for add(TextView)</span></span><br></pre></td></tr></table></figure>

<p>å‰é¢è¯´åˆ° <code>List</code> çš„æ³›å‹ç±»å‹æ˜¯ä¸ªæœªçŸ¥ç±»å‹ <code>?</code>ï¼Œç¼–è¯‘å™¨ä¹Ÿä¸ç¡®å®šå®ƒæ˜¯å•¥ç±»å‹ï¼Œåªæ˜¯æœ‰ä¸ªé™åˆ¶æ¡ä»¶ã€‚</p>
<p>ç”±äºå®ƒæ»¡è¶³ <code>? extends TextView</code> çš„é™åˆ¶æ¡ä»¶ï¼Œæ‰€ä»¥ <code>get</code> å‡ºæ¥çš„å¯¹è±¡ï¼Œè‚¯å®šæ˜¯ <code>TextView</code> çš„å­ç±»å‹ï¼Œæ ¹æ®å¤šæ€çš„ç‰¹æ€§ï¼Œèƒ½å¤Ÿèµ‹å€¼ç»™ <code>TextView</code>ï¼Œå•°å—¦ä¸€å¥ï¼Œèµ‹å€¼ç»™ <code>View</code> ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚</p>
<p>åˆ°äº† <code>add</code> æ“ä½œçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆç†è§£ï¼š</p>
<ul>
<li><code>List</code> ç”±äºç±»å‹æœªçŸ¥ï¼Œå®ƒå¯èƒ½æ˜¯ <code>List</code>ï¼Œä¹Ÿå¯èƒ½æ˜¯ <code>List</code>ã€‚</li>
<li>å¯¹äºå‰è€…ï¼Œæ˜¾ç„¶æˆ‘ä»¬è¦æ·»åŠ  TextView æ˜¯ä¸å¯ä»¥çš„ã€‚</li>
<li>å®é™…æƒ…å†µæ˜¯ç¼–è¯‘å™¨æ— æ³•ç¡®å®šåˆ°åº•å±äºå“ªä¸€ç§ï¼Œæ— æ³•ç»§ç»­æ‰§è¡Œä¸‹å»ï¼Œå°±æŠ¥é”™äº†ã€‚</li>
</ul>
<p>é‚£æˆ‘å¹²è„†ä¸è¦ <code>extends TextView</code> ï¼Œåªç”¨é€šé…ç¬¦ <code>?</code> å‘¢ï¼Ÿè¿™æ ·ä½¿ç”¨ <code>List</code> å…¶å®æ˜¯ <code>List</code> çš„ç¼©å†™ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line">List&lt;Button&gt; buttons = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">List&lt;?&gt; list = buttons;</span><br><span class="line">Object obj = list.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">list.add(obj); <span class="comment">// ğŸ‘ˆ è¿™é‡Œè¿˜æ˜¯ä¼šæŠ¥é”™</span></span><br></pre></td></tr></table></figure>

<p>å’Œå‰é¢çš„ä¾‹å­ä¸€æ ·ï¼Œç¼–è¯‘å™¨æ²¡æ³•ç¡®å®š <code>?</code> çš„ç±»å‹ï¼Œæ‰€ä»¥è¿™é‡Œå°±åªèƒ½ <code>get</code> åˆ° <code>Object</code> å¯¹è±¡ã€‚</p>
<p>åŒæ—¶ç¼–è¯‘å™¨ä¸ºäº†ä¿è¯ç±»å‹å®‰å…¨ï¼Œä¹Ÿä¸èƒ½å‘ <code>List</code> ä¸­æ·»åŠ ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼Œç†ç”±åŒä¸Šã€‚</p>
<p>ç”±äº <code>add</code> çš„è¿™ä¸ªé™åˆ¶ï¼Œä½¿ç”¨äº† <code>? extends</code> æ³›å‹é€šé…ç¬¦çš„ <code>List</code>ï¼Œåªèƒ½å¤Ÿå‘å¤–æä¾›æ•°æ®è¢«æ¶ˆè´¹ï¼Œä»è¿™ä¸ªè§’åº¦æ¥è®²ï¼Œå‘å¤–æä¾›æ•°æ®çš„ä¸€æ–¹ç§°ä¸ºã€Œç”Ÿäº§è€… Producerã€ã€‚å¯¹åº”çš„è¿˜æœ‰ä¸€ä¸ªæ¦‚å¿µå«ã€Œæ¶ˆè´¹è€… Consumerã€ï¼Œå¯¹åº” Java é‡Œé¢å¦ä¸€ä¸ªæ³›å‹é€šé…ç¬¦ <code>? super</code>ã€‚</p>
<h3 id="Java-ä¸­çš„-super"><a href="#Java-ä¸­çš„-super" class="headerlink" title="Java ä¸­çš„ ? super"></a>Java ä¸­çš„ <code>? super</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line">     ğŸ‘‡</span><br><span class="line">List&lt;? <span class="keyword">super</span> Button&gt; buttons = <span class="keyword">new</span> ArrayList&lt;TextView&gt;();</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ª <code>? super</code> å«åšã€Œä¸‹ç•Œé€šé…ç¬¦ã€ï¼Œå¯ä»¥ä½¿ Java æ³›å‹å…·æœ‰ã€Œé€†å˜æ€§ Contravarianceã€ã€‚</p>
<blockquote>
<p>ä¸ä¸Šç•Œé€šé…ç¬¦å¯¹åº”ï¼Œè¿™é‡Œ super é™åˆ¶äº†é€šé…ç¬¦ ? çš„å­ç±»å‹ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºä¸‹ç•Œã€‚</p>
</blockquote>
<p>å®ƒä¹Ÿæœ‰ä¸¤å±‚æ„æ€ï¼š</p>
<ul>
<li>é€šé…ç¬¦ <code>?</code> è¡¨ç¤º <code>List</code> çš„æ³›å‹ç±»å‹æ˜¯ä¸€ä¸ª<strong>æœªçŸ¥ç±»å‹</strong>ã€‚</li>
<li><code>super</code> é™åˆ¶äº†è¿™ä¸ªæœªçŸ¥ç±»å‹çš„ä¸‹ç•Œï¼Œä¹Ÿå°±æ˜¯æ³›å‹ç±»å‹å¿…é¡»æ»¡è¶³è¿™ä¸ª <code>super</code> çš„é™åˆ¶æ¡ä»¶ã€‚<ul>
<li><code>super</code> æˆ‘ä»¬åœ¨ç±»çš„æ–¹æ³•é‡Œé¢ç»å¸¸ç”¨åˆ°ï¼Œè¿™é‡Œçš„èŒƒå›´ä¸ä»…åŒ…æ‹¬ <code>Button</code> çš„ç›´æ¥å’Œé—´æ¥çˆ¶ç±»ï¼Œä¹ŸåŒ…æ‹¬ä¸‹ç•Œ <code>Button</code> æœ¬èº«ã€‚</li>
<li><code>super</code> åŒæ ·æ”¯æŒ <code>interface</code>ã€‚</li>
</ul>
</li>
</ul>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ<code>TextView</code> æ˜¯ <code>Button</code> çš„çˆ¶ç±»å‹ ï¼Œä¹Ÿå°±èƒ½å¤Ÿæ»¡è¶³ <code>super</code> çš„é™åˆ¶æ¡ä»¶ï¼Œå°±å¯ä»¥æˆåŠŸèµ‹å€¼äº†ã€‚</p>
<p>æ ¹æ®åˆšæ‰çš„æè¿°ï¼Œä¸‹é¢å‡ ç§æƒ…å†µéƒ½æ˜¯å¯ä»¥çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line">List&lt;? <span class="keyword">super</span> Button&gt; buttons = <span class="keyword">new</span> ArrayList&lt;Button&gt;(); <span class="comment">// ğŸ‘ˆ æœ¬èº«</span></span><br><span class="line">List&lt;? <span class="keyword">super</span> Button&gt; buttons = <span class="keyword">new</span> ArrayList&lt;TextView&gt;(); <span class="comment">// ğŸ‘ˆ ç›´æ¥çˆ¶ç±»</span></span><br><span class="line">List&lt;? <span class="keyword">super</span> Button&gt; buttons = <span class="keyword">new</span> ArrayList&lt;Object&gt;(); <span class="comment">// ğŸ‘ˆ é—´æ¥çˆ¶ç±»</span></span><br></pre></td></tr></table></figure>

<p>å¯¹äºä½¿ç”¨äº†ä¸‹ç•Œé€šé…ç¬¦çš„ <code>List</code>ï¼Œæˆ‘ä»¬å†çœ‹çœ‹å®ƒçš„ <code>get</code> å’Œ <code>add</code> æ“ä½œï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line">List&lt;? <span class="keyword">super</span> Button&gt; buttons = <span class="keyword">new</span> ArrayList&lt;TextView&gt;();</span><br><span class="line">Object object = buttons.get(<span class="number">0</span>); <span class="comment">// ğŸ‘ˆ get å‡ºæ¥çš„æ˜¯ Object ç±»å‹</span></span><br><span class="line">Button button = ...</span><br><span class="line">buttons.add(button); <span class="comment">// ğŸ‘ˆ add æ“ä½œæ˜¯å¯ä»¥çš„</span></span><br></pre></td></tr></table></figure>

<p>è§£é‡Šä¸‹ï¼Œé¦–å…ˆ <code>?</code> è¡¨ç¤ºæœªçŸ¥ç±»å‹ï¼Œç¼–è¯‘å™¨æ˜¯ä¸ç¡®å®šå®ƒçš„ç±»å‹çš„ã€‚</p>
<p>è™½ç„¶ä¸çŸ¥é“å®ƒçš„å…·ä½“ç±»å‹ï¼Œä¸è¿‡åœ¨ Java é‡Œä»»ä½•å¯¹è±¡éƒ½æ˜¯ <code>Object</code> çš„å­ç±»ï¼Œæ‰€ä»¥è¿™é‡Œèƒ½æŠŠå®ƒèµ‹å€¼ç»™ <code>Object</code>ã€‚</p>
<p><code>Button</code> å¯¹è±¡ä¸€å®šæ˜¯è¿™ä¸ªæœªçŸ¥ç±»å‹çš„å­ç±»å‹ï¼Œæ ¹æ®å¤šæ€çš„ç‰¹æ€§ï¼Œè¿™é‡Œé€šè¿‡ <code>add</code> æ·»åŠ  <code>Button</code> å¯¹è±¡æ˜¯åˆæ³•çš„ã€‚</p>
<p>ä½¿ç”¨ä¸‹ç•Œé€šé…ç¬¦ <code>? super</code> çš„æ³›å‹ <code>List</code>ï¼Œåªèƒ½è¯»å–åˆ° <code>Object</code> å¯¹è±¡ï¼Œä¸€èˆ¬æ²¡æœ‰ä»€ä¹ˆå®é™…çš„ä½¿ç”¨åœºæ™¯ï¼Œé€šå¸¸ä¹Ÿåªæ‹¿å®ƒæ¥æ·»åŠ æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æ¶ˆè´¹å·²æœ‰çš„ <code>List</code>ï¼Œå¾€é‡Œé¢æ·»åŠ  <code>Button</code>ï¼Œå› æ­¤è¿™ç§æ³›å‹ç±»å‹å£°æ˜ç§°ä¹‹ä¸ºã€Œæ¶ˆè´¹è€… Consumerã€ã€‚</p>
<hr>
<p>å°ç»“ä¸‹ï¼ŒJava çš„æ³›å‹æœ¬èº«æ˜¯ä¸æ”¯æŒåå˜å’Œé€†å˜çš„ã€‚</p>
<ul>
<li>å¯ä»¥ä½¿ç”¨æ³›å‹é€šé…ç¬¦ <code>? extends</code> æ¥ä½¿æ³›å‹æ”¯æŒåå˜ï¼Œä½†æ˜¯ã€Œåªèƒ½è¯»å–ä¸èƒ½ä¿®æ”¹ã€ï¼Œè¿™é‡Œçš„ä¿®æ”¹ä»…æŒ‡å¯¹æ³›å‹é›†åˆæ·»åŠ å…ƒç´ ï¼Œå¦‚æœæ˜¯ <code>remove(int index)</code> ä»¥åŠ <code>clear</code> å½“ç„¶æ˜¯å¯ä»¥çš„ã€‚</li>
<li>å¯ä»¥ä½¿ç”¨æ³›å‹é€šé…ç¬¦ <code>? super</code> æ¥ä½¿æ³›å‹æ”¯æŒé€†å˜ï¼Œä½†æ˜¯ã€Œåªèƒ½ä¿®æ”¹ä¸èƒ½è¯»å–ã€ï¼Œè¿™é‡Œè¯´çš„ä¸èƒ½è¯»å–æ˜¯æŒ‡ä¸èƒ½æŒ‰ç…§æ³›å‹ç±»å‹è¯»å–ï¼Œä½ å¦‚æœæŒ‰ç…§ <code>Object</code> è¯»å‡ºæ¥å†å¼ºè½¬å½“ç„¶ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</li>
</ul>
<h3 id="Kotlin-ä¸­çš„-out-å’Œ-in"><a href="#Kotlin-ä¸­çš„-out-å’Œ-in" class="headerlink" title="Kotlin ä¸­çš„ out å’Œ in"></a>Kotlin ä¸­çš„ <code>out</code> å’Œ <code>in</code></h3><p>å’Œ Java æ³›å‹ä¸€æ ·ï¼ŒKolin ä¸­çš„æ³›å‹æœ¬èº«ä¹Ÿæ˜¯ä¸å¯å˜çš„ã€‚</p>
<ul>
<li>ä½¿ç”¨å…³é”®å­— <code>out</code> æ¥æ”¯æŒåå˜ï¼Œç­‰åŒäº Java ä¸­çš„ä¸Šç•Œé€šé…ç¬¦ <code>? extends</code>ã€‚</li>
<li>ä½¿ç”¨å…³é”®å­— <code>in</code> æ¥æ”¯æŒé€†å˜ï¼Œç­‰åŒäº Java ä¸­çš„ä¸‹ç•Œé€šé…ç¬¦ <code>? super</code>ã€‚</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">var</span> textViews: List&lt;<span class="keyword">out</span> TextView&gt;</span><br><span class="line"><span class="keyword">var</span> textViews: List&lt;<span class="keyword">in</span> TextView&gt;</span><br></pre></td></tr></table></figure>

<p>æ¢äº†ä¸ªå†™æ³•ï¼Œä½†ä½œç”¨æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚<code>out</code> è¡¨ç¤ºï¼Œæˆ‘è¿™ä¸ªå˜é‡æˆ–è€…å‚æ•°åªç”¨æ¥è¾“å‡ºï¼Œä¸ç”¨æ¥è¾“å…¥ï¼Œä½ åªèƒ½è¯»æˆ‘ä¸èƒ½å†™æˆ‘ï¼›<code>in</code> å°±åè¿‡æ¥ï¼Œè¡¨ç¤ºå®ƒåªç”¨æ¥è¾“å…¥ï¼Œä¸ç”¨æ¥è¾“å‡ºï¼Œä½ åªèƒ½å†™æˆ‘ä¸èƒ½è¯»æˆ‘ã€‚</p>
<p>è¯´äº†è¿™ä¹ˆå¤š <code>List</code>ï¼Œå…¶å®æ³›å‹åœ¨éé›†åˆç±»çš„ä½¿ç”¨ä¹Ÿéå¸¸å¹¿æ³›ï¼Œå°±ä»¥ã€Œç”Ÿäº§è€…-æ¶ˆè´¹è€…ã€ä¸ºä¾‹å­ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producer</span>&lt;<span class="type">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">produce</span><span class="params">()</span></span>: T &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> producer: Producer&lt;<span class="keyword">out</span> TextView&gt; = Producer&lt;Button&gt;()</span><br><span class="line"><span class="keyword">val</span> textView: TextView = producer.produce() <span class="comment">// ğŸ‘ˆ ç›¸å½“äº 'List' çš„ `get`</span></span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸            </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Consumer</span>&lt;<span class="type">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">consume</span><span class="params">(t: <span class="type">T</span>)</span></span> &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> consumer: Consumer&lt;<span class="keyword">in</span> Button&gt; = Consumer&lt;TextView&gt;()</span><br><span class="line">consumer.consume(Button(context))  <span class="comment">// ğŸ‘ˆ ç›¸å½“äº 'List' çš„ 'add'</span></span><br></pre></td></tr></table></figure>

<p>åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œåœ¨å£°æ˜ <code>Producer</code> çš„æ—¶å€™å·²ç»ç¡®å®šäº†æ³›å‹ <code>T</code> åªä¼šä½œä¸ºè¾“å‡ºæ¥ç”¨ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½éœ€è¦åœ¨ä½¿ç”¨çš„æ—¶å€™åŠ ä¸Š <code>out TextView</code> æ¥æ”¯æŒåå˜ï¼Œå†™èµ·æ¥å¾ˆéº»çƒ¦ã€‚</p>
<p>Kotlin æä¾›äº†å¦å¤–ä¸€ç§å†™æ³•ï¼šå¯ä»¥åœ¨å£°æ˜ç±»çš„æ—¶å€™ï¼Œç»™æ³›å‹ç¬¦å·åŠ ä¸Š <code>out</code> å…³é”®å­—ï¼Œè¡¨æ˜æ³›å‹å‚æ•° <code>T</code> åªä¼šç”¨æ¥è¾“å‡ºï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™å°±ä¸ç”¨é¢å¤–åŠ  <code>out</code> äº†ã€‚</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸             ğŸ‘‡</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producer</span>&lt;<span class="type">out T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">produce</span><span class="params">()</span></span>: T &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> producer: Producer&lt;TextView&gt; = Producer&lt;Button&gt;() <span class="comment">// ğŸ‘ˆ è¿™é‡Œä¸å†™ out ä¹Ÿä¸ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="keyword">val</span> producer: Producer&lt;<span class="keyword">out</span> TextView&gt; = Producer&lt;Button&gt;() <span class="comment">// ğŸ‘ˆ out å¯ä»¥ä½†æ²¡å¿…è¦</span></span><br></pre></td></tr></table></figure>

<p>ä¸ <code>out</code> ä¸€æ ·ï¼Œå¯ä»¥åœ¨å£°æ˜ç±»çš„æ—¶å€™ï¼Œç»™æ³›å‹å‚æ•°åŠ ä¸Š <code>in</code> å…³é”®å­—ï¼Œæ¥è¡¨æ˜è¿™ä¸ªæ³›å‹å‚æ•° <code>T</code> åªç”¨æ¥è¾“å…¥ã€‚</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸            ğŸ‘‡</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Consumer</span>&lt;<span class="type">in T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">consume</span><span class="params">(t: <span class="type">T</span>)</span></span> &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">â€‹</span><br><span class="line"><span class="keyword">val</span> consumer: Consumer&lt;Button&gt; = Consumer&lt;TextView&gt;() <span class="comment">// ğŸ‘ˆ è¿™é‡Œä¸å†™ in ä¹Ÿä¸ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="keyword">val</span> consumer: Consumer&lt;<span class="keyword">in</span> Button&gt; = Consumer&lt;TextView&gt;() <span class="comment">// ğŸ‘ˆ in å¯ä»¥ä½†æ²¡å¿…è¦</span></span><br></pre></td></tr></table></figure>

<h3 id="å·"><a href="#å·" class="headerlink" title="* å·"></a><code>*</code> å·</h3><p>å‰é¢è®²åˆ°äº† Java ä¸­å•ä¸ª <code>?</code> å·ä¹Ÿèƒ½ä½œä¸ºæ³›å‹é€šé…ç¬¦ä½¿ç”¨ï¼Œç›¸å½“äº <code>? extends Object</code>ã€‚ å®ƒåœ¨ Kotlin ä¸­æœ‰ç­‰æ•ˆçš„å†™æ³•ï¼š<code>*</code> å·ï¼Œç›¸å½“äº <code>out Any</code>ã€‚</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸            ğŸ‘‡</span><br><span class="line"><span class="keyword">var</span> list: List&lt;*&gt;</span><br></pre></td></tr></table></figure>

<p>å’Œ Java ä¸åŒçš„åœ°æ–¹æ˜¯ï¼Œå¦‚æœä½ çš„ç±»å‹å®šä¹‰é‡Œå·²ç»æœ‰äº† <code>out</code> æˆ–è€… <code>in</code>ï¼Œé‚£è¿™ä¸ªé™åˆ¶åœ¨å˜é‡å£°æ˜æ—¶ä¹Ÿä¾ç„¶åœ¨ï¼Œä¸ä¼šè¢« <code>*</code> å·å»æ‰ã€‚</p>
<p>æ¯”å¦‚ä½ çš„ç±»å‹å®šä¹‰é‡Œæ˜¯ <code>out T : Number</code> çš„ï¼Œé‚£å®ƒåŠ ä¸Š <code>&lt;*&gt;</code> ä¹‹åçš„æ•ˆæœå°±ä¸æ˜¯ <code>out Any</code>ï¼Œè€Œæ˜¯ <code>out Number</code>ã€‚</p>
<h3 id="where-å…³é”®å­—"><a href="#where-å…³é”®å­—" class="headerlink" title="where å…³é”®å­—"></a><code>where</code> å…³é”®å­—</h3><p>Java ä¸­å£°æ˜ç±»æˆ–æ¥å£çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ <code>extends</code> æ¥è®¾ç½®è¾¹ç•Œï¼Œå°†æ³›å‹ç±»å‹å‚æ•°é™åˆ¶ä¸ºæŸä¸ªç±»å‹çš„å­é›†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸                </span><br><span class="line"><span class="comment">//                ğŸ‘‡  T çš„ç±»å‹å¿…é¡»æ˜¯ Animal çš„å­ç±»å‹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Monster</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Animal</span>&gt;</span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„è¿™ä¸ªå’Œå‰é¢è®²çš„å£°æ˜å˜é‡æ—¶çš„æ³›å‹ç±»å‹å£°æ˜æ˜¯ä¸åŒçš„ä¸œè¥¿ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰ <code>?</code>ã€‚</p>
<p>åŒæ—¶è¿™ä¸ªè¾¹ç•Œæ˜¯å¯ä»¥è®¾ç½®å¤šä¸ªï¼Œç”¨ <code>&amp;</code> ç¬¦å·è¿æ¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line"><span class="comment">//                            ğŸ‘‡  T çš„ç±»å‹å¿…é¡»åŒæ—¶æ˜¯ Animal å’Œ Food çš„å­ç±»å‹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Monster</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Animal</span> &amp; <span class="title">Food</span>&gt;</span>&#123; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Kotlin åªæ˜¯æŠŠ <code>extends</code> æ¢æˆäº† <code>:</code> å†’å·ã€‚</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸             ğŸ‘‡</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Monster</span>&lt;<span class="type">T : Animal</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è®¾ç½®å¤šä¸ªè¾¹ç•Œå¯ä»¥ä½¿ç”¨ <code>where</code> å…³é”®å­—ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸                ğŸ‘‡</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Monster</span>&lt;<span class="type">T</span>&gt; <span class="title">where</span> <span class="title">T</span> : <span class="type">Animal</span>, <span class="type">T : Food</span></span></span><br></pre></td></tr></table></figure>

<p>æœ‰äººåœ¨çœ‹æ–‡æ¡£çš„æ—¶å€™è§‰å¾—è¿™ä¸ª <code>where</code> æ˜¯ä¸ªæ–°ä¸œè¥¿ï¼Œå…¶å®è™½ç„¶ Java é‡Œæ²¡æœ‰ <code>where</code> ï¼Œä½†å®ƒå¹¶æ²¡æœ‰å¸¦æ¥æ–°åŠŸèƒ½ï¼Œåªæ˜¯æŠŠä¸€ä¸ªè€åŠŸèƒ½æ¢äº†ä¸ªæ–°å†™æ³•ã€‚</p>
<p>ä¸è¿‡ç¬”è€…è§‰å¾— Kotlin é‡Œ <code>where</code> è¿™æ ·çš„å†™æ³•å¯è¯»æ€§æ›´ç¬¦åˆè‹±æ–‡é‡Œçš„è¯­æ³•ï¼Œå°¤å…¶æ˜¯å¦‚æœ <code>Monster</code> æœ¬èº«è¿˜æœ‰ç»§æ‰¿çš„æ—¶å€™ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Monster</span>&lt;<span class="type">T</span>&gt; : <span class="type">MonsterParent</span>&lt;<span class="type">T</span>&gt;</span></span><br><span class="line">    <span class="keyword">where</span> T : Animal</span><br></pre></td></tr></table></figure>

<h3 id="reified-å…³é”®å­—"><a href="#reified-å…³é”®å­—" class="headerlink" title="reified å…³é”®å­—"></a><code>reified</code> å…³é”®å­—</h3><p>ç”±äº Java ä¸­çš„æ³›å‹å­˜åœ¨ç±»å‹æ“¦é™¤çš„æƒ…å†µï¼Œä»»ä½•åœ¨è¿è¡Œæ—¶éœ€è¦çŸ¥é“æ³›å‹ç¡®åˆ‡ç±»å‹ä¿¡æ¯çš„æ“ä½œéƒ½æ²¡æ³•ç”¨äº†ã€‚</p>
<p>æ¯”å¦‚ä½ ä¸èƒ½æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæ³›å‹ç±»å‹ <code>T</code> çš„å®ä¾‹ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line">&lt;T&gt; void printIfTypeMatch(Object item) &#123;</span><br><span class="line">    <span class="keyword">if</span> (item instanceof T) &#123; <span class="comment">// ğŸ‘ˆ IDE ä¼šæç¤ºé”™è¯¯ï¼Œillegal generic type for instanceof</span></span><br><span class="line">        System.<span class="keyword">out</span>.println(item);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Kotlin é‡ŒåŒæ ·ä¹Ÿä¸è¡Œï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T&gt;</span> <span class="title">printIfTypeMatch</span><span class="params">(item: <span class="type">Any</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (item <span class="keyword">is</span> T) &#123; <span class="comment">// ğŸ‘ˆ IDE ä¼šæç¤ºé”™è¯¯ï¼ŒCannot check for instance of erased type: T</span></span><br><span class="line">        println(item)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªé—®é¢˜ï¼Œåœ¨ Java ä¸­çš„è§£å†³æ–¹æ¡ˆé€šå¸¸æ˜¯é¢å¤–ä¼ é€’ä¸€ä¸ª <code>Class</code> ç±»å‹çš„å‚æ•°ï¼Œç„¶åé€šè¿‡ <code>Class#isInstance</code> </p>
<p>æ–¹æ³•æ¥æ£€æŸ¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸                             ğŸ‘‡</span><br><span class="line">&lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">(Object item, Class&lt;T&gt; type)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (type.isInstance(item)) &#123;</span><br><span class="line">               ğŸ‘†</span><br><span class="line">        System.out.println(item);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Kotlin ä¸­åŒæ ·å¯ä»¥è¿™ä¹ˆè§£å†³ï¼Œä¸è¿‡è¿˜æœ‰ä¸€ä¸ªæ›´æ–¹ä¾¿çš„åšæ³•ï¼šä½¿ç”¨å…³é”®å­— <code>reified</code> é…åˆ <code>inline</code> æ¥è§£å†³ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸ ğŸ‘‡         ğŸ‘‡</span><br><span class="line"><span class="keyword">inline</span> <span class="function"><span class="keyword">fun</span> <span class="type">&lt;<span class="keyword">reified</span> T&gt;</span> <span class="title">printIfTypeMatch</span><span class="params">(item: <span class="type">Any</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (item <span class="keyword">is</span> T) &#123; <span class="comment">// ğŸ‘ˆ è¿™é‡Œå°±ä¸ä¼šåœ¨æç¤ºé”™è¯¯äº†</span></span><br><span class="line">        println(item)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<ol>
<li><p>Java é‡Œçš„æ•°ç»„æ˜¯æ”¯æŒåå˜çš„ï¼Œè€Œ Kotlin ä¸­çš„æ•°ç»„ <code>Array</code> ä¸æ”¯æŒåå˜ã€‚</p>
<p>è¿™æ˜¯å› ä¸ºåœ¨ Kotlin ä¸­æ•°ç»„æ˜¯ç”¨ <code>Array</code> ç±»æ¥è¡¨ç¤ºçš„ï¼Œè¿™ä¸ª <code>Array</code> ç±»ä½¿ç”¨æ³›å‹å°±å’Œé›†åˆç±»ä¸€æ ·ï¼Œæ‰€ä»¥ä¸æ”¯æŒåå˜ã€‚</p>
</li>
<li><p>Java ä¸­çš„ <code>List</code> æ¥å£ä¸æ”¯æŒåå˜ï¼Œè€Œ Kotlin ä¸­çš„ <code>List</code> æ¥å£æ”¯æŒåå˜ã€‚</p>
<p>Java ä¸­çš„ <code>List</code> ä¸æ”¯æŒåå˜ï¼ŒåŸå› åœ¨ä¸Šæ–‡å·²ç»è®²è¿‡äº†ï¼Œéœ€è¦ä½¿ç”¨æ³›å‹é€šé…ç¬¦æ¥è§£å†³ã€‚</p>
<p>åœ¨ Kotlin ä¸­ï¼Œå®é™…ä¸Š <code>MutableList</code> æ¥å£æ‰ç›¸å½“äº Java çš„ <code>List</code>ã€‚Kotlin ä¸­çš„ <code>List</code> æ¥å£å®ç°äº†åªè¯»æ“ä½œï¼Œæ²¡æœ‰å†™æ“ä½œï¼Œæ‰€ä»¥ä¸ä¼šæœ‰ç±»å‹å®‰å…¨ä¸Šçš„é—®é¢˜ï¼Œè‡ªç„¶å¯ä»¥æ”¯æŒåå˜ã€‚</p>
</li>
</ol>
</li>
<li><h3 id="Kotlin-çš„åç¨‹"><a href="#Kotlin-çš„åç¨‹" class="headerlink" title="Kotlin çš„åç¨‹"></a>Kotlin çš„åç¨‹</h3><h3 id="åç¨‹æ˜¯ä»€ä¹ˆ"><a href="#åç¨‹æ˜¯ä»€ä¹ˆ" class="headerlink" title="åç¨‹æ˜¯ä»€ä¹ˆ"></a>åç¨‹æ˜¯ä»€ä¹ˆ</h3><blockquote>
<p>ä» Android å¼€å‘è€…çš„è§’åº¦å»ç†è§£å®ƒä»¬çš„å…³ç³»ï¼š</p>
<ul>
<li>æˆ‘ä»¬æ‰€æœ‰çš„ä»£ç éƒ½æ˜¯è·‘åœ¨çº¿ç¨‹ä¸­çš„ï¼Œè€Œçº¿ç¨‹æ˜¯è·‘åœ¨è¿›ç¨‹ä¸­çš„ã€‚</li>
<li>åç¨‹æ²¡æœ‰ç›´æ¥å’Œæ“ä½œç³»ç»Ÿå…³è”ï¼Œä½†å®ƒä¸æ˜¯ç©ºä¸­æ¥¼é˜ï¼Œå®ƒä¹Ÿæ˜¯è·‘åœ¨çº¿ç¨‹ä¸­çš„ï¼Œå¯ä»¥æ˜¯å•çº¿ç¨‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šçº¿ç¨‹ã€‚</li>
<li>å•çº¿ç¨‹ä¸­çš„åç¨‹æ€»çš„æ‰§è¡Œæ—¶é—´å¹¶ä¸ä¼šæ¯”ä¸ç”¨åç¨‹å°‘ã€‚</li>
<li>Android ç³»ç»Ÿä¸Šï¼Œå¦‚æœåœ¨ä¸»çº¿ç¨‹è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œä¼šæŠ›å‡º <code>NetworkOnMainThreadException</code>ï¼Œå¯¹äºåœ¨ä¸»çº¿ç¨‹ä¸Šçš„åç¨‹ä¹Ÿä¸ä¾‹å¤–ï¼Œè¿™ç§åœºæ™¯ä½¿ç”¨åç¨‹è¿˜æ˜¯è¦åˆ‡çº¿ç¨‹çš„ã€‚</li>
</ul>
<p>åç¨‹è®¾è®¡çš„åˆè¡·æ˜¯ä¸ºäº†è§£å†³å¹¶å‘é—®é¢˜ï¼Œè®© ã€Œåä½œå¼å¤šä»»åŠ¡ã€ å®ç°èµ·æ¥æ›´åŠ æ–¹ä¾¿ã€‚</p>
</blockquote>
<p>åç¨‹å°±æ˜¯ Kotlin æä¾›çš„ä¸€å¥—çº¿ç¨‹å°è£…çš„ APIï¼Œä½†å¹¶ä¸æ˜¯è¯´åç¨‹å°±æ˜¯ä¸ºçº¿ç¨‹è€Œç”Ÿçš„ã€‚</p>
<p>ä¸è¿‡ï¼Œæˆ‘ä»¬å­¦ä¹  Kotlin ä¸­çš„åç¨‹ï¼Œä¸€å¼€å§‹ç¡®å®å¯ä»¥ä»çº¿ç¨‹æ§åˆ¶çš„è§’åº¦æ¥åˆ‡å…¥ã€‚å› ä¸ºåœ¨ Kotlin ä¸­ï¼Œåç¨‹çš„ä¸€ä¸ªå…¸å‹çš„ä½¿ç”¨åœºæ™¯å°±æ˜¯çº¿ç¨‹æ§åˆ¶ã€‚å°±åƒ Java ä¸­çš„ <code>Executor</code> å’Œ Android ä¸­çš„ <code>AsyncTask</code>ï¼ŒKotlin ä¸­çš„åç¨‹ä¹Ÿæœ‰å¯¹ Thread API çš„å°è£…ï¼Œè®©æˆ‘ä»¬å¯ä»¥åœ¨å†™ä»£ç æ—¶ï¼Œä¸ç”¨å…³æ³¨å¤šçº¿ç¨‹å°±èƒ½å¤Ÿå¾ˆæ–¹ä¾¿åœ°å†™å‡ºå¹¶å‘æ“ä½œã€‚</p>
<p>åœ¨ Java ä¸­è¦å®ç°å¹¶å‘æ“ä½œé€šå¸¸éœ€è¦å¼€å¯ä¸€ä¸ª <code>Thread</code> ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line"><span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).start();</span><br></pre></td></tr></table></figure>

<p>Kotlin ä¸­åŒæ ·å¯ä»¥é€šè¿‡çº¿ç¨‹çš„æ–¹å¼å»å†™ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">Thread(&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;).start()</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œå’Œ Java ä¸€æ ·ä¹Ÿæ‘†è„±ä¸äº†ç›´æ¥ä½¿ç”¨ <code>Thead</code> çš„é‚£äº›å›°éš¾å’Œä¸æ–¹ä¾¿ï¼š</p>
<ul>
<li>çº¿ç¨‹ä»€ä¹ˆæ—¶å€™æ‰§è¡Œç»“æŸ</li>
<li>çº¿ç¨‹é—´çš„ç›¸äº’é€šä¿¡</li>
<li>å¤šä¸ªçº¿ç¨‹çš„ç®¡ç†</li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥ç”¨ Java çš„ <code>Executor</code> çº¿ç¨‹æ± æ¥è¿›è¡Œçº¿ç¨‹ç®¡ç†ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">val</span> executor = Executors.newCachedThreadPool()</span><br><span class="line">executor.execute(&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<p>ä¸‹é¢çš„ä¾‹å­æ˜¯ä½¿ç”¨åç¨‹è¿›è¡Œç½‘ç»œè¯·æ±‚è·å–ç”¨æˆ·ä¿¡æ¯å¹¶æ˜¾ç¤ºåˆ° UI æ§ä»¶ä¸Šï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">launch(&#123;</span><br><span class="line">    <span class="keyword">val</span> user = api.getUser() <span class="comment">// ğŸ‘ˆ ç½‘ç»œè¯·æ±‚ï¼ˆIO çº¿ç¨‹ï¼‰</span></span><br><span class="line">    nameTv.text = user.name  <span class="comment">// ğŸ‘ˆ æ›´æ–° UIï¼ˆä¸»çº¿ç¨‹ï¼‰</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œåªæ˜¯å±•ç¤ºäº†ä¸€ä¸ªä»£ç ç‰‡æ®µï¼Œ<code>launch</code> å¹¶ä¸æ˜¯ä¸€ä¸ªé¡¶å±‚å‡½æ•°ï¼Œå®ƒå¿…é¡»åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¹‹åå†è®²ï¼Œè¿™é‡Œåªå…³å¿ƒå®ƒå†…éƒ¨ä¸šåŠ¡é€»è¾‘çš„å†™æ³•ã€‚</p>
<p><code>launch</code> å‡½æ•°åŠ ä¸Šå®ç°åœ¨ <code>{}</code> ä¸­å…·ä½“çš„é€»è¾‘ï¼Œå°±æ„æˆäº†ä¸€ä¸ªåç¨‹ã€‚</p>
<p>é€šå¸¸æˆ‘ä»¬åšç½‘ç»œè¯·æ±‚ï¼Œè¦ä¸å°±ä¼ ä¸€ä¸ª callbackï¼Œè¦ä¸å°±æ˜¯åœ¨ IO çº¿ç¨‹é‡Œè¿›è¡Œé˜»å¡å¼çš„åŒæ­¥è°ƒç”¨ï¼Œè€Œåœ¨è¿™æ®µä»£ç ä¸­ï¼Œä¸Šä¸‹ä¸¤ä¸ªè¯­å¥åˆ†åˆ«å·¥ä½œåœ¨ä¸¤ä¸ªçº¿ç¨‹é‡Œï¼Œä½†å†™æ³•ä¸Šçœ‹èµ·æ¥å’Œæ™®é€šçš„å•çº¿ç¨‹ä»£ç ä¸€æ ·ã€‚</p>
<p>è¿™é‡Œçš„ <code>api.getUser</code> æ˜¯ä¸€ä¸ª<strong>æŒ‚èµ·å‡½æ•°</strong>ï¼Œæ‰€ä»¥èƒ½å¤Ÿä¿è¯ <code>nameTv.text</code> çš„æ­£ç¡®èµ‹å€¼.</p>
<h3 id="åç¨‹å¥½åœ¨å“ª"><a href="#åç¨‹å¥½åœ¨å“ª" class="headerlink" title="åç¨‹å¥½åœ¨å“ª"></a>åç¨‹å¥½åœ¨å“ª</h3><p>åœ¨è®²ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸‹ã€Œé—­åŒ…ã€è¿™ä¸ªæ¦‚å¿µï¼Œè°ƒç”¨ Kotlin åç¨‹ä¸­çš„ APIï¼Œç»å¸¸ä¼šç”¨åˆ°é—­åŒ…å†™æ³•ã€‚</p>
<p>å…¶å®é—­åŒ…å¹¶ä¸æ˜¯ Kotlin ä¸­çš„æ–°æ¦‚å¿µï¼Œåœ¨ Java 8 ä¸­å°±å·²ç»æ”¯æŒã€‚</p>
<p>æˆ‘ä»¬å…ˆä»¥ <code>Thread</code> ä¸ºä¾‹ï¼Œæ¥çœ‹çœ‹ä»€ä¹ˆæ˜¯é—­åŒ…ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ª Thread çš„å®Œæ•´å†™æ³•</span></span><br><span class="line">Thread(<span class="keyword">object</span> : Runnable &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">run</span><span class="params">()</span></span> &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">â€‹</span><br><span class="line"><span class="comment">// æ»¡è¶³ SAMï¼Œå…ˆç®€åŒ–ä¸º</span></span><br><span class="line">Thread(&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;)</span><br><span class="line">â€‹</span><br><span class="line"><span class="comment">// ä½¿ç”¨é—­åŒ…ï¼Œå†ç®€åŒ–ä¸º</span></span><br><span class="line">Thread &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½¢å¦‚ <code>Thread {...}</code> è¿™æ ·çš„ç»“æ„ä¸­ <code>{}</code> å°±æ˜¯ä¸€ä¸ªé—­åŒ…ã€‚</p>
<p>åœ¨ Kotlin ä¸­æœ‰è¿™æ ·ä¸€ä¸ªè¯­æ³•ç³–ï¼šå½“å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯ lambda è¡¨è¾¾å¼æ—¶ï¼Œå¯ä»¥å°† lambda å†™åœ¨æ‹¬å·å¤–ã€‚è¿™å°±æ˜¯å®ƒçš„é—­åŒ…åŸåˆ™ã€‚</p>
<p>åœ¨è¿™é‡Œéœ€è¦ä¸€ä¸ªç±»å‹ä¸º <code>Runnable</code> çš„å‚æ•°ï¼Œè€Œ <code>Runnable</code> æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸”åªå®šä¹‰äº†ä¸€ä¸ªå‡½æ•° <code>run</code>ï¼Œè¿™ç§æƒ…å†µæ»¡è¶³äº† Kotlin çš„ <a href="https://medium.com/tompee/idiomatic-kotlin-lambdas-and-sam-constructors-fe2075965bfb" target="_blank" rel="noopener">SAM</a>ï¼Œå¯ä»¥è½¬æ¢æˆä¼ é€’ä¸€ä¸ª lambda è¡¨è¾¾å¼ï¼ˆç¬¬äºŒæ®µï¼‰ï¼Œå› ä¸ºæ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼Œæ ¹æ®é—­åŒ…åŸåˆ™æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥å†™æˆ <code>Thread {...}</code>ï¼ˆç¬¬ä¸‰æ®µï¼‰ çš„å½¢å¼ã€‚</p>
<p>å¯¹äºä¸Šæ–‡æ‰€ä½¿ç”¨çš„ <code>launch</code> å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡é—­åŒ…æ¥è¿›è¡Œç®€åŒ– ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">launch &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h4><p>å‰é¢æåˆ°ï¼Œ<code>launch</code> å‡½æ•°ä¸æ˜¯é¡¶å±‚å‡½æ•°ï¼Œæ˜¯ä¸èƒ½ç›´æ¥ç”¨çš„ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢ä¸‰ç§æ–¹æ³•æ¥åˆ›å»ºåç¨‹ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="comment">// æ–¹æ³•ä¸€ï¼Œä½¿ç”¨ runBlocking é¡¶å±‚å‡½æ•°</span></span><br><span class="line">runBlocking &#123;</span><br><span class="line">    getImage(imageId)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•äºŒï¼Œä½¿ç”¨ GlobalScope å•ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="comment">//            ğŸ‘‡ å¯ä»¥ç›´æ¥è°ƒç”¨ launch å¼€å¯åç¨‹</span></span><br><span class="line">GlobalScope.launch &#123;</span><br><span class="line">    getImage(imageId)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•ä¸‰ï¼Œè‡ªè¡Œé€šè¿‡ CoroutineContext åˆ›å»ºä¸€ä¸ª CoroutineScope å¯¹è±¡</span></span><br><span class="line"><span class="comment">//                                    ğŸ‘‡ éœ€è¦ä¸€ä¸ªç±»å‹ä¸º CoroutineContext çš„å‚æ•°</span></span><br><span class="line"><span class="keyword">val</span> coroutineScope = CoroutineScope(context)</span><br><span class="line">coroutineScope.launch &#123;</span><br><span class="line">    getImage(imageId)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ–¹æ³•ä¸€é€šå¸¸é€‚ç”¨äºå•å…ƒæµ‹è¯•çš„åœºæ™¯ï¼Œè€Œä¸šåŠ¡å¼€å‘ä¸­ä¸ä¼šç”¨åˆ°è¿™ç§æ–¹æ³•ï¼Œå› ä¸ºå®ƒæ˜¯çº¿ç¨‹é˜»å¡çš„ã€‚</li>
<li>æ–¹æ³•äºŒå’Œä½¿ç”¨ <code>runBlocking</code> çš„åŒºåˆ«åœ¨äºä¸ä¼šé˜»å¡çº¿ç¨‹ã€‚ä½†åœ¨ Android å¼€å‘ä¸­åŒæ ·ä¸æ¨èè¿™ç§ç”¨æ³•ï¼Œå› ä¸ºå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¼šå’Œ app ä¸€è‡´ï¼Œä¸”ä¸èƒ½å–æ¶ˆï¼ˆä»€ä¹ˆæ˜¯åç¨‹çš„å–æ¶ˆåé¢çš„æ–‡ç« ä¼šè®²ï¼‰ã€‚</li>
<li>æ–¹æ³•ä¸‰æ˜¯æ¯”è¾ƒæ¨èçš„ä½¿ç”¨æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>context</code> å‚æ•°å»ç®¡ç†å’Œæ§åˆ¶åç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼ˆè¿™é‡Œçš„ <code>context</code> å’Œ Android é‡Œçš„ä¸æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œæ˜¯ä¸€ä¸ªæ›´é€šç”¨çš„æ¦‚å¿µï¼Œä¼šæœ‰ä¸€ä¸ª Android å¹³å°çš„å°è£…æ¥é…åˆä½¿ç”¨ï¼‰ã€‚</li>
</ul>
<p>åç¨‹æœ€å¸¸ç”¨çš„åŠŸèƒ½æ˜¯å¹¶å‘ï¼Œè€Œå¹¶å‘çš„å…¸å‹åœºæ™¯å°±æ˜¯å¤šçº¿ç¨‹ã€‚å¯ä»¥ä½¿ç”¨ <code>Dispatchers.IO</code> å‚æ•°æŠŠä»»åŠ¡åˆ‡åˆ° IO çº¿ç¨‹æ‰§è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">coroutineScope.launch(Dispatchers.IO) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>Dispatchers.Main</code> å‚æ•°åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">coroutineScope.launch(Dispatchers.Main) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥åœ¨ã€Œåç¨‹æ˜¯ä»€ä¹ˆã€ä¸€èŠ‚ä¸­è®²åˆ°çš„å¼‚æ­¥è¯·æ±‚çš„ä¾‹å­å®Œæ•´å†™å‡ºæ¥æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">coroutineScope.launch(Dispatchers.Main) &#123;   <span class="comment">// åœ¨ä¸»çº¿ç¨‹å¼€å¯åç¨‹</span></span><br><span class="line">    <span class="keyword">val</span> user = api.getUser() <span class="comment">// IO çº¿ç¨‹æ‰§è¡Œç½‘ç»œè¯·æ±‚</span></span><br><span class="line">    nameTv.text = user.name  <span class="comment">// ä¸»çº¿ç¨‹æ›´æ–° UI</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€Œé€šè¿‡ Java å®ç°ä»¥ä¸Šé€»è¾‘ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦è¿™æ ·å†™ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">â˜•ï¸</span><br><span class="line">api.getUser(new Callback&lt;User&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void success(User user) &#123;</span><br><span class="line">        runOnUiThread(new Runnable() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void run() &#123;</span><br><span class="line">                nameTv.setText(user.name);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public void failure(Exception e) &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>è¿™ç§å›è°ƒå¼çš„å†™æ³•ï¼Œæ‰“ç ´äº†ä»£ç çš„é¡ºåºç»“æ„å’Œå®Œæ•´æ€§ï¼Œè¯»èµ·æ¥ç›¸å½“éš¾å—ã€‚</p>
<h4 id="åç¨‹çš„ã€Œ1-åˆ°-0ã€"><a href="#åç¨‹çš„ã€Œ1-åˆ°-0ã€" class="headerlink" title="åç¨‹çš„ã€Œ1 åˆ° 0ã€"></a>åç¨‹çš„ã€Œ1 åˆ° 0ã€</h4><p>å¯¹äºå›è°ƒå¼çš„å†™æ³•ï¼Œå¦‚æœå¹¶å‘åœºæ™¯å†å¤æ‚ä¸€äº›ï¼Œä»£ç çš„åµŒå¥—å¯èƒ½ä¼šæ›´å¤šï¼Œè¿™æ ·çš„è¯ç»´æŠ¤èµ·æ¥å°±éå¸¸éº»çƒ¦ã€‚ä½†å¦‚æœä½ ä½¿ç”¨äº† Kotlin åç¨‹ï¼Œå¤šå±‚ç½‘ç»œè¯·æ±‚åªéœ€è¦è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">coroutineScope.launch(Dispatchers.Main) &#123;       <span class="comment">// å¼€å§‹åç¨‹ï¼šä¸»çº¿ç¨‹</span></span><br><span class="line">    <span class="keyword">val</span> token = api.getToken()                  <span class="comment">// ç½‘ç»œè¯·æ±‚ï¼šIO çº¿ç¨‹</span></span><br><span class="line">    <span class="keyword">val</span> user = api.getUser(token)               <span class="comment">// ç½‘ç»œè¯·æ±‚ï¼šIO çº¿ç¨‹</span></span><br><span class="line">    nameTv.text = user.name                     <span class="comment">// æ›´æ–° UIï¼šä¸»çº¿ç¨‹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœé‡åˆ°çš„åœºæ™¯æ˜¯å¤šä¸ªç½‘ç»œè¯·æ±‚éœ€è¦ç­‰å¾…æ‰€æœ‰è¯·æ±‚ç»“æŸä¹‹åå†å¯¹ UI è¿›è¡Œæ›´æ–°ã€‚æ¯”å¦‚ä»¥ä¸‹ä¸¤ä¸ªè¯·æ±‚ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">api.getAvatar(user, callback)</span><br><span class="line">api.getCompanyLogo(user, callback)</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½¿ç”¨å›è°ƒå¼çš„å†™æ³•ï¼Œé‚£ä¹ˆä»£ç å¯èƒ½å†™èµ·æ¥æ—¢å›°éš¾åˆåˆ«æ‰­ã€‚äºæ˜¯æˆ‘ä»¬å¯èƒ½ä¼šé€‰æ‹©å¦¥åï¼Œé€šè¿‡å…ˆåè¯·æ±‚ä»£æ›¿åŒæ—¶è¯·æ±‚ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">api.getAvatar(user) &#123; avatar -&gt;</span><br><span class="line">    api.getCompanyLogo(user) &#123; logo -&gt;</span><br><span class="line">        show(merge(avatar, logo))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨å®é™…å¼€å‘ä¸­å¦‚æœè¿™æ ·å†™ï¼Œæœ¬æ¥èƒ½å¤Ÿå¹¶è¡Œå¤„ç†çš„è¯·æ±‚è¢«å¼ºåˆ¶é€šè¿‡ä¸²è¡Œçš„æ–¹å¼å»å®ç°ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç­‰å¾…æ—¶é—´é•¿äº†ä¸€å€ï¼Œä¹Ÿå°±æ˜¯æ€§èƒ½å·®äº†ä¸€å€ã€‚</p>
<p>è€Œå¦‚æœä½¿ç”¨åç¨‹ï¼Œå¯ä»¥ç›´æ¥æŠŠä¸¤ä¸ªå¹¶è¡Œè¯·æ±‚å†™æˆä¸Šä¸‹ä¸¤è¡Œï¼Œæœ€åå†æŠŠç»“æœè¿›è¡Œåˆå¹¶å³å¯ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">coroutineScope.launch(Dispatchers.Main) &#123;</span><br><span class="line">    <span class="comment">//            ğŸ‘‡  async å‡½æ•°ä¹‹åå†è®²</span></span><br><span class="line">    <span class="keyword">val</span> avatar = async &#123; api.getAvatar(user) &#125;    <span class="comment">// è·å–ç”¨æˆ·å¤´åƒ</span></span><br><span class="line">    <span class="keyword">val</span> logo = async &#123; api.getCompanyLogo(user) &#125; <span class="comment">// è·å–ç”¨æˆ·æ‰€åœ¨å…¬å¸çš„ logo</span></span><br><span class="line">    <span class="keyword">val</span> merged = suspendingMerge(avatar, logo)    <span class="comment">// åˆå¹¶ç»“æœ</span></span><br><span class="line">    <span class="comment">//                  ğŸ‘†</span></span><br><span class="line">    show(merged) <span class="comment">// æ›´æ–° UI</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€˜å¯ä»¥çœ‹åˆ°ï¼Œå³ä¾¿æ˜¯æ¯”è¾ƒå¤æ‚çš„å¹¶è¡Œç½‘ç»œè¯·æ±‚ï¼Œä¹Ÿèƒ½å¤Ÿé€šè¿‡åç¨‹å†™å‡ºç»“æ„æ¸…æ™°çš„ä»£ç ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ <code>suspendingMerge</code> å¹¶ä¸æ˜¯åç¨‹ API ä¸­æä¾›çš„æ–¹æ³•ï¼Œè€Œæ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„ä¸€ä¸ªå¯ã€ŒæŒ‚èµ·ã€çš„ç»“æœåˆå¹¶æ–¹æ³•ã€‚</p>
<p>è®©å¤æ‚çš„å¹¶å‘ä»£ç ï¼Œå†™èµ·æ¥å˜å¾—ç®€å•ä¸”æ¸…æ™°ï¼Œæ˜¯åç¨‹çš„ä¼˜åŠ¿ã€‚</p>
<p>è¿™é‡Œï¼Œä¸¤ä¸ªæ²¡æœ‰ç›¸å…³æ€§çš„åå°ä»»åŠ¡ï¼Œå› ä¸ºç”¨äº†åç¨‹ï¼Œè¢«å®‰æ’å¾—æ˜æ˜ç™½ç™½ï¼Œäº’ç›¸ä¹‹é—´é…åˆå¾—å¾ˆå¥½ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¹‹å‰è¯´çš„ã€Œåä½œå¼ä»»åŠ¡ã€ã€‚</p>
<p>æœ¬æ¥éœ€è¦å›è°ƒï¼Œç°åœ¨ç›´æ¥æ²¡æœ‰å›è°ƒäº†ï¼Œè¿™ç§ä» 1 åˆ° 0 çš„è®¾è®¡æ€æƒ³çœŸçš„å¦™å“‰ã€‚</p>
</li>
</ol>
<pre><code>Kotlin åç¨‹æ˜¯ä»¥å®˜æ–¹æ‰©å±•åº“çš„å½¢å¼è¿›è¡Œæ”¯æŒçš„ã€‚è€Œä¸”ï¼Œæˆ‘ä»¬æ‰€ä½¿ç”¨çš„ã€Œæ ¸å¿ƒåº“ã€å’Œ ã€Œå¹³å°åº“ã€çš„ç‰ˆæœ¬åº”è¯¥ä¿æŒä¸€è‡´ã€‚

- æ ¸å¿ƒåº“ä¸­åŒ…å«çš„ä»£ç ä¸»è¦æ˜¯åç¨‹çš„å…¬å…± API éƒ¨åˆ†ã€‚æœ‰äº†è¿™ä¸€å±‚å…¬å…±ä»£ç ï¼Œæ‰ä½¿å¾—åç¨‹åœ¨å„ä¸ªå¹³å°ä¸Šçš„æ¥å£å¾—åˆ°ç»Ÿä¸€ã€‚
- å¹³å°åº“ä¸­åŒ…å«çš„ä»£ç ä¸»è¦æ˜¯åç¨‹æ¡†æ¶åœ¨å…·ä½“å¹³å°çš„å…·ä½“å®ç°æ–¹å¼ã€‚å› ä¸ºå¤šçº¿ç¨‹åœ¨å„ä¸ªå¹³å°çš„å®ç°æ–¹å¼æ˜¯æœ‰æ‰€å·®å¼‚çš„ã€‚

#### å¼€å§‹ä½¿ç”¨åç¨‹

åç¨‹æœ€ç®€å•çš„ä½¿ç”¨æ–¹æ³•ï¼Œå…¶å®åœ¨å‰é¢ç« èŠ‚å°±å·²ç»çœ‹åˆ°äº†ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ª `launch` å‡½æ•°å®ç°çº¿ç¨‹åˆ‡æ¢çš„åŠŸèƒ½ï¼š

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="comment">//               ğŸ‘‡</span></span><br><span class="line">coroutineScope.launch(Dispatchers.IO) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

è¿™ä¸ª `launch` å‡½æ•°ï¼Œå®ƒå…·ä½“çš„å«ä¹‰æ˜¯ï¼šæˆ‘è¦åˆ›å»ºä¸€ä¸ªæ–°çš„åç¨‹ï¼Œå¹¶åœ¨æŒ‡å®šçš„çº¿ç¨‹ä¸Šè¿è¡Œå®ƒã€‚è¿™ä¸ªè¢«åˆ›å»ºã€è¢«è¿è¡Œçš„æ‰€è°“ã€Œåç¨‹ã€æ˜¯è°ï¼Ÿå°±æ˜¯ä½ ä¼ ç»™ `launch` çš„é‚£äº›ä»£ç ï¼Œè¿™ä¸€æ®µè¿ç»­ä»£ç å«åšä¸€ä¸ªã€Œåç¨‹ã€ã€‚

æ‰€ä»¥ï¼Œä»€ä¹ˆæ—¶å€™ç”¨åç¨‹ï¼Ÿå½“ä½ éœ€è¦åˆ‡çº¿ç¨‹æˆ–è€…æŒ‡å®šçº¿ç¨‹çš„æ—¶å€™ã€‚ä½ è¦åœ¨åå°æ‰§è¡Œä»»åŠ¡ï¼Ÿåˆ‡ï¼

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">launch(Dispatchers.IO) &#123;</span><br><span class="line">    <span class="keyword">val</span> image = getImage(imageId)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

ç„¶åéœ€è¦åœ¨å‰å°æ›´æ–°ç•Œé¢ï¼Ÿå†åˆ‡ï¼

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">coroutineScope.launch(Dispatchers.IO) &#123;</span><br><span class="line">    <span class="keyword">val</span> image = getImage(imageId)</span><br><span class="line">    launch(Dispatch.Main) &#123;</span><br><span class="line">        avatarIv.setImageBitmap(image)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

å¥½åƒæœ‰ç‚¹ä¸å¯¹åŠ²ï¼Ÿè¿™ä¸è¿˜æ˜¯æœ‰åµŒå¥—å˜›ã€‚

å¦‚æœåªæ˜¯ä½¿ç”¨ `launch` å‡½æ•°ï¼Œåç¨‹å¹¶ä¸èƒ½æ¯”çº¿ç¨‹åšæ›´å¤šçš„äº‹ã€‚ä¸è¿‡åç¨‹ä¸­å´æœ‰ä¸€ä¸ªå¾ˆå®ç”¨çš„å‡½æ•°ï¼š`withContext` ã€‚è¿™ä¸ªå‡½æ•°å¯ä»¥åˆ‡æ¢åˆ°æŒ‡å®šçš„çº¿ç¨‹ï¼Œå¹¶åœ¨é—­åŒ…å†…çš„é€»è¾‘æ‰§è¡Œç»“æŸä¹‹åï¼Œè‡ªåŠ¨æŠŠçº¿ç¨‹åˆ‡å›å»ç»§ç»­æ‰§è¡Œã€‚é‚£ä¹ˆå¯ä»¥å°†ä¸Šé¢çš„ä»£ç å†™æˆè¿™æ ·ï¼š

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">coroutineScope.launch(Dispatchers.Main) &#123;      <span class="comment">// ğŸ‘ˆ åœ¨ UI çº¿ç¨‹å¼€å§‹</span></span><br><span class="line">    <span class="keyword">val</span> image = withContext(Dispatchers.IO) &#123;  <span class="comment">// ğŸ‘ˆ åˆ‡æ¢åˆ° IO çº¿ç¨‹ï¼Œå¹¶åœ¨æ‰§è¡Œå®Œæˆååˆ‡å› UI çº¿ç¨‹</span></span><br><span class="line">        getImage(imageId)                      <span class="comment">// ğŸ‘ˆ å°†ä¼šè¿è¡Œåœ¨ IO çº¿ç¨‹</span></span><br><span class="line">    &#125;</span><br><span class="line">    avatarIv.setImageBitmap(image)             <span class="comment">// ğŸ‘ˆ å›åˆ° UI çº¿ç¨‹æ›´æ–° UI</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

è¿™ç§å†™æ³•çœ‹ä¸Šå»å¥½åƒå’Œåˆšæ‰é‚£ç§åŒºåˆ«ä¸å¤§ï¼Œä½†å¦‚æœä½ éœ€è¦é¢‘ç¹åœ°è¿›è¡Œçº¿ç¨‹åˆ‡æ¢ï¼Œè¿™ç§å†™æ³•çš„ä¼˜åŠ¿å°±ä¼šä½“ç°å‡ºæ¥ã€‚å¯ä»¥å‚è€ƒä¸‹é¢çš„å¯¹æ¯”ï¼š

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="comment">// ç¬¬ä¸€ç§å†™æ³•</span></span><br><span class="line">coroutineScope.launch(Dispachers.IO) &#123;</span><br><span class="line">    ...</span><br><span class="line">    launch(Dispachers.Main)&#123;</span><br><span class="line">        ...</span><br><span class="line">        launch(Dispachers.IO) &#123;</span><br><span class="line">            ...</span><br><span class="line">            launch(Dispacher.Main) &#123;</span><br><span class="line">                ...</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">â€‹</span><br><span class="line"><span class="comment">// é€šè¿‡ç¬¬äºŒç§å†™æ³•æ¥å®ç°ç›¸åŒçš„é€»è¾‘</span></span><br><span class="line">coroutineScope.launch(Dispachers.Main) &#123;</span><br><span class="line">    ...</span><br><span class="line">    withContext(Dispachers.IO) &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    withContext(Dispachers.IO) &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

ç”±äºå¯ä»¥&quot;è‡ªåŠ¨åˆ‡å›æ¥&quot;ï¼Œæ¶ˆé™¤äº†å¹¶å‘ä»£ç åœ¨åä½œæ—¶çš„åµŒå¥—ã€‚ç”±äºæ¶ˆé™¤äº†åµŒå¥—å…³ç³»ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥æŠŠ `withContext` æ”¾è¿›ä¸€ä¸ªå•ç‹¬çš„å‡½æ•°é‡Œé¢ï¼š

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">launch(Dispachers.Main) &#123;              // ğŸ‘ˆ åœ¨ UI çº¿ç¨‹å¼€å§‹</span><br><span class="line">    val image = getImage(imageId)</span><br><span class="line">    avatarIv.setImageBitmap(image)     // ğŸ‘ˆ æ‰§è¡Œç»“æŸåï¼Œè‡ªåŠ¨åˆ‡æ¢å› UI çº¿ç¨‹</span><br><span class="line">&#125;</span><br><span class="line">//                               ğŸ‘‡</span><br><span class="line">fun getImage(imageId: Int) = withContext(Dispatchers.IO) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

è¿™å°±æ˜¯ä¹‹å‰è¯´çš„ã€Œç”¨åŒæ­¥çš„æ–¹å¼å†™å¼‚æ­¥çš„ä»£ç ã€äº†ã€‚

ä¸è¿‡å¦‚æœåªæ˜¯è¿™æ ·å†™ï¼Œç¼–è¯‘å™¨æ˜¯ä¼šæŠ¥é”™çš„ï¼š

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">getImage</span><span class="params">(imageId: <span class="type">Int</span>)</span></span> = withContext(Dispatchers.IO) &#123;</span><br><span class="line">    <span class="comment">// IDE æŠ¥é”™ Suspend function'withContext' should be called only from a coroutine or another suspend funcion</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

æ„æ€æ˜¯è¯´ï¼Œ`withContext` æ˜¯ä¸€ä¸ª `suspend` å‡½æ•°ï¼Œå®ƒéœ€è¦åœ¨åç¨‹æˆ–è€…æ˜¯å¦ä¸€ä¸ª `suspend` å‡½æ•°ä¸­è°ƒç”¨ã€‚

------

å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½æ˜¯ç”¨ `launch` å‡½æ•°æ¥åˆ›å»ºåç¨‹ï¼Œå…¶å®è¿˜æœ‰å…¶ä»–ä¸¤ä¸ªå‡½æ•°ä¹Ÿå¯ä»¥ç”¨æ¥åˆ›å»ºåç¨‹ï¼š

- `runBlocking`
- `async`

`runBlocking` é€šå¸¸é€‚ç”¨äºå•å…ƒæµ‹è¯•çš„åœºæ™¯ï¼Œè€Œä¸šåŠ¡å¼€å‘ä¸­ä¸ä¼šç”¨åˆ°è¿™ä¸ªå‡½æ•°ï¼Œå› ä¸ºå®ƒæ˜¯çº¿ç¨‹é˜»å¡çš„ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬ä¸»è¦æ¥å¯¹æ¯” `launch` ä¸ `async` è¿™ä¸¤ä¸ªå‡½æ•°ã€‚

- ç›¸åŒç‚¹ï¼šå®ƒä»¬éƒ½å¯ä»¥ç”¨æ¥å¯åŠ¨ä¸€ä¸ªåç¨‹ï¼Œè¿”å›çš„éƒ½æ˜¯ `Coroutine`ï¼Œæˆ‘ä»¬è¿™é‡Œä¸éœ€è¦çº ç»“å…·ä½“æ˜¯è¿”å›å“ªä¸ªç±»ã€‚
- ä¸åŒç‚¹ï¼š`async` è¿”å›çš„ `Coroutine` å¤šå®ç°äº† `Deferred` æ¥å£ã€‚

å…³äº `Deferred` æ›´æ·±å…¥çš„çŸ¥è¯†å°±ä¸åœ¨è¿™é‡Œè¿‡å¤šé˜è¿°ï¼Œå®ƒçš„æ„æ€å°±æ˜¯å»¶è¿Ÿï¼Œä¹Ÿå°±æ˜¯ç»“æœç¨åæ‰èƒ½æ‹¿åˆ°ã€‚

æˆ‘ä»¬è°ƒç”¨ `Deferred.await()` å°±å¯ä»¥å¾—åˆ°ç»“æœäº†ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­çœ‹çœ‹ `async` æ˜¯å¦‚ä½•ä½¿ç”¨çš„

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"></span><br><span class="line">coroutineScope.launch(Dispatchers.Main) &#123;</span><br><span class="line">    <span class="comment">//                      ğŸ‘‡  async å‡½æ•°å¯åŠ¨æ–°çš„åç¨‹</span></span><br><span class="line">    <span class="keyword">val</span> avatar: Deferred = async &#123; api.getAvatar(user) &#125;    <span class="comment">// è·å–ç”¨æˆ·å¤´åƒ</span></span><br><span class="line">    <span class="keyword">val</span> logo: Deferred = async &#123; api.getCompanyLogo(user) &#125; <span class="comment">// è·å–ç”¨æˆ·æ‰€åœ¨å…¬å¸çš„ logo</span></span><br><span class="line">    <span class="comment">//            ğŸ‘‡          ğŸ‘‡ è·å–è¿”å›å€¼</span></span><br><span class="line">    show(avatar.await(), logo.await())                     <span class="comment">// æ›´æ–° UI</span></span><br><span class="line">    </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

å¯ä»¥çœ‹åˆ° avatar å’Œ logo çš„ç±»å‹å¯ä»¥å£°æ˜ä¸º `Deferred` ï¼Œé€šè¿‡ `await` è·å–ç»“æœå¹¶ä¸”æ›´æ–°åˆ° UI ä¸Šæ˜¾ç¤ºã€‚

`await` å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">suspend</span> <span class="function"><span class="keyword">fun</span> <span class="title">await</span><span class="params">()</span></span>: T</span><br></pre></td></tr></table></figure></code></pre><ol start="39">
<li><h3 id="suspend-ã€ŒæŒ‚èµ·ã€çš„æœ¬è´¨"><a href="#suspend-ã€ŒæŒ‚èµ·ã€çš„æœ¬è´¨" class="headerlink" title="suspend ã€ŒæŒ‚èµ·ã€çš„æœ¬è´¨"></a>suspend ã€ŒæŒ‚èµ·ã€çš„æœ¬è´¨</h3><blockquote>
<p><strong>æŒ‚èµ·ï¼Œå°±æ˜¯ä¸€ä¸ªç¨åä¼šè¢«è‡ªåŠ¨åˆ‡å›æ¥çš„çº¿ç¨‹è°ƒåº¦æ“ä½œã€‚</strong></p>
</blockquote>
<p>åç¨‹ä¸­ã€ŒæŒ‚èµ·ã€çš„å¯¹è±¡åˆ°åº•æ˜¯ä»€ä¹ˆï¼ŸæŒ‚èµ·çº¿ç¨‹ï¼Œè¿˜æ˜¯æŒ‚èµ·å‡½æ•°ï¼Ÿéƒ½ä¸å¯¹ï¼Œ<strong>æˆ‘ä»¬æŒ‚èµ·çš„å¯¹è±¡æ˜¯åç¨‹ã€‚</strong></p>
<p>è¿˜è®°å¾—åç¨‹æ˜¯ä»€ä¹ˆå—ï¼Ÿå¯åŠ¨ä¸€ä¸ªåç¨‹å¯ä»¥ä½¿ç”¨ <code>launch</code> æˆ–è€… <code>async</code> å‡½æ•°ï¼Œåç¨‹å…¶å®å°±æ˜¯è¿™ä¸¤ä¸ªå‡½æ•°ä¸­é—­åŒ…çš„ä»£ç å—ã€‚</p>
<p><code>launch</code> ï¼Œ<code>async</code> æˆ–è€…å…¶ä»–å‡½æ•°åˆ›å»ºçš„åç¨‹ï¼Œåœ¨æ‰§è¡Œåˆ°æŸä¸€ä¸ª <code>suspend</code> å‡½æ•°çš„æ—¶å€™ï¼Œè¿™ä¸ªåç¨‹ä¼šè¢«ã€Œsuspendã€ï¼Œä¹Ÿå°±æ˜¯è¢«æŒ‚èµ·ã€‚</p>
<p>é‚£æ­¤æ—¶åˆæ˜¯ä»å“ªé‡ŒæŒ‚èµ·ï¼Ÿ<strong>ä»å½“å‰çº¿ç¨‹æŒ‚èµ·ã€‚æ¢å¥è¯è¯´ï¼Œå°±æ˜¯è¿™ä¸ªåç¨‹ä»æ­£åœ¨æ‰§è¡Œå®ƒçš„çº¿ç¨‹ä¸Šè„±ç¦»ã€‚</strong></p>
<p>æ³¨æ„ï¼Œä¸æ˜¯è¿™ä¸ªåç¨‹åœä¸‹æ¥äº†ï¼æ˜¯è„±ç¦»ï¼Œå½“å‰çº¿ç¨‹ä¸å†ç®¡è¿™ä¸ªåç¨‹è¦å»åšä»€ä¹ˆäº†ã€‚</p>
<p>suspend æ˜¯æœ‰æš‚åœçš„æ„æ€ï¼Œä½†æˆ‘ä»¬åœ¨åç¨‹ä¸­åº”è¯¥ç†è§£ä¸ºï¼šå½“çº¿ç¨‹æ‰§è¡Œåˆ°åç¨‹çš„ suspend å‡½æ•°çš„æ—¶å€™ï¼Œæš‚æ—¶ä¸ç»§ç»­æ‰§è¡Œåç¨‹ä»£ç äº†ã€‚</p>
<p>æˆ‘ä»¬å…ˆè®©æ—¶é—´é™æ­¢ï¼Œç„¶åå…µåˆ†ä¸¤è·¯ï¼Œåˆ†åˆ«çœ‹çœ‹è¿™ä¸¤ä¸ªäº’ç›¸è„±ç¦»çš„çº¿ç¨‹å’Œåç¨‹æ¥ä¸‹æ¥å°†ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…ï¼š</p>
<p><strong>çº¿ç¨‹ï¼š</strong></p>
<p>å‰é¢æˆ‘ä»¬æåˆ°ï¼ŒæŒ‚èµ·ä¼šè®©åç¨‹ä»æ­£åœ¨æ‰§è¡Œå®ƒçš„çº¿ç¨‹ä¸Šè„±ç¦»ï¼Œå…·ä½“åˆ°ä»£ç å…¶å®æ˜¯ï¼š</p>
<p>åç¨‹çš„ä»£ç å—ä¸­ï¼Œçº¿ç¨‹æ‰§è¡Œåˆ°äº† suspend å‡½æ•°è¿™é‡Œçš„æ—¶å€™ï¼Œå°±æš‚æ—¶ä¸å†æ‰§è¡Œå‰©ä½™çš„åç¨‹ä»£ç ï¼Œè·³å‡ºåç¨‹çš„ä»£ç å—ã€‚</p>
<p>é‚£çº¿ç¨‹æ¥ä¸‹æ¥ä¼šåšä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>å¦‚æœå®ƒæ˜¯ä¸€ä¸ªåå°çº¿ç¨‹ï¼š</p>
<ul>
<li>è¦ä¹ˆæ— äº‹å¯åšï¼Œè¢«ç³»ç»Ÿå›æ”¶</li>
<li>è¦ä¹ˆç»§ç»­æ‰§è¡Œåˆ«çš„åå°ä»»åŠ¡</li>
</ul>
<p>è·Ÿ Java çº¿ç¨‹æ± é‡Œçš„çº¿ç¨‹åœ¨å·¥ä½œç»“æŸä¹‹åæ˜¯å®Œå…¨ä¸€æ ·çš„ï¼šå›æ”¶æˆ–è€…å†åˆ©ç”¨ã€‚</p>
<p>å¦‚æœè¿™ä¸ªçº¿ç¨‹å®ƒæ˜¯ Android çš„ä¸»çº¿ç¨‹ï¼Œé‚£å®ƒæ¥ä¸‹æ¥å°±ä¼šç»§ç»­å›å»å·¥ä½œï¼šä¹Ÿå°±æ˜¯ä¸€ç§’é’Ÿ 60 æ¬¡çš„ç•Œé¢åˆ·æ–°ä»»åŠ¡ã€‚</p>
<p>ä¸€ä¸ªå¸¸è§çš„åœºæ™¯æ˜¯ï¼Œè·å–ä¸€ä¸ªå›¾ç‰‡ï¼Œç„¶åæ˜¾ç¤ºå‡ºæ¥ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="comment">// ä¸»çº¿ç¨‹ä¸­</span></span><br><span class="line">GlobalScope.launch(Dispatchers.Main) &#123;</span><br><span class="line">  <span class="keyword">val</span> image = suspendingGetImage(imageId)  <span class="comment">// è·å–å›¾ç‰‡</span></span><br><span class="line">  avatarIv.setImageBitmap(image)           <span class="comment">// æ˜¾ç¤ºå‡ºæ¥</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">suspend</span> <span class="function"><span class="keyword">fun</span> <span class="title">suspendingGetImage</span><span class="params">(id: <span class="type">String</span>)</span></span> = withContext(Dispatchers.IO) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ®µæ‰§è¡Œåœ¨ä¸»çº¿ç¨‹çš„åç¨‹ï¼Œå®ƒå®è´¨ä¸Šä¼šå¾€ä½ çš„ä¸»çº¿ç¨‹ <code>post</code> ä¸€ä¸ª <code>Runnable</code>ï¼Œè¿™ä¸ª <code>Runnable</code> å°±æ˜¯ä½ çš„åç¨‹ä»£ç ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">handler.post &#123;</span><br><span class="line">  <span class="keyword">val</span> image = suspendingGetImage(imageId)</span><br><span class="line">  avatarIv.setImageBitmap(image)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“è¿™ä¸ªåç¨‹è¢«æŒ‚èµ·çš„æ—¶å€™ï¼Œå°±æ˜¯ä¸»çº¿ç¨‹ <code>post</code> çš„è¿™ä¸ª <code>Runnable</code> æå‰ç»“æŸï¼Œç„¶åç»§ç»­æ‰§è¡Œå®ƒç•Œé¢åˆ·æ–°çš„ä»»åŠ¡ã€‚</p>
<hr>
<p><strong>åç¨‹ï¼š</strong></p>
<p>çº¿ç¨‹çš„ä»£ç åœ¨åˆ°è¾¾ <code>suspend</code> å‡½æ•°çš„æ—¶å€™è¢«ææ–­ï¼Œæ¥ä¸‹æ¥åç¨‹ä¼šä»è¿™ä¸ª <code>suspend</code> å‡½æ•°å¼€å§‹ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œä¸è¿‡æ˜¯åœ¨<strong>æŒ‡å®šçš„çº¿ç¨‹</strong>ã€‚</p>
<p>è°æŒ‡å®šçš„ï¼Ÿæ˜¯ <code>suspend</code> å‡½æ•°æŒ‡å®šçš„ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­ï¼Œå‡½æ•°å†…éƒ¨çš„ <code>withContext</code> ä¼ å…¥çš„ <code>Dispatchers.IO</code> æ‰€æŒ‡å®šçš„ IO çº¿ç¨‹ã€‚</p>
<p><code>Dispatchers</code> è°ƒåº¦å™¨ï¼Œå®ƒå¯ä»¥å°†åç¨‹é™åˆ¶åœ¨ä¸€ä¸ªç‰¹å®šçš„çº¿ç¨‹æ‰§è¡Œï¼Œæˆ–è€…å°†å®ƒåˆ†æ´¾åˆ°ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œæˆ–è€…è®©å®ƒä¸å—é™åˆ¶åœ°è¿è¡Œï¼Œå…³äº <code>Dispatchers</code> è¿™é‡Œå…ˆä¸å±•å¼€äº†ã€‚</p>
<p>é‚£æˆ‘ä»¬å¹³æ—¥é‡Œå¸¸ç”¨åˆ°çš„è°ƒåº¦å™¨æœ‰å“ªäº›ï¼Ÿ</p>
<p>å¸¸ç”¨çš„ <code>Dispatchers</code> ï¼Œæœ‰ä»¥ä¸‹ä¸‰ç§ï¼š</p>
<ul>
<li><code>Dispatchers.Main</code>ï¼šAndroid ä¸­çš„ä¸»çº¿ç¨‹</li>
<li><code>Dispatchers.IO</code>ï¼šé’ˆå¯¹ç£ç›˜å’Œç½‘ç»œ IO è¿›è¡Œäº†ä¼˜åŒ–ï¼Œé€‚åˆ IO å¯†é›†å‹çš„ä»»åŠ¡ï¼Œæ¯”å¦‚ï¼šè¯»å†™æ–‡ä»¶ï¼Œæ“ä½œæ•°æ®åº“ä»¥åŠç½‘ç»œè¯·æ±‚</li>
<li><code>Dispatchers.Default</code>ï¼šé€‚åˆ CPU å¯†é›†å‹çš„ä»»åŠ¡ï¼Œæ¯”å¦‚è®¡ç®—</li>
</ul>
<p>å›åˆ°æˆ‘ä»¬çš„åç¨‹ï¼Œå®ƒä» <code>suspend</code> å‡½æ•°å¼€å§‹è„±ç¦»å¯åŠ¨å®ƒçš„çº¿ç¨‹ï¼Œç»§ç»­æ‰§è¡Œåœ¨ <code>Dispatchers</code> æ‰€æŒ‡å®šçš„ IO çº¿ç¨‹ã€‚</p>
<p>ç´§æ¥ç€åœ¨ <code>suspend</code> å‡½æ•°æ‰§è¡Œå®Œæˆä¹‹åï¼Œåç¨‹ä¸ºæˆ‘ä»¬åšçš„æœ€çˆ½çš„äº‹å°±æ¥äº†ï¼šä¼š<strong>è‡ªåŠ¨å¸®æˆ‘ä»¬æŠŠçº¿ç¨‹å†åˆ‡å›æ¥</strong>ã€‚</p>
<p>è¿™ä¸ªã€Œåˆ‡å›æ¥ã€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</p>
<p>æˆ‘ä»¬çš„åç¨‹åŸæœ¬æ˜¯è¿è¡Œåœ¨<strong>ä¸»çº¿ç¨‹</strong>çš„ï¼Œå½“ä»£ç é‡åˆ° suspend å‡½æ•°çš„æ—¶å€™ï¼Œå‘ç”Ÿçº¿ç¨‹åˆ‡æ¢ï¼Œæ ¹æ® <code>Dispatchers</code> åˆ‡æ¢åˆ°äº† IO çº¿ç¨‹ï¼›</p>
<p>å½“è¿™ä¸ªå‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œçº¿ç¨‹åˆåˆ‡äº†å›æ¥ï¼Œã€Œåˆ‡å›æ¥ã€ä¹Ÿå°±æ˜¯åç¨‹ä¼šå¸®æˆ‘å† <code>post</code> ä¸€ä¸ª <code>Runnable</code>ï¼Œè®©æˆ‘å‰©ä¸‹çš„ä»£ç ç»§ç»­å›åˆ°ä¸»çº¿ç¨‹å»æ‰§è¡Œã€‚</p>
</li>
</ol>
<pre><code>æˆ‘ä»¬ä»çº¿ç¨‹å’Œåç¨‹çš„ä¸¤ä¸ªè§’åº¦éƒ½åˆ†æå®Œæˆåï¼Œç»ˆäºå¯ä»¥å¯¹åç¨‹çš„ã€ŒæŒ‚èµ·ã€suspend åšä¸€ä¸ªè§£é‡Šï¼š

åç¨‹åœ¨æ‰§è¡Œåˆ°æœ‰ suspend æ ‡è®°çš„å‡½æ•°çš„æ—¶å€™ï¼Œä¼šè¢« suspend ä¹Ÿå°±æ˜¯è¢«æŒ‚èµ·ï¼Œè€Œæ‰€è°“çš„è¢«æŒ‚èµ·ï¼Œå°±æ˜¯åˆ‡ä¸ªçº¿ç¨‹ï¼›

ä¸è¿‡åŒºåˆ«åœ¨äºï¼Œ**æŒ‚èµ·å‡½æ•°åœ¨æ‰§è¡Œå®Œæˆä¹‹åï¼Œåç¨‹ä¼šé‡æ–°åˆ‡å›å®ƒåŸå…ˆçš„çº¿ç¨‹**ã€‚

å†ç®€å•æ¥è®²ï¼Œåœ¨ Kotlin ä¸­æ‰€è°“çš„æŒ‚èµ·ï¼Œå°±æ˜¯**ä¸€ä¸ªç¨åä¼šè¢«è‡ªåŠ¨åˆ‡å›æ¥çš„çº¿ç¨‹è°ƒåº¦æ“ä½œ**ã€‚

&gt;  è¿™ä¸ªã€Œåˆ‡å›æ¥ã€çš„åŠ¨ä½œï¼Œåœ¨ Kotlin é‡Œå«åš [resume](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines.experimental/-continuation/resume.html)ï¼Œæ¢å¤ã€‚

é€šè¿‡åˆšæ‰çš„åˆ†ææˆ‘ä»¬çŸ¥é“ï¼šæŒ‚èµ·ä¹‹åæ˜¯éœ€è¦æ¢å¤ã€‚

è€Œæ¢å¤è¿™ä¸ªåŠŸèƒ½æ˜¯åç¨‹çš„ï¼Œå¦‚æœä½ ä¸åœ¨åç¨‹é‡Œé¢è°ƒç”¨ï¼Œæ¢å¤è¿™ä¸ªåŠŸèƒ½æ²¡æ³•å®ç°ï¼Œæ‰€ä»¥ä¹Ÿå°±å›ç­”äº†è¿™ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆæŒ‚èµ·å‡½æ•°å¿…é¡»åœ¨åç¨‹æˆ–è€…å¦ä¸€ä¸ªæŒ‚èµ·å‡½æ•°é‡Œè¢«è°ƒç”¨ã€‚

å†ç»†æƒ³ä¸‹è¿™ä¸ªé€»è¾‘ï¼šä¸€ä¸ªæŒ‚èµ·å‡½æ•°è¦ä¹ˆåœ¨åç¨‹é‡Œè¢«è°ƒç”¨ï¼Œè¦ä¹ˆåœ¨å¦ä¸€ä¸ªæŒ‚èµ·å‡½æ•°é‡Œè¢«è°ƒç”¨ï¼Œé‚£ä¹ˆå®ƒå…¶å®ç›´æ¥æˆ–è€…é—´æ¥åœ°ï¼Œæ€»æ˜¯ä¼šåœ¨ä¸€ä¸ªåç¨‹é‡Œè¢«è°ƒç”¨çš„ã€‚

æ‰€ä»¥ï¼Œè¦æ±‚ `suspend` å‡½æ•°åªèƒ½åœ¨åç¨‹é‡Œæˆ–è€…å¦ä¸€ä¸ª suspend å‡½æ•°é‡Œè¢«è°ƒç”¨ï¼Œè¿˜æ˜¯ä¸ºäº†è¦è®©åç¨‹èƒ½å¤Ÿåœ¨ `suspend` å‡½æ•°åˆ‡æ¢çº¿ç¨‹ä¹‹åå†åˆ‡å›æ¥ã€‚

------

####  æ€ä¹ˆå°±ã€ŒæŒ‚èµ·ã€äº†ï¼Ÿ

æˆ‘ä»¬äº†è§£åˆ°äº†ä»€ä¹ˆæ˜¯ã€ŒæŒ‚èµ·ã€åï¼Œå†æ¥ç€çœ‹çœ‹è¿™ä¸ªã€ŒæŒ‚èµ·ã€æ˜¯æ€ä¹ˆåšåˆ°çš„ã€‚

å…ˆéšä¾¿å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„ `suspend` å‡½æ•°ï¼š

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">suspend</span> <span class="function"><span class="keyword">fun</span> <span class="title">suspendingPrint</span><span class="params">()</span></span> &#123;</span><br><span class="line">  println(<span class="string">"Thread: <span class="subst">$&#123;Thread.currentThread().name&#125;</span>"</span>)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">I/System.<span class="keyword">out</span>: Thread: main</span><br></pre></td></tr></table></figure>

è¾“å‡ºçš„ç»“æœè¿˜æ˜¯åœ¨ä¸»çº¿ç¨‹ã€‚

ä¸ºä»€ä¹ˆæ²¡åˆ‡æ¢çº¿ç¨‹ï¼Ÿå› ä¸ºå®ƒä¸çŸ¥é“å¾€å“ªåˆ‡ï¼Œéœ€è¦æˆ‘ä»¬å‘Šè¯‰å®ƒã€‚

å¯¹æ¯”ä¹‹å‰ä¾‹å­ä¸­ `suspendingGetImage` å‡½æ•°ä»£ç ï¼š

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="comment">//                                               ğŸ‘‡</span></span><br><span class="line"><span class="keyword">suspend</span> <span class="function"><span class="keyword">fun</span> <span class="title">suspendingGetImage</span><span class="params">(id: <span class="type">String</span>)</span></span> = withContext(Dispatchers.IO) &#123;</span><br><span class="line">  ...</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

æˆ‘ä»¬å¯ä»¥å‘ç°ä¸åŒä¹‹å¤„å…¶å®åœ¨äº `withContext` å‡½æ•°ã€‚

å…¶å®é€šè¿‡ `withContext` æºç å¯ä»¥çŸ¥é“ï¼Œå®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ªæŒ‚èµ·å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª `Dispatcher` å‚æ•°ï¼Œä¾èµ–è¿™ä¸ª `Dispatcher` å‚æ•°çš„æŒ‡ç¤ºï¼Œä½ çš„åç¨‹è¢«æŒ‚èµ·ï¼Œç„¶ååˆ‡åˆ°åˆ«çš„çº¿ç¨‹ã€‚

æ‰€ä»¥è¿™ä¸ª `suspend`ï¼Œå…¶å®å¹¶ä¸æ˜¯èµ·åˆ°æŠŠä»»ä½•æŠŠåç¨‹æŒ‚èµ·ï¼Œæˆ–è€…è¯´åˆ‡æ¢çº¿ç¨‹çš„ä½œç”¨ã€‚

çœŸæ­£æŒ‚èµ·åç¨‹è¿™ä»¶äº‹ï¼Œæ˜¯ Kotlin çš„åç¨‹æ¡†æ¶å¸®æˆ‘ä»¬åšçš„ã€‚

æ‰€ä»¥æˆ‘ä»¬æƒ³è¦è‡ªå·±å†™ä¸€ä¸ªæŒ‚èµ·å‡½æ•°ï¼Œä»…ä»…åªåŠ ä¸Š `suspend` å…³é”®å­—æ˜¯ä¸è¡Œçš„ï¼Œè¿˜éœ€è¦å‡½æ•°å†…éƒ¨ç›´æ¥æˆ–é—´æ¥åœ°è°ƒç”¨åˆ° Kotlin åç¨‹æ¡†æ¶è‡ªå¸¦çš„ `suspend` å‡½æ•°æ‰è¡Œã€‚

### suspend çš„æ„ä¹‰ï¼Ÿ

è¿™ä¸ª `suspend` å…³é”®å­—ï¼Œæ—¢ç„¶å®ƒå¹¶ä¸æ˜¯çœŸæ­£å®ç°æŒ‚èµ·ï¼Œé‚£å®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ

**å®ƒå…¶å®æ˜¯ä¸€ä¸ªæé†’ã€‚**

å‡½æ•°çš„åˆ›å»ºè€…å¯¹å‡½æ•°çš„ä½¿ç”¨è€…çš„æé†’ï¼šæˆ‘æ˜¯ä¸€ä¸ªè€—æ—¶å‡½æ•°ï¼Œæˆ‘è¢«æˆ‘çš„åˆ›å»ºè€…ç”¨æŒ‚èµ·çš„æ–¹å¼æ”¾åœ¨åå°è¿è¡Œï¼Œæ‰€ä»¥è¯·åœ¨åç¨‹é‡Œè°ƒç”¨æˆ‘ã€‚

ä¸ºä»€ä¹ˆ `suspend` å…³é”®å­—å¹¶æ²¡æœ‰å®é™…å»æ“ä½œæŒ‚èµ·ï¼Œä½† Kotlin å´æŠŠå®ƒæä¾›å‡ºæ¥ï¼Ÿ

å› ä¸ºå®ƒæœ¬æ¥å°±ä¸æ˜¯ç”¨æ¥æ“ä½œæŒ‚èµ·çš„ã€‚

æŒ‚èµ·çš„æ“ä½œ â€”â€” ä¹Ÿå°±æ˜¯åˆ‡çº¿ç¨‹ï¼Œä¾èµ–çš„æ˜¯æŒ‚èµ·å‡½æ•°é‡Œé¢çš„å®é™…ä»£ç ï¼Œè€Œä¸æ˜¯è¿™ä¸ªå…³é”®å­—ã€‚

æ‰€ä»¥è¿™ä¸ªå…³é”®å­—ï¼Œ**åªæ˜¯ä¸€ä¸ªæé†’**ã€‚

è¿˜è®°å¾—åˆšæ‰æˆ‘ä»¬å°è¯•è‡ªå®šä¹‰æŒ‚èµ·å‡½æ•°çš„æ–¹æ³•å—ï¼Ÿ

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="comment">// ğŸ‘‡ redundant suspend modifier</span></span><br><span class="line"><span class="keyword">suspend</span> <span class="function"><span class="keyword">fun</span> <span class="title">suspendingPrint</span><span class="params">()</span></span> &#123;</span><br><span class="line">  println(<span class="string">"Thread: <span class="subst">$&#123;Thread.currentThread().name&#125;</span>"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

å¦‚æœä½ åˆ›å»ºä¸€ä¸ª `suspend` å‡½æ•°ä½†å®ƒå†…éƒ¨ä¸åŒ…å«çœŸæ­£çš„æŒ‚èµ·é€»è¾‘ï¼Œç¼–è¯‘å™¨ä¼šç»™ä½ ä¸€ä¸ªæé†’ï¼š`redundant suspend modifier`ï¼Œå‘Šè¯‰ä½ è¿™ä¸ª `suspend` æ˜¯å¤šä½™çš„ã€‚

å› ä¸ºä½ è¿™ä¸ªå‡½æ•°å®è´¨ä¸Šå¹¶æ²¡æœ‰å‘ç”ŸæŒ‚èµ·ï¼Œé‚£ä½ è¿™ä¸ª `suspend` å…³é”®å­—åªæœ‰ä¸€ä¸ªæ•ˆæœï¼šå°±æ˜¯é™åˆ¶è¿™ä¸ªå‡½æ•°åªèƒ½åœ¨åç¨‹é‡Œè¢«è°ƒç”¨ï¼Œå¦‚æœåœ¨éåç¨‹çš„ä»£ç ä¸­è°ƒç”¨ï¼Œå°±ä¼šç¼–è¯‘ä¸é€šè¿‡ã€‚

æ‰€ä»¥ï¼Œåˆ›å»ºä¸€ä¸ª `suspend` å‡½æ•°ï¼Œä¸ºäº†è®©å®ƒåŒ…å«çœŸæ­£æŒ‚èµ·çš„é€»è¾‘ï¼Œè¦åœ¨å®ƒå†…éƒ¨ç›´æ¥æˆ–é—´æ¥è°ƒç”¨ Kotlin è‡ªå¸¦çš„ `suspend` å‡½æ•°ï¼Œä½ çš„è¿™ä¸ª `suspend` æ‰æ˜¯æœ‰æ„ä¹‰çš„ã€‚

### æ€ä¹ˆè‡ªå®šä¹‰ suspend å‡½æ•°ï¼Ÿ

åœ¨äº†è§£äº† `suspend` å…³é”®å­—çš„æ¥é¾™å»è„‰ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›å…¥ä¸‹ä¸€ä¸ªè¯é¢˜äº†ï¼šæ€ä¹ˆè‡ªå®šä¹‰ `suspend` å‡½æ•°ã€‚

è¿™ä¸ªã€Œæ€ä¹ˆè‡ªå®šä¹‰ã€å…¶å®åˆ†ä¸ºä¸¤ä¸ªé—®é¢˜ï¼š

- ä»€ä¹ˆæ—¶å€™éœ€è¦è‡ªå®šä¹‰ `suspend` å‡½æ•°ï¼Ÿ
- å…·ä½“è¯¥æ€ä¹ˆå†™å‘¢ï¼Ÿ

#### ä»€ä¹ˆæ—¶å€™éœ€è¦è‡ªå®šä¹‰ suspend å‡½æ•°

å¦‚æœä½ çš„æŸä¸ªå‡½æ•°æ¯”è¾ƒè€—æ—¶ï¼Œä¹Ÿå°±æ˜¯è¦ç­‰çš„æ“ä½œï¼Œé‚£å°±æŠŠå®ƒå†™æˆ `suspend` å‡½æ•°ã€‚è¿™å°±æ˜¯åŸåˆ™ã€‚

è€—æ—¶æ“ä½œä¸€èˆ¬åˆ†ä¸ºä¸¤ç±»ï¼šI/O æ“ä½œå’Œ CPU è®¡ç®—å·¥ä½œã€‚æ¯”å¦‚æ–‡ä»¶çš„è¯»å†™ã€ç½‘ç»œäº¤äº’ã€å›¾ç‰‡çš„æ¨¡ç³Šå¤„ç†ï¼Œéƒ½æ˜¯è€—æ—¶çš„ï¼Œé€šé€šå¯ä»¥æŠŠå®ƒä»¬å†™è¿› `suspend` å‡½æ•°é‡Œã€‚

å¦å¤–è¿™ä¸ªã€Œè€—æ—¶ã€è¿˜æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå°±æ˜¯è¿™ä»¶äº‹æœ¬èº«åšèµ·æ¥å¹¶ä¸æ…¢ï¼Œä½†å®ƒéœ€è¦ç­‰å¾…ï¼Œæ¯”å¦‚ 5 ç§’é’Ÿä¹‹åå†åšè¿™ä¸ªæ“ä½œã€‚è¿™ç§ä¹Ÿæ˜¯ `suspend` å‡½æ•°çš„åº”ç”¨åœºæ™¯ã€‚

#### å…·ä½“è¯¥æ€ä¹ˆå†™

ç»™å‡½æ•°åŠ ä¸Š `suspend` å…³é”®å­—ï¼Œç„¶ååœ¨ `withContext` æŠŠå‡½æ•°çš„å†…å®¹åŒ…ä½å°±å¯ä»¥äº†ã€‚

æåˆ°ç”¨ `withContext`æ˜¯å› ä¸ºå®ƒåœ¨æŒ‚èµ·å‡½æ•°é‡ŒåŠŸèƒ½æœ€ç®€å•ç›´æ¥ï¼šæŠŠçº¿ç¨‹è‡ªåŠ¨åˆ‡èµ°å’Œåˆ‡å›ã€‚

å½“ç„¶å¹¶ä¸æ˜¯åªæœ‰ `withContext` è¿™ä¸€ä¸ªå‡½æ•°æ¥è¾…åŠ©æˆ‘ä»¬å®ç°è‡ªå®šä¹‰çš„ `suspend` å‡½æ•°ï¼Œæ¯”å¦‚è¿˜æœ‰ä¸€ä¸ªæŒ‚èµ·å‡½æ•°å« `delay`ï¼Œå®ƒçš„ä½œç”¨æ˜¯ç­‰å¾…ä¸€æ®µæ—¶é—´åå†ç»§ç»­å¾€ä¸‹æ‰§è¡Œä»£ç ã€‚

ä½¿ç”¨å®ƒå°±å¯ä»¥å®ç°åˆšæ‰æåˆ°çš„ç­‰å¾…ç±»å‹çš„è€—æ—¶æ“ä½œï¼š

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line"><span class="keyword">suspend</span> <span class="function"><span class="keyword">fun</span> <span class="title">suspendUntilDone</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">while</span> (!done) &#123;</span><br><span class="line">     delay(<span class="number">5</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre><ol start="40">
<li><h3 id="ä»€ä¹ˆæ˜¯ã€Œéé˜»å¡å¼æŒ‚èµ·ã€"><a href="#ä»€ä¹ˆæ˜¯ã€Œéé˜»å¡å¼æŒ‚èµ·ã€" class="headerlink" title="ä»€ä¹ˆæ˜¯ã€Œéé˜»å¡å¼æŒ‚èµ·ã€"></a>ä»€ä¹ˆæ˜¯ã€Œéé˜»å¡å¼æŒ‚èµ·ã€</h3><blockquote>
<ul>
<li>åç¨‹å°±æ˜¯ä¸ªçº¿ç¨‹æ¡†æ¶</li>
<li>åç¨‹çš„æŒ‚èµ·æœ¬è´¨å°±æ˜¯çº¿ç¨‹åˆ‡å‡ºå»å†åˆ‡å›æ¥</li>
</ul>
</blockquote>
<p>ä»è¯­ä¹‰ä¸Šç†è§£ã€Œéé˜»å¡å¼æŒ‚èµ·ã€ï¼Œè®²çš„æ˜¯ã€Œéé˜»å¡å¼ã€è¿™ä¸ªæ˜¯æŒ‚èµ·çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåç¨‹çš„æŒ‚èµ·ï¼Œå°±æ˜¯éé˜»å¡å¼çš„ï¼Œé˜»å¡ä¸é˜»å¡ï¼Œéƒ½æ˜¯é’ˆå¯¹å•çº¿ç¨‹è®²çš„ï¼Œä¸€æ—¦åˆ‡äº†çº¿ç¨‹ï¼Œè‚¯å®šæ˜¯éé˜»å¡çš„ï¼Œä½ éƒ½è·‘åˆ°åˆ«çš„çº¿ç¨‹äº†ï¼Œä¹‹å‰çš„çº¿ç¨‹å°±è‡ªç”±äº†ï¼Œå¯ä»¥ç»§ç»­åšåˆ«çš„äº‹æƒ…äº†ã€‚</p>
<p>æ‰€ä»¥ã€Œéé˜»å¡å¼æŒ‚èµ·ã€ï¼Œå…¶å®å°±æ˜¯åœ¨è®²åç¨‹åœ¨æŒ‚èµ·çš„åŒæ—¶åˆ‡çº¿ç¨‹è¿™ä»¶äº‹æƒ…ã€‚</p>
<ul>
<li><p>åç¨‹åªæ˜¯åœ¨å†™æ³•ä¸Šã€Œçœ‹èµ·æ¥é˜»å¡ã€ï¼Œå…¶å®æ˜¯ã€Œéé˜»å¡ã€çš„ï¼Œå› ä¸ºåœ¨åç¨‹é‡Œé¢å®ƒåšäº†å¾ˆå¤šå·¥ä½œï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå°±æ˜¯å¸®æˆ‘ä»¬åˆ‡çº¿ç¨‹ã€‚</p>
</li>
<li><p>åˆ‡çº¿ç¨‹å…ˆåˆ‡è¿‡å»ï¼Œç„¶åå†åˆ‡å›æ¥ã€‚</p>
</li>
<li><p>çº¿ç¨‹è™½ç„¶ä¼šåˆ‡ï¼Œä½†å†™æ³•ä¸Šå’Œæ™®é€šçš„å•çº¿ç¨‹å·®ä¸å¤šã€‚</p>
</li>
</ul>
<p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ğŸï¸</span><br><span class="line">main &#123;</span><br><span class="line">    GlobalScope.launch(Dispatchers.Main) &#123;</span><br><span class="line">        <span class="comment">// ğŸ‘‡ è€—æ—¶æ“ä½œ</span></span><br><span class="line">        <span class="keyword">val</span> user = suspendingRequestUser()</span><br><span class="line">        updateView(user)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">suspend</span> <span class="function"><span class="keyword">fun</span> <span class="title">suspendingRequestUser</span><span class="params">()</span></span> : User = withContext(Dispatchers.IO) &#123;</span><br><span class="line">        api.requestUser()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œè€—æ—¶æ“ä½œå’Œæ›´æ–° UI çš„é€»è¾‘åƒå†™å•çº¿ç¨‹ä¸€æ ·æ”¾åœ¨äº†ä¸€èµ·ï¼Œåªæ˜¯åœ¨å¤–é¢åŒ…äº†ä¸€å±‚åç¨‹ã€‚</p>
<p>è€Œæ­£æ˜¯è¿™ä¸ªåç¨‹è§£å†³äº†åŸæ¥æˆ‘ä»¬å•çº¿ç¨‹å†™æ³•ä¼šå¡çº¿ç¨‹è¿™ä»¶äº‹ã€‚</p>
</li>
<li><h3 id="åç¨‹ä¸çº¿ç¨‹"><a href="#åç¨‹ä¸çº¿ç¨‹" class="headerlink" title="åç¨‹ä¸çº¿ç¨‹"></a>åç¨‹ä¸çº¿ç¨‹</h3><p>åœ¨ Kotlin é‡Œï¼Œåç¨‹å°±æ˜¯åŸºäºçº¿ç¨‹æ¥å®ç°çš„ä¸€ç§æ›´ä¸Šå±‚çš„å·¥å…· APIï¼Œç±»ä¼¼äº Java è‡ªå¸¦çš„ Executor ç³»åˆ— API æˆ–è€… Android çš„ Handler ç³»åˆ— APIã€‚</p>
<p>åªä¸è¿‡å‘¢ï¼Œåç¨‹å®ƒä¸ä»…æä¾›äº†æ–¹ä¾¿çš„ APIï¼Œåœ¨è®¾è®¡æ€æƒ³ä¸Šæ˜¯ä¸€ä¸ª<strong>åŸºäºçº¿ç¨‹çš„ä¸Šå±‚æ¡†æ¶</strong>ï¼Œä½ å¯ä»¥ç†è§£ä¸ºæ–°é€ äº†ä¸€äº›æ¦‚å¿µç”¨æ¥å¸®åŠ©ä½ æ›´å¥½åœ°ä½¿ç”¨è¿™äº› APIï¼Œä»…æ­¤è€Œå·²ã€‚</p>
<p>å°±åƒ ReactiveX ä¸€æ ·ï¼Œä¸ºäº†è®©ä½ æ›´å¥½åœ°ä½¿ç”¨å„ç§æ“ä½œç¬¦ APIï¼Œæ–°é€ äº† Observable ç­‰æ¦‚å¿µã€‚</p>
<p>è¯´åˆ°è¿™é‡Œï¼ŒKotlin åç¨‹çš„ä¸‰å¤§ç–‘é—®ï¼šåç¨‹æ˜¯ä»€ä¹ˆã€æŒ‚èµ·æ˜¯ä»€ä¹ˆã€æŒ‚èµ·çš„éé˜»å¡å¼æ˜¯æ€ä¹ˆå›äº‹:</p>
<ul>
<li>åç¨‹å°±æ˜¯åˆ‡çº¿ç¨‹,åŸºäºçº¿ç¨‹æ¥å®ç°çš„ä¸€ç§æ›´ä¸Šå±‚çš„å·¥å…· APIï¼›</li>
<li>æŒ‚èµ·å°±æ˜¯å¯ä»¥è‡ªåŠ¨åˆ‡å›æ¥çš„åˆ‡çº¿ç¨‹ï¼›</li>
<li>æŒ‚èµ·çš„éé˜»å¡å¼æŒ‡çš„æ˜¯å®ƒèƒ½ç”¨çœ‹èµ·æ¥é˜»å¡çš„ä»£ç å†™å‡ºéé˜»å¡çš„æ“ä½œ</li>
</ul>
</li>
</ol>
<ol start="42">
<li></li>
</ol>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/kotlin/" rel="tag"># kotlin</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2018/07/20/hashCode-equals/" rel="prev" title="hashCode&&equals">
      <i class="fa fa-chevron-left"></i> hashCode&&equals
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/08/26/kotlin-vs-java/" rel="next" title="kotlin vs java">
      kotlin vs java <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Kotlin"><span class="nav-number">1.</span> <span class="nav-text">Kotlin</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#init"><span class="nav-number">1.0.1.</span> <span class="nav-text">init</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#final"><span class="nav-number">1.1.</span> <span class="nav-text">final</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#static"><span class="nav-number">1.2.</span> <span class="nav-text">static</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#object"><span class="nav-number">1.3.</span> <span class="nav-text">object</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#companion-object"><span class="nav-number">1.3.1.</span> <span class="nav-text">companion object</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å¸¸é‡"><span class="nav-number">1.3.2.</span> <span class="nav-text">å¸¸é‡</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ•°ç»„å’Œé›†åˆ"><span class="nav-number">1.3.3.</span> <span class="nav-text">æ•°ç»„å’Œé›†åˆ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#é›†åˆ"><span class="nav-number">1.3.4.</span> <span class="nav-text">é›†åˆ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Sequence"><span class="nav-number">1.3.5.</span> <span class="nav-text">Sequence</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å¯è§æ€§ä¿®é¥°ç¬¦"><span class="nav-number">1.3.6.</span> <span class="nav-text">å¯è§æ€§ä¿®é¥°ç¬¦</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#public"><span class="nav-number">1.3.7.</span> <span class="nav-text">public</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#hide"><span class="nav-number">1.3.8.</span> <span class="nav-text">@hide</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#internal"><span class="nav-number">1.3.9.</span> <span class="nav-text">internal</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#protected"><span class="nav-number">1.3.10.</span> <span class="nav-text">protected</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#private"><span class="nav-number">1.3.11.</span> <span class="nav-text">private</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ„é€ å™¨"><span class="nav-number">1.4.</span> <span class="nav-text">æ„é€ å™¨</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸»æ„é€ å™¨"><span class="nav-number">1.4.1.</span> <span class="nav-text">ä¸»æ„é€ å™¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸»æ„é€ å™¨é‡Œå£°æ˜å±æ€§"><span class="nav-number">1.4.2.</span> <span class="nav-text">ä¸»æ„é€ å™¨é‡Œå£°æ˜å±æ€§</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å‡½æ•°ç®€åŒ–"><span class="nav-number">1.5.</span> <span class="nav-text">å‡½æ•°ç®€åŒ–</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ä½¿ç”¨-è¿æ¥è¿”å›å€¼"><span class="nav-number">1.5.1.</span> <span class="nav-text">ä½¿ç”¨ = è¿æ¥è¿”å›å€¼</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å‚æ•°é»˜è®¤å€¼"><span class="nav-number">1.5.2.</span> <span class="nav-text">å‚æ•°é»˜è®¤å€¼</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å‘½åå‚æ•°"><span class="nav-number">1.5.3.</span> <span class="nav-text">å‘½åå‚æ•°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æœ¬åœ°å‡½æ•°ï¼ˆåµŒå¥—å‡½æ•°ï¼‰"><span class="nav-number">1.5.4.</span> <span class="nav-text">æœ¬åœ°å‡½æ•°ï¼ˆåµŒå¥—å‡½æ•°ï¼‰</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å­—ç¬¦ä¸²"><span class="nav-number">1.6.</span> <span class="nav-text">å­—ç¬¦ä¸²</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#å­—ç¬¦ä¸²æ¨¡æ¿"><span class="nav-number">1.6.1.</span> <span class="nav-text">å­—ç¬¦ä¸²æ¨¡æ¿</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#raw-string-åŸç”Ÿå­—ç¬¦ä¸²"><span class="nav-number">1.6.2.</span> <span class="nav-text">raw string (åŸç”Ÿå­—ç¬¦ä¸²)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ•°ç»„å’Œé›†åˆ-1"><span class="nav-number">1.7.</span> <span class="nav-text">æ•°ç»„å’Œé›†åˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#æ•°ç»„ä¸é›†åˆçš„æ“ä½œç¬¦"><span class="nav-number">1.7.1.</span> <span class="nav-text">æ•°ç»„ä¸é›†åˆçš„æ“ä½œç¬¦</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Range"><span class="nav-number">1.7.2.</span> <span class="nav-text">Range</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Sequence-1"><span class="nav-number">1.7.3.</span> <span class="nav-text">Sequence</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ¡ä»¶æ§åˆ¶"><span class="nav-number">1.8.</span> <span class="nav-text">æ¡ä»¶æ§åˆ¶</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#if-else"><span class="nav-number">1.8.1.</span> <span class="nav-text">if/else</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#when"><span class="nav-number">1.8.2.</span> <span class="nav-text">when</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#for"><span class="nav-number">1.8.3.</span> <span class="nav-text">for</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#try-catch"><span class="nav-number">1.8.4.</span> <span class="nav-text">try-catch</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å’Œ"><span class="nav-number">1.8.5.</span> <span class="nav-text">?. å’Œ ?:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å’Œ-1"><span class="nav-number">1.8.6.</span> <span class="nav-text">== å’Œ ===</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ³›å‹"><span class="nav-number">1.9.</span> <span class="nav-text">æ³›å‹</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ç±»å‹æ“¦é™¤"><span class="nav-number">1.9.1.</span> <span class="nav-text">ç±»å‹æ“¦é™¤</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#ç±»å‹æ“¦é™¤åä¿ç•™çš„åŸå§‹ç±»å‹"><span class="nav-number">1.9.1.1.</span> <span class="nav-text">ç±»å‹æ“¦é™¤åä¿ç•™çš„åŸå§‹ç±»å‹</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ç±»å‹æ“¦é™¤å¼•èµ·çš„é—®é¢˜åŠè§£å†³æ–¹æ³•"><span class="nav-number">1.9.1.2.</span> <span class="nav-text">ç±»å‹æ“¦é™¤å¼•èµ·çš„é—®é¢˜åŠè§£å†³æ–¹æ³•</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#è‡ªåŠ¨ç±»å‹è½¬æ¢"><span class="nav-number">1.9.1.3.</span> <span class="nav-text">è‡ªåŠ¨ç±»å‹è½¬æ¢</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ç±»å‹æ“¦é™¤ä¸å¤šæ€çš„å†²çªå’Œè§£å†³æ–¹æ³•"><span class="nav-number">1.9.1.4.</span> <span class="nav-text">ç±»å‹æ“¦é™¤ä¸å¤šæ€çš„å†²çªå’Œè§£å†³æ–¹æ³•</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#æ³›å‹ç±»å‹å˜é‡ä¸èƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹"><span class="nav-number">1.9.1.5.</span> <span class="nav-text">æ³›å‹ç±»å‹å˜é‡ä¸èƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#è¿è¡Œæ—¶ç±»å‹æŸ¥è¯¢"><span class="nav-number">1.9.1.6.</span> <span class="nav-text">è¿è¡Œæ—¶ç±»å‹æŸ¥è¯¢</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#æ³›å‹åœ¨é™æ€æ–¹æ³•å’Œé™æ€ç±»ä¸­çš„é—®é¢˜"><span class="nav-number">1.9.1.7.</span> <span class="nav-text">æ³›å‹åœ¨é™æ€æ–¹æ³•å’Œé™æ€ç±»ä¸­çš„é—®é¢˜</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java-ä¸­çš„-extends"><span class="nav-number">1.10.</span> <span class="nav-text">Java ä¸­çš„ ? extends</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java-ä¸­çš„-super"><span class="nav-number">1.11.</span> <span class="nav-text">Java ä¸­çš„ ? super</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Kotlin-ä¸­çš„-out-å’Œ-in"><span class="nav-number">1.12.</span> <span class="nav-text">Kotlin ä¸­çš„ out å’Œ in</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å·"><span class="nav-number">1.13.</span> <span class="nav-text">* å·</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#where-å…³é”®å­—"><span class="nav-number">1.14.</span> <span class="nav-text">where å…³é”®å­—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#reified-å…³é”®å­—"><span class="nav-number">1.15.</span> <span class="nav-text">reified å…³é”®å­—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Kotlin-çš„åç¨‹"><span class="nav-number">1.16.</span> <span class="nav-text">Kotlin çš„åç¨‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åç¨‹æ˜¯ä»€ä¹ˆ"><span class="nav-number">1.17.</span> <span class="nav-text">åç¨‹æ˜¯ä»€ä¹ˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åç¨‹å¥½åœ¨å“ª"><span class="nav-number">1.18.</span> <span class="nav-text">åç¨‹å¥½åœ¨å“ª</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#åŸºæœ¬ä½¿ç”¨"><span class="nav-number">1.18.1.</span> <span class="nav-text">åŸºæœ¬ä½¿ç”¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#åç¨‹çš„ã€Œ1-åˆ°-0ã€"><span class="nav-number">1.18.2.</span> <span class="nav-text">åç¨‹çš„ã€Œ1 åˆ° 0ã€</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#suspend-ã€ŒæŒ‚èµ·ã€çš„æœ¬è´¨"><span class="nav-number">1.19.</span> <span class="nav-text">suspend ã€ŒæŒ‚èµ·ã€çš„æœ¬è´¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä»€ä¹ˆæ˜¯ã€Œéé˜»å¡å¼æŒ‚èµ·ã€"><span class="nav-number">1.20.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯ã€Œéé˜»å¡å¼æŒ‚èµ·ã€</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åç¨‹ä¸çº¿ç¨‹"><span class="nav-number">1.21.</span> <span class="nav-text">åç¨‹ä¸çº¿ç¨‹</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">jiarh</p>
  <div class="site-description" itemprop="description">coding change the world .</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">27</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jiarh</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v3.9.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://muse.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.6.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

</body>
</html>
